{"version":3,"file":"streamedian.js","sources":["../node_modules/bp_logger/logger.js","../src/core/util/url.js","../src/core/iso-bmff/mp4-generator.js","../src/core/elementary/AACFrame.js","../src/core/util/binary.js","../src/core/parsers/aac.js","../src/core/elementary/AACAsm.js","../node_modules/bp_event/event.js","../src/core/iso-bmff/mp4-inspector.js","../src/core/presentation/mse.js","../src/core/remuxer/base.js","../src/core/remuxer/aac.js","../src/core/elementary/NALU.js","../src/core/elementary/NALUAsm.js","../src/core/util/exp-golomb.js","../src/core/parsers/h264.js","../src/core/remuxer/h264.js","../src/core/defs.js","../src/core/remuxer/remuxer.js","../node_modules/bp_statemachine/statemachine.js","../src/core/parsers/sdp.js","../src/client/rtsp/stream.js","../src/client/rtsp/rtp/rtp.js","../src/client/rtsp/rtp/factory.js","../src/client/rtsp/message.js","../src/client/rtsp/rtp/payload/parser.js","../src/core/base_client.js","../src/client/rtsp/client.js","../src/core/base_transport.js","../src/core/util/browser.js","../node_modules/jsencrypt/lib/asn1js/asn1.js","../node_modules/jsencrypt/lib/jsbn/prng4.js","../node_modules/jsencrypt/lib/jsbn/rng.js","../node_modules/jsencrypt/lib/jsbn/jsbn.js","../node_modules/jsencrypt/lib/jsbn/jsbn2.js","../node_modules/jsencrypt/lib/jsbn/rsa.js","../node_modules/jsencrypt/lib/jsbn/rsa2.js","../node_modules/jsencrypt/lib/asn1js/base64.js","../node_modules/jsencrypt/lib/asn1js/hex.js","../node_modules/jsencrypt/lib/jsrsasign/asn1-1.0.js","../node_modules/jsencrypt/lib/jsbn/base64.js","../node_modules/jsencrypt/src/jsencrypt.js","../src/transport/websocket.js","../src/player.js","../src/transport/websocket.js","../src/client/rtsp/client.js","../src/core/util/browser.js","../example.js"],"sourcesContent":["// ERROR=0, WARN=1, LOG=2, DEBUG=3\nexport const LogLevel = {\n    Error: 0,\n    Warn: 1,\n    Log: 2,\n    Debug: 3\n};\n\nlet DEFAULT_LOG_LEVEL = LogLevel.Debug;\n\nexport function setDefaultLogLevel(level) {\n    DEFAULT_LOG_LEVEL = level;\n}\nexport class Logger {\n    constructor(level = DEFAULT_LOG_LEVEL, tag) {\n        this.tag = tag;\n        this.setLevel(level);\n    }\n    \n    setLevel(level) {\n        this.level = level;\n    }\n    \n    static get level_map() { return {\n        [LogLevel.Debug]:'log',\n        [LogLevel.Log]:'log',\n        [LogLevel.Warn]:'warn',\n        [LogLevel.Error]:'error'\n    }};\n\n    _log(lvl, args) {\n        args = Array.prototype.slice.call(args);\n        if (this.tag) {\n            args.unshift(`[${this.tag}]`);\n        }\n        if (this.level>=lvl) console[Logger.level_map[lvl]].apply(console, args);\n    }\n    log(){\n        this._log(LogLevel.Log, arguments)\n    }\n    debug(){\n        this._log(LogLevel.Debug, arguments)\n    }\n    error(){\n        this._log(LogLevel.Error, arguments)\n    }\n    warn(){\n        this._log(LogLevel.Warn, arguments)\n    }\n}\n\nconst taggedLoggers = new Map();\nexport function getTagged(tag) {\n    if (!taggedLoggers.has(tag)) {\n        taggedLoggers.set(tag, new Logger(DEFAULT_LOG_LEVEL, tag));\n    }\n    return taggedLoggers.get(tag);\n}\nexport const Log = new Logger();\n","export class Url {\r\n    static parse(url) {\r\n        var ret = {};\r\n\r\n        var regex = /^([^:]+):\\/\\/([^\\/]+)(.*)$/;  //protocol, login, urlpath\r\n        var result = regex.exec(url);\r\n\r\n        ret.full = url;\r\n        ret.protocol = result[1];\r\n        ret.urlpath = result[3];\r\n\r\n        var parts = ret.urlpath.split('/');\r\n        ret.basename = parts.pop().split(/\\?|#/)[0];\r\n        ret.basepath = parts.join('/');\r\n\r\n        var loginSplit = result[2].split('@');\r\n        var hostport = loginSplit[0].split(':');\r\n        var userpass = [ null, null ];\r\n        if (loginSplit.length === 2) {\r\n            userpass = loginSplit[0].split(':');\r\n            hostport = loginSplit[1].split(':');\r\n        }\r\n\r\n        ret.user = userpass[0];\r\n        ret.pass = userpass[1];\r\n        ret.host = hostport[0];\r\n        ret.auth = (ret.user && ret.pass) ? `${ret.user}:${ret.pass}` : '';\r\n\r\n        ret.port = (null == hostport[1]) ? Url.protocolDefaultPort(ret.protocol) : hostport[1];\r\n        ret.portDefined = (null != hostport[1]);\r\n        ret.location = `${ret.host}:${ret.port}`;\r\n\r\n        if (ret.protocol == 'unix') {\r\n            ret.socket = ret.port;\r\n            ret.port = undefined;\r\n        }\r\n\r\n        return ret;\r\n    }\r\n\r\n    static full(parsed) {\r\n        return `${parsed.protocol}://${parsed.auth?parsed.auth+'@':''}${parsed.location}/${parsed.urlpath}`;\r\n    }\r\n\r\n    static isAbsolute(url) {\r\n        return /^[^:]+:\\/\\//.test(url);\r\n    }\r\n\r\n    static protocolDefaultPort(protocol) {\r\n        switch (protocol) {\r\n            case 'rtsp': return 554;\r\n            case 'http': return 80;\r\n            case 'https': return 443;\r\n        }\r\n\r\n        return 0;\r\n    }\r\n}","/**\r\n * Generate MP4 Box\r\n * got from: https://github.com/dailymotion/hls.js\r\n */\r\n\r\nexport class MP4 {\r\n    static init() {\r\n        MP4.types = {\r\n            avc1: [], // codingname\r\n            avcC: [],\r\n            btrt: [],\r\n            dinf: [],\r\n            dref: [],\r\n            esds: [],\r\n            ftyp: [],\r\n            hdlr: [],\r\n            mdat: [],\r\n            mdhd: [],\r\n            mdia: [],\r\n            mfhd: [],\r\n            minf: [],\r\n            moof: [],\r\n            moov: [],\r\n            mp4a: [],\r\n            mvex: [],\r\n            mvhd: [],\r\n            sdtp: [],\r\n            stbl: [],\r\n            stco: [],\r\n            stsc: [],\r\n            stsd: [],\r\n            stsz: [],\r\n            stts: [],\r\n            tfdt: [],\r\n            tfhd: [],\r\n            traf: [],\r\n            trak: [],\r\n            trun: [],\r\n            trex: [],\r\n            tkhd: [],\r\n            vmhd: [],\r\n            smhd: []\r\n        };\r\n\r\n        var i;\r\n        for (i in MP4.types) {\r\n            if (MP4.types.hasOwnProperty(i)) {\r\n                MP4.types[i] = [\r\n                    i.charCodeAt(0),\r\n                    i.charCodeAt(1),\r\n                    i.charCodeAt(2),\r\n                    i.charCodeAt(3)\r\n                ];\r\n            }\r\n        }\r\n\r\n        var videoHdlr = new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x00, // pre_defined\r\n            0x76, 0x69, 0x64, 0x65, // handler_type: 'vide'\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x56, 0x69, 0x64, 0x65,\r\n            0x6f, 0x48, 0x61, 0x6e,\r\n            0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'VideoHandler'\r\n        ]);\r\n\r\n        var audioHdlr = new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x00, // pre_defined\r\n            0x73, 0x6f, 0x75, 0x6e, // handler_type: 'soun'\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x53, 0x6f, 0x75, 0x6e,\r\n            0x64, 0x48, 0x61, 0x6e,\r\n            0x64, 0x6c, 0x65, 0x72, 0x00 // name: 'SoundHandler'\r\n        ]);\r\n\r\n        MP4.HDLR_TYPES = {\r\n            'video': videoHdlr,\r\n            'audio': audioHdlr\r\n        };\r\n\r\n        var dref = new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x01, // entry_count\r\n            0x00, 0x00, 0x00, 0x0c, // entry_size\r\n            0x75, 0x72, 0x6c, 0x20, // 'url' type\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x01 // entry_flags\r\n        ]);\r\n\r\n        var stco = new Uint8Array([\r\n            0x00, // version\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x00 // entry_count\r\n        ]);\r\n\r\n        MP4.STTS = MP4.STSC = MP4.STCO = stco;\r\n\r\n        MP4.STSZ = new Uint8Array([\r\n            0x00, // version\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x00, // sample_size\r\n            0x00, 0x00, 0x00, 0x00, // sample_count\r\n        ]);\r\n        MP4.VMHD = new Uint8Array([\r\n            0x00, // version\r\n            0x00, 0x00, 0x01, // flags\r\n            0x00, 0x00, // graphicsmode\r\n            0x00, 0x00,\r\n            0x00, 0x00,\r\n            0x00, 0x00 // opcolor\r\n        ]);\r\n        MP4.SMHD = new Uint8Array([\r\n            0x00, // version\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, // balance\r\n            0x00, 0x00 // reserved\r\n        ]);\r\n\r\n        MP4.STSD = new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x01]);// entry_count\r\n\r\n        var majorBrand = new Uint8Array([105,115,111,109]); // isom\r\n        var avc1Brand = new Uint8Array([97,118,99,49]); // avc1\r\n        var minorVersion = new Uint8Array([0, 0, 0, 1]);\r\n\r\n        MP4.FTYP = MP4.box(MP4.types.ftyp, majorBrand, minorVersion, majorBrand, avc1Brand);\r\n        MP4.DINF = MP4.box(MP4.types.dinf, MP4.box(MP4.types.dref, dref));\r\n    }\r\n\r\n    static box(type, ...payload) {\r\n        var size = 8,\r\n            i = payload.length,\r\n            len = i,\r\n            result;\r\n        // calculate the total size we need to allocate\r\n        while (i--) {\r\n            size += payload[i].byteLength;\r\n        }\r\n        result = new Uint8Array(size);\r\n        result[0] = (size >> 24) & 0xff;\r\n        result[1] = (size >> 16) & 0xff;\r\n        result[2] = (size >> 8) & 0xff;\r\n        result[3] = size  & 0xff;\r\n        result.set(type, 4);\r\n        // copy the payload into the result\r\n        for (i = 0, size = 8; i < len; ++i) {\r\n            // copy payload[i] array @ offset size\r\n            result.set(payload[i], size);\r\n            size += payload[i].byteLength;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    static hdlr(type) {\r\n        return MP4.box(MP4.types.hdlr, MP4.HDLR_TYPES[type]);\r\n    }\r\n\r\n    static mdat(data) {\r\n        return MP4.box(MP4.types.mdat, data);\r\n    }\r\n\r\n    static mdhd(timescale, duration) {\r\n        return MP4.box(MP4.types.mdhd, new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            0x00, 0x00, 0x00, 0x02, // creation_time\r\n            0x00, 0x00, 0x00, 0x03, // modification_time\r\n            (timescale >> 24) & 0xFF,\r\n            (timescale >> 16) & 0xFF,\r\n            (timescale >>  8) & 0xFF,\r\n            timescale & 0xFF, // timescale\r\n            (duration >> 24),\r\n            (duration >> 16) & 0xFF,\r\n            (duration >>  8) & 0xFF,\r\n            duration & 0xFF, // duration\r\n            0x55, 0xc4, // 'und' language (undetermined)\r\n            0x00, 0x00\r\n        ]));\r\n    }\r\n\r\n    static mdia(track) {\r\n        return MP4.box(MP4.types.mdia, MP4.mdhd(track.timescale, track.duration), MP4.hdlr(track.type), MP4.minf(track));\r\n    }\r\n\r\n    static mfhd(sequenceNumber) {\r\n        return MP4.box(MP4.types.mfhd, new Uint8Array([\r\n            0x00,\r\n            0x00, 0x00, 0x00, // flags\r\n            (sequenceNumber >> 24),\r\n            (sequenceNumber >> 16) & 0xFF,\r\n            (sequenceNumber >>  8) & 0xFF,\r\n            sequenceNumber & 0xFF, // sequence_number\r\n        ]));\r\n    }\r\n\r\n    static minf(track) {\r\n        if (track.type === 'audio') {\r\n            return MP4.box(MP4.types.minf, MP4.box(MP4.types.smhd, MP4.SMHD), MP4.DINF, MP4.stbl(track));\r\n        } else {\r\n            return MP4.box(MP4.types.minf, MP4.box(MP4.types.vmhd, MP4.VMHD), MP4.DINF, MP4.stbl(track));\r\n        }\r\n    }\r\n\r\n    static moof(sn, baseMediaDecodeTime, track) {\r\n        return MP4.box(MP4.types.moof, MP4.mfhd(sn), MP4.traf(track,baseMediaDecodeTime));\r\n    }\r\n    /**\r\n     * @param tracks... (optional) {array} the tracks associated with this movie\r\n     */\r\n    static moov(tracks, duration, timescale) {\r\n        var\r\n            i = tracks.length,\r\n            boxes = [];\r\n\r\n        while (i--) {\r\n            boxes[i] = MP4.trak(tracks[i]);\r\n        }\r\n\r\n        return MP4.box.apply(null, [MP4.types.moov, MP4.mvhd(timescale, duration)].concat(boxes).concat(MP4.mvex(tracks)));\r\n    }\r\n\r\n    static mvex(tracks) {\r\n        var\r\n            i = tracks.length,\r\n            boxes = [];\r\n\r\n        while (i--) {\r\n            boxes[i] = MP4.trex(tracks[i]);\r\n        }\r\n        return MP4.box.apply(null, [MP4.types.mvex].concat(boxes));\r\n    }\r\n\r\n    static mvhd(timescale,duration) {\r\n        var\r\n            bytes = new Uint8Array([\r\n                0x00, // version 0\r\n                0x00, 0x00, 0x00, // flags\r\n                0x00, 0x00, 0x00, 0x01, // creation_time\r\n                0x00, 0x00, 0x00, 0x02, // modification_time\r\n                (timescale >> 24) & 0xFF,\r\n                (timescale >> 16) & 0xFF,\r\n                (timescale >>  8) & 0xFF,\r\n                timescale & 0xFF, // timescale\r\n                (duration >> 24) & 0xFF,\r\n                (duration >> 16) & 0xFF,\r\n                (duration >>  8) & 0xFF,\r\n                duration & 0xFF, // duration\r\n                0x00, 0x01, 0x00, 0x00, // 1.0 rate\r\n                0x01, 0x00, // 1.0 volume\r\n                0x00, 0x00, // reserved\r\n                0x00, 0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x01, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x01, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00, // pre_defined\r\n                0xff, 0xff, 0xff, 0xff // next_track_ID\r\n            ]);\r\n        return MP4.box(MP4.types.mvhd, bytes);\r\n    }\r\n\r\n    static sdtp(track) {\r\n        var\r\n            samples = track.samples || [],\r\n            bytes = new Uint8Array(4 + samples.length),\r\n            flags,\r\n            i;\r\n        // leave the full box header (4 bytes) all zero\r\n        // write the sample table\r\n        for (i = 0; i < samples.length; i++) {\r\n            flags = samples[i].flags;\r\n            bytes[i + 4] = (flags.dependsOn << 4) |\r\n                (flags.isDependedOn << 2) |\r\n                (flags.hasRedundancy);\r\n        }\r\n\r\n        return MP4.box(MP4.types.sdtp, bytes);\r\n    }\r\n\r\n    static stbl(track) {\r\n        return MP4.box(MP4.types.stbl, MP4.stsd(track), MP4.box(MP4.types.stts, MP4.STTS), MP4.box(MP4.types.stsc, MP4.STSC), MP4.box(MP4.types.stsz, MP4.STSZ), MP4.box(MP4.types.stco, MP4.STCO));\r\n    }\r\n\r\n    static avc1(track) {\r\n        var sps = [], pps = [], i, data, len;\r\n        // assemble the SPSs\r\n\r\n        for (i = 0; i < track.sps.length; i++) {\r\n            data = track.sps[i];\r\n            len = data.byteLength;\r\n            sps.push((len >>> 8) & 0xFF);\r\n            sps.push((len & 0xFF));\r\n            sps = sps.concat(Array.prototype.slice.call(data)); // SPS\r\n        }\r\n\r\n        // assemble the PPSs\r\n        for (i = 0; i < track.pps.length; i++) {\r\n            data = track.pps[i];\r\n            len = data.byteLength;\r\n            pps.push((len >>> 8) & 0xFF);\r\n            pps.push((len & 0xFF));\r\n            pps = pps.concat(Array.prototype.slice.call(data));\r\n        }\r\n\r\n        var avcc = MP4.box(MP4.types.avcC, new Uint8Array([\r\n                0x01,   // version\r\n                sps[3], // profile\r\n                sps[4], // profile compat\r\n                sps[5], // level\r\n                0xfc | 3, // lengthSizeMinusOne, hard-coded to 4 bytes\r\n                0xE0 | track.sps.length // 3bit reserved (111) + numOfSequenceParameterSets\r\n            ].concat(sps).concat([\r\n                track.pps.length // numOfPictureParameterSets\r\n            ]).concat(pps))), // \"PPS\"\r\n            width = track.width,\r\n            height = track.height;\r\n        //console.log('avcc:' + Hex.hexDump(avcc));\r\n        return MP4.box(MP4.types.avc1, new Uint8Array([\r\n                0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x01, // data_reference_index\r\n                0x00, 0x00, // pre_defined\r\n                0x00, 0x00, // reserved\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00, // pre_defined\r\n                (width >> 8) & 0xFF,\r\n                width & 0xff, // width\r\n                (height >> 8) & 0xFF,\r\n                height & 0xff, // height\r\n                0x00, 0x48, 0x00, 0x00, // horizresolution\r\n                0x00, 0x48, 0x00, 0x00, // vertresolution\r\n                0x00, 0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x01, // frame_count\r\n                0x12,\r\n                0x62, 0x69, 0x6E, 0x65, //binelpro.ru\r\n                0x6C, 0x70, 0x72, 0x6F,\r\n                0x2E, 0x72, 0x75, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, // compressorname\r\n                0x00, 0x18,   // depth = 24\r\n                0x11, 0x11]), // pre_defined = -1\r\n            avcc,\r\n            MP4.box(MP4.types.btrt, new Uint8Array([\r\n                0x00, 0x1c, 0x9c, 0x80, // bufferSizeDB\r\n                0x00, 0x2d, 0xc6, 0xc0, // maxBitrate\r\n                0x00, 0x2d, 0xc6, 0xc0])) // avgBitrate\r\n        );\r\n    }\r\n\r\n    static esds(track) {\r\n        var configlen = track.config.byteLength;\r\n        let data = new Uint8Array(26+configlen+3);\r\n        data.set([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n\r\n            0x03, // descriptor_type\r\n            0x17+configlen, // length\r\n            0x00, 0x01, //es_id\r\n            0x00, // stream_priority\r\n\r\n            0x04, // descriptor_type\r\n            0x0f+configlen, // length\r\n            0x40, //codec : mpeg4_audio\r\n            0x15, // stream_type\r\n            0x00, 0x00, 0x00, // buffer_size\r\n            0x00, 0x00, 0x00, 0x00, // maxBitrate\r\n            0x00, 0x00, 0x00, 0x00, // avgBitrate\r\n\r\n            0x05, // descriptor_type\r\n            configlen\r\n        ]);\r\n        data.set(track.config, 26);\r\n        data.set([0x06, 0x01, 0x02], 26+configlen);\r\n        // return new Uint8Array([\r\n        //     0x00, // version 0\r\n        //     0x00, 0x00, 0x00, // flags\r\n        //\r\n        //     0x03, // descriptor_type\r\n        //     0x17+configlen, // length\r\n        //     0x00, 0x01, //es_id\r\n        //     0x00, // stream_priority\r\n        //\r\n        //     0x04, // descriptor_type\r\n        //     0x0f+configlen, // length\r\n        //     0x40, //codec : mpeg4_audio\r\n        //     0x15, // stream_type\r\n        //     0x00, 0x00, 0x00, // buffer_size\r\n        //     0x00, 0x00, 0x00, 0x00, // maxBitrate\r\n        //     0x00, 0x00, 0x00, 0x00, // avgBitrate\r\n        //\r\n        //     0x05 // descriptor_type\r\n        // ].concat([configlen]).concat(track.config).concat([0x06, 0x01, 0x02])); // GASpecificConfig)); // length + audio config descriptor\r\n        return data;\r\n    }\r\n\r\n    static mp4a(track) {\r\n        var audiosamplerate = track.audiosamplerate;\r\n        return MP4.box(MP4.types.mp4a, new Uint8Array([\r\n                0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x00, 0x00, // reserved\r\n                0x00, 0x01, // data_reference_index\r\n                0x00, 0x00, 0x00, 0x00,\r\n                0x00, 0x00, 0x00, 0x00, // reserved\r\n                0x00, track.channelCount, // channelcount\r\n                0x00, 0x10, // sampleSize:16bits\r\n                0x00, 0x00, // pre_defined\r\n                0x00, 0x00, // reserved2\r\n                (audiosamplerate >> 8) & 0xFF,\r\n                audiosamplerate & 0xff, //\r\n                0x00, 0x00]),\r\n            MP4.box(MP4.types.esds, MP4.esds(track)));\r\n    }\r\n\r\n    static stsd(track) {\r\n        if (track.type === 'audio') {\r\n            return MP4.box(MP4.types.stsd, MP4.STSD, MP4.mp4a(track));\r\n        } else {\r\n            return MP4.box(MP4.types.stsd, MP4.STSD, MP4.avc1(track));\r\n        }\r\n    }\r\n\r\n    static tkhd(track) {\r\n        var id = track.id,\r\n            duration = track.duration,\r\n            width = track.width,\r\n            height = track.height,\r\n            volume = track.volume;\r\n        return MP4.box(MP4.types.tkhd, new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x07, // flags\r\n            0x00, 0x00, 0x00, 0x00, // creation_time\r\n            0x00, 0x00, 0x00, 0x00, // modification_time\r\n            (id >> 24) & 0xFF,\r\n            (id >> 16) & 0xFF,\r\n            (id >> 8) & 0xFF,\r\n            id & 0xFF, // track_ID\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            (duration >> 24),\r\n            (duration >> 16) & 0xFF,\r\n            (duration >>  8) & 0xFF,\r\n            duration & 0xFF, // duration\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00, // reserved\r\n            0x00, 0x00, // layer\r\n            0x00, 0x00, // alternate_group\r\n            (volume>>0)&0xff, (((volume%1)*10)>>0)&0xff, // track volume // FIXME\r\n            0x00, 0x00, // reserved\r\n            0x00, 0x01, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x01, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x00, 0x00, 0x00, 0x00,\r\n            0x40, 0x00, 0x00, 0x00, // transformation: unity matrix\r\n            (width >> 8) & 0xFF,\r\n            width & 0xFF,\r\n            0x00, 0x00, // width\r\n            (height >> 8) & 0xFF,\r\n            height & 0xFF,\r\n            0x00, 0x00 // height\r\n        ]));\r\n    }\r\n\r\n    static traf(track,baseMediaDecodeTime) {\r\n        var sampleDependencyTable = MP4.sdtp(track),\r\n            id = track.id;\r\n        return MP4.box(MP4.types.traf,\r\n            MP4.box(MP4.types.tfhd, new Uint8Array([\r\n                0x00, // version 0\r\n                0x00, 0x00, 0x00, // flags\r\n                (id >> 24),\r\n                (id >> 16) & 0XFF,\r\n                (id >> 8) & 0XFF,\r\n                (id & 0xFF) // track_ID\r\n            ])),\r\n            MP4.box(MP4.types.tfdt, new Uint8Array([\r\n                0x00, // version 0\r\n                0x00, 0x00, 0x00, // flags\r\n                (baseMediaDecodeTime >>24),\r\n                (baseMediaDecodeTime >> 16) & 0XFF,\r\n                (baseMediaDecodeTime >> 8) & 0XFF,\r\n                (baseMediaDecodeTime & 0xFF) // baseMediaDecodeTime\r\n            ])),\r\n            MP4.trun(track,\r\n                sampleDependencyTable.length +\r\n                16 + // tfhd\r\n                16 + // tfdt\r\n                8 +  // traf header\r\n                16 + // mfhd\r\n                8 +  // moof header\r\n                8),  // mdat header\r\n            sampleDependencyTable);\r\n    }\r\n\r\n    /**\r\n     * Generate a track box.\r\n     * @param track {object} a track definition\r\n     * @return {Uint8Array} the track box\r\n     */\r\n    static trak(track) {\r\n        track.duration = track.duration || 0xffffffff;\r\n        return MP4.box(MP4.types.trak, MP4.tkhd(track), MP4.mdia(track));\r\n    }\r\n\r\n    static trex(track) {\r\n        var id = track.id;\r\n        return MP4.box(MP4.types.trex, new Uint8Array([\r\n            0x00, // version 0\r\n            0x00, 0x00, 0x00, // flags\r\n            (id >> 24),\r\n            (id >> 16) & 0XFF,\r\n            (id >> 8) & 0XFF,\r\n            (id & 0xFF), // track_ID\r\n            0x00, 0x00, 0x00, 0x01, // default_sample_description_index\r\n            0x00, 0x00, 0x00, 0x00, // default_sample_duration\r\n            0x00, 0x00, 0x00, 0x00, // default_sample_size\r\n            0x00, 0x01, 0x00, 0x01 // default_sample_flags\r\n        ]));\r\n    }\r\n\r\n    static trun(track, offset) {\r\n        var samples= track.samples || [],\r\n            len = samples.length,\r\n            arraylen = 12 + (16 * len),\r\n            array = new Uint8Array(arraylen),\r\n            i,sample,duration,size,flags,cts;\r\n        offset += 8 + arraylen;\r\n        array.set([\r\n            0x00, // version 0\r\n            0x00, 0x0f, 0x01, // flags\r\n            (len >>> 24) & 0xFF,\r\n            (len >>> 16) & 0xFF,\r\n            (len >>> 8) & 0xFF,\r\n            len & 0xFF, // sample_count\r\n            (offset >>> 24) & 0xFF,\r\n            (offset >>> 16) & 0xFF,\r\n            (offset >>> 8) & 0xFF,\r\n            offset & 0xFF // data_offset\r\n        ],0);\r\n        for (i = 0; i < len; i++) {\r\n            sample = samples[i];\r\n            duration = sample.duration;\r\n            size = sample.size;\r\n            flags = sample.flags;\r\n            cts = sample.cts;\r\n            array.set([\r\n                (duration >>> 24) & 0xFF,\r\n                (duration >>> 16) & 0xFF,\r\n                (duration >>> 8) & 0xFF,\r\n                duration & 0xFF, // sample_duration\r\n                (size >>> 24) & 0xFF,\r\n                (size >>> 16) & 0xFF,\r\n                (size >>> 8) & 0xFF,\r\n                size & 0xFF, // sample_size\r\n                (flags.isLeading << 2) | flags.dependsOn,\r\n                (flags.isDependedOn << 6) |\r\n                (flags.hasRedundancy << 4) |\r\n                (flags.paddingValue << 1) |\r\n                flags.isNonSync,\r\n                flags.degradPrio & 0xF0 << 8,\r\n                flags.degradPrio & 0x0F, // sample_flags\r\n                (cts >>> 24) & 0xFF,\r\n                (cts >>> 16) & 0xFF,\r\n                (cts >>> 8) & 0xFF,\r\n                cts & 0xFF // sample_composition_time_offset\r\n            ],12+16*i);\r\n        }\r\n        return MP4.box(MP4.types.trun, array);\r\n    }\r\n\r\n    static initSegment(tracks, duration, timescale) {\r\n        if (!MP4.types) {\r\n            MP4.init();\r\n        }\r\n        var movie = MP4.moov(tracks, duration, timescale), result;\r\n        result = new Uint8Array(MP4.FTYP.byteLength + movie.byteLength);\r\n        result.set(MP4.FTYP);\r\n        result.set(movie, MP4.FTYP.byteLength);\r\n        return result;\r\n    }\r\n}\r\n","export class AACFrame {\r\n\r\n    constructor(data, dts, pts) {\r\n        this.dts = dts;\r\n        this.pts = pts ? pts : this.dts;\r\n\r\n        this.data=data;//.subarray(offset);\r\n    }\r\n\r\n    getData() {\r\n        return this.data;\r\n    }\r\n\r\n    getSize() {\r\n        return this.data.byteLength;\r\n    }\r\n}","// TODO: asm.js\r\n\r\nexport function appendByteArray(buffer1, buffer2) {\r\n    let tmp = new Uint8Array((buffer1.byteLength|0) + (buffer2.byteLength|0));\r\n    tmp.set(buffer1, 0);\r\n    tmp.set(buffer2, buffer1.byteLength|0);\r\n    return tmp;\r\n}\r\n\r\nexport function appendByteArrayAsync(buffer1, buffer2) {\r\n    return new Promise((resolve, reject)=>{\r\n        let blob = new Blob([buffer1, buffer2]);\r\n        let reader = new FileReader();\r\n        reader.addEventListener(\"loadend\", function() {\r\n            resolve();\r\n        });\r\n        reader.readAsArrayBuffer(blob);\r\n    });\r\n}\r\nexport function base64ToArrayBuffer(base64) {\r\n    var binary_string =  window.atob(base64);\r\n    var len = binary_string.length;\r\n    var bytes = new Uint8Array( len );\r\n    for (var i = 0; i < len; i++)        {\r\n        bytes[i] = binary_string.charCodeAt(i);\r\n    }\r\n    return bytes.buffer;\r\n}\r\n\r\nexport function hexToByteArray(hex) {\r\n    let len = hex.length >> 1;\r\n    var bufView = new Uint8Array(len);\r\n    for (var i = 0; i < len; i++) {\r\n        bufView[i] = parseInt(hex.substr(i<<1,2),16);\r\n    }\r\n    return bufView;\r\n}\r\n\r\nexport function concatenate(resultConstructor, ...arrays) {\r\n    let totalLength = 0;\r\n    for (let arr of arrays) {\r\n        totalLength += arr.length;\r\n    }\r\n    let result = new resultConstructor(totalLength);\r\n    let offset = 0;\r\n    for (let arr of arrays) {\r\n        result.set(arr, offset);\r\n        offset += arr.length;\r\n    }\r\n    return result;\r\n}\r\n\r\nexport function bitSlice(bytearray, start=0, end=bytearray.byteLength*8) {\r\n    let byteLen = Math.ceil((end-start)/8);\r\n    let res = new Uint8Array(byteLen);\r\n    let startByte = start >>> 3;   // /8\r\n    let endByte = (end>>>3) - 1;    // /8\r\n    let bitOffset = start & 0x7;     // %8\r\n    let nBitOffset = 8 - bitOffset;\r\n    let endOffset = 8 - end & 0x7;   // %8\r\n    for (let i=0; i<byteLen; ++i) {\r\n        let tail = 0;\r\n        if (i<endByte) {\r\n            tail = bytearray[startByte+i+1] >> nBitOffset;\r\n            if (i == endByte-1 && endOffset < 8) {\r\n                tail >>= endOffset;\r\n                tail <<= endOffset;\r\n            }\r\n        }\r\n        res[i]=(bytearray[startByte+i]<<bitOffset) | tail;\r\n    }\r\n    return res;\r\n}\r\n\r\nexport class BitArray {\r\n\r\n    constructor(src) {\r\n        this.src    = new DataView(src.buffer, src.byteOffset, src.byteLength);\r\n        this.bitpos = 0;\r\n        this.byte   = this.src.getUint8(0); /* This should really be undefined, uint wont allow it though */\r\n        this.bytepos = 0;\r\n    }\r\n\r\n    readBits(length) {\r\n        if (32 < (length|0) || 0 === (length|0)) {\r\n            /* To big for an uint */\r\n            throw new Error(\"too big\");\r\n        }\r\n\r\n        let result = 0;\r\n        for (let i = length; i > 0; --i) {\r\n\r\n            /* Shift result one left to make room for another bit,\r\n             then add the next bit on the stream. */\r\n            result = ((result|0) << 1) | (((this.byte|0) >> (8 - (++this.bitpos))) & 0x01);\r\n            if ((this.bitpos|0)>=8) {\r\n                this.byte = this.src.getUint8(++this.bytepos);\r\n                this.bitpos &= 0x7;\r\n            }\r\n        }\r\n\r\n        return result;\r\n    }\r\n    skipBits(length) {\r\n        this.bitpos += (length|0) & 0x7; // %8\r\n        this.bytepos += (length|0) >>> 3;  // *8\r\n        if (this.bitpos > 7) {\r\n            this.bitpos &= 0x7;\r\n            ++this.bytepos;\r\n        }\r\n\r\n        if (!this.finished()) {\r\n            this.byte = this.src.getUint8(this.bytepos);\r\n            return 0;\r\n        } else {\r\n            return this.bytepos-this.src.byteLength-this.src.bitpos;\r\n        }\r\n    }\r\n    \r\n    finished() {\r\n        return this.bytepos >= this.src.byteLength;\r\n    }\r\n}","import {BitArray, bitSlice} from '../util/binary';\r\n\r\nexport class AACParser {\r\n    static get SampleRates() {return  [\r\n        96000, 88200,\r\n        64000, 48000,\r\n        44100, 32000,\r\n        24000, 22050,\r\n        16000, 12000,\r\n        11025, 8000,\r\n        7350];}\r\n\r\n    // static Profile = [\r\n    //     0: Null\r\n    //     1: AAC Main\r\n    //     2: AAC LC (Low Complexity)\r\n    //     3: AAC SSR (Scalable Sample Rate)\r\n    //     4: AAC LTP (Long Term Prediction)\r\n    //     5: SBR (Spectral Band Replication)\r\n    //     6: AAC Scalable\r\n    // ]\r\n\r\n    static parseAudioSpecificConfig(bytesOrBits) {\r\n        let config;\r\n        if (bytesOrBits.byteLength) { // is byteArray\r\n            config = new BitArray(bytesOrBits);\r\n        } else {\r\n            config = bytesOrBits;\r\n        }\r\n\r\n        let bitpos = config.bitpos+(config.src.byteOffset+config.bytepos)*8;\r\n        let prof = config.readBits(5);\r\n        this.codec = `mp4a.40.${prof}`;\r\n        let sfi = config.readBits(4);\r\n        if (sfi == 0xf) config.skipBits(24);\r\n        let channels = config.readBits(4);\r\n\r\n        return {\r\n            config: bitSlice(new Uint8Array(config.src.buffer), bitpos, bitpos+16),\r\n            codec: `mp4a.40.${prof}`,\r\n            samplerate: AACParser.SampleRates[sfi],\r\n            channels: channels\r\n        }\r\n    }\r\n\r\n    static parseStreamMuxConfig(bytes) {\r\n        // ISO_IEC_14496-3 Part 3 Audio. StreamMuxConfig\r\n        let config = new BitArray(bytes);\r\n\r\n        if (!config.readBits(1)) {\r\n            config.skipBits(14);\r\n            return AACParser.parseAudioSpecificConfig(config);\r\n        }\r\n    }\r\n}\r\n","import {AACFrame} from './AACFrame';\r\nimport {AACParser} from \"../parsers/aac\";\r\n// TODO: asm.js\r\nexport class AACAsm {\r\n    constructor() {\r\n        this.config = null;\r\n    }\r\n\r\n    onAACFragment(pkt) {\r\n        let rawData = pkt.getPayload();\r\n        if (!pkt.media) {\r\n            return null;\r\n        }\r\n        let data = new DataView(rawData.buffer, rawData.byteOffset, rawData.byteLength);\r\n\r\n        let sizeLength = Number(pkt.media.fmtp['sizelength'] || 0);\r\n        let indexLength = Number(pkt.media.fmtp['indexlength'] || 0);\r\n        let indexDeltaLength = Number(pkt.media.fmtp['indexdeltalength'] || 0);\r\n        let CTSDeltaLength = Number(pkt.media.fmtp['ctsdeltalength'] || 0);\r\n        let DTSDeltaLength = Number(pkt.media.fmtp['dtsdeltalength'] || 0);\r\n        let RandomAccessIndication = Number(pkt.media.fmtp['randomaccessindication'] || 0);\r\n        let StreamStateIndication = Number(pkt.media.fmtp['streamstateindication'] || 0);\r\n        let AuxiliaryDataSizeLength = Number(pkt.media.fmtp['auxiliarydatasizelength'] || 0);\r\n\r\n        let configHeaderLength =\r\n            sizeLength + Math.max(indexLength, indexDeltaLength) + CTSDeltaLength + DTSDeltaLength +\r\n            RandomAccessIndication + StreamStateIndication + AuxiliaryDataSizeLength;\r\n\r\n\r\n        let auHeadersLengthPadded = 0;\r\n        if (0 !== configHeaderLength) {\r\n            /* The AU header section is not empty, read it from payload */\r\n            let auHeadersLengthInBits = data.getUint16(0); // Always 2 octets, without padding\r\n            auHeadersLengthPadded = 2 + ((auHeadersLengthInBits + (auHeadersLengthInBits & 0x7)) >>> 3); // Add padding\r\n\r\n            //this.config = AACParser.parseAudioSpecificConfig(new Uint8Array(rawData, 0 , auHeadersLengthPadded));\r\n            // TODO: parse config\r\n        }\r\n\r\n        let aacData = rawData.subarray(auHeadersLengthPadded);\r\n        let offset = 0;\r\n        while (true) {\r\n            if (aacData[offset] !=255) break;\r\n            ++offset;\r\n        }\r\n\r\n        ++offset;\r\n        let ts = (Math.round(pkt.getTimestampMS()/1024) << 10) * 90000 / this.config.samplerate;\r\n        return new AACFrame(rawData.subarray(auHeadersLengthPadded+offset), ts);\r\n    }\r\n}","const listener = Symbol(\"event_listener\");\nconst listeners = Symbol(\"event_listeners\");\n\nexport class DestructibleEventListener {\n    constructor(eventListener) {\n        this[listener] = eventListener;\n        this[listeners] = new Map();\n    }\n\n    destroy() {\n        this[listeners].forEach((listener_set, event)=>{\n            listener_set.forEach((fn)=>{\n                this[listener].removeEventListener(event, fn);\n            });\n            listener_set = null;\n        });\n        this[listeners] = null;\n    }\n\n    addEventListener(event, fn) {\n        if (!this[listeners].has(event)) {\n            this[listeners].set(event, new Set());\n        }\n        this[listeners].get(event).add(fn);\n        this[listener].addEventListener(event, fn, false);\n    }\n\n    removeEventListener(event, fn) {\n        this[listener].removeEventListener(event, fn, false);\n        if (this[listeners].has(event)) {\n            this[listeners].set(event, new Set());\n            let ev = this[listeners].get(event);\n            ev.delete(fn);\n            if (!ev.size) {\n                this[listeners].delete(event);\n            }\n        }\n    }\n\n    dispatchEvent(event) {\n        this[listener].dispatchEvent(event);\n    }\n}\n\nexport class EventEmitter {\n    constructor() {\n        this[listener] = new DestructibleEventListener(document.createElement('div'));\n    }\n\n    destroy() {\n        this[listener].destroy();\n        this[listener] = null;\n    }\n\n    addEventListener(event, fn) {\n        this[listener].addEventListener(event, fn, false);\n    }\n\n    removeEventListener(event, fn) {\n        this[listener].removeEventListener(event, fn, false);\n    }\n\n    dispatchEvent(event, data) {\n        this[listener].dispatchEvent(new CustomEvent(event, {detail: data}))\n    }\n}\n","var\r\n  DataView = window.DataView,\r\n  /**\r\n   * Returns the string representation of an ASCII encoded four byte buffer.\r\n   * @param buffer {Uint8Array} a four-byte buffer to translate\r\n   * @return {string} the corresponding string\r\n   */\r\n  parseType = function(buffer) {\r\n    var result = '';\r\n    result += String.fromCharCode(buffer[0]);\r\n    result += String.fromCharCode(buffer[1]);\r\n    result += String.fromCharCode(buffer[2]);\r\n    result += String.fromCharCode(buffer[3]);\r\n    return result;\r\n  },\r\n  parseMp4Date = function(seconds) {\r\n    return new Date(seconds * 1000 - 2082844800000);\r\n  },\r\n  parseSampleFlags = function(flags) {\r\n    return {\r\n      isLeading: (flags[0] & 0x0c) >>> 2,\r\n      dependsOn: flags[0] & 0x03,\r\n      isDependedOn: (flags[1] & 0xc0) >>> 6,\r\n      hasRedundancy: (flags[1] & 0x30) >>> 4,\r\n      paddingValue: (flags[1] & 0x0e) >>> 1,\r\n      isNonSyncSample: flags[1] & 0x01,\r\n      degradationPriority: (flags[2] << 8) | flags[3]\r\n    };\r\n  },\r\n  nalParse = function(avcStream) {\r\n    var\r\n      avcView = new DataView(avcStream.buffer, avcStream.byteOffset, avcStream.byteLength),\r\n      result = [],\r\n      i,\r\n      length;\r\n    for (i = 0; i < avcStream.length; i += length) {\r\n      length = avcView.getUint32(i);\r\n      i += 4;\r\n      switch(avcStream[i] & 0x1F) {\r\n      case 0x01:\r\n        result.push('NDR');\r\n        break;\r\n      case 0x05:\r\n        result.push('IDR');\r\n        break;\r\n      case 0x06:\r\n        result.push('SEI');\r\n        break;\r\n      case 0x07:\r\n        result.push('SPS');\r\n        break;\r\n      case 0x08:\r\n        result.push('PPS');\r\n        break;\r\n      case 0x09:\r\n        result.push('AUD');\r\n        break;\r\n      default:\r\n        result.push(avcStream[i] & 0x1F);\r\n        break;\r\n      }\r\n    }\r\n    return result;\r\n  },\r\n\r\n  // registry of handlers for individual mp4 box types\r\n  parse = {\r\n    // codingname, not a first-class box type. stsd entries share the\r\n    // same format as real boxes so the parsing infrastructure can be\r\n    // shared\r\n    mp4a: function(data) {\r\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\r\n      return {\r\n        channel_count: view.getUint16(16),\r\n        sample_size: view.getUint16(18),\r\n        samplerate: view.getUint16(24),\r\n        esds: mp4toJSON(data.subarray(28, data.byteLength))\r\n      };\r\n    },\r\n    esds: function(data) {\r\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\r\n      let codecs={\r\n        64: 'MPEG4 audio',\r\n        32: 'MPEG4 video',\r\n        33: 'MPEG4 AVC SPS',\r\n        34: 'MPEG4 AVC PPS'\r\n      };\r\n      let stream_types={\r\n        5: 'audio'\r\n      };\r\n      return {\r\n        version: data[0],\r\n        flags: new Uint8Array(data.subarray(1, 4)),\r\n        es_id: view.getUint16(6),\r\n        stream_priority: view.getUint8(8),\r\n        codec: codecs[view.getUint8(11)],\r\n        stream_type: stream_types[view.getUint8(12)>>2],\r\n        upstream: (view.getUint8(12) & 0x02)>>1,\r\n        config: new Uint8Array(data.subarray(26, 26+view.getUint8(25)))\r\n      };\r\n    },\r\n    avc1: function(data) {\r\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\r\n      return {\r\n        dataReferenceIndex: view.getUint16(6),\r\n        width:  view.getUint16(24),\r\n        height: view.getUint16(26),\r\n        horizresolution: view.getUint16(28) + (view.getUint16(30) / 16),\r\n        vertresolution: view.getUint16(32) + (view.getUint16(34) / 16),\r\n        frameCount: view.getUint16(40),\r\n        depth: view.getUint16(74),\r\n        config: mp4toJSON(data.subarray(78, data.byteLength))\r\n      };\r\n    },\r\n    avcC: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        result = {\r\n          configurationVersion: data[0],\r\n          avcProfileIndication: data[1],\r\n          profileCompatibility: data[2],\r\n          avcLevelIndication: data[3],\r\n          lengthSizeMinusOne: data[4] & 0x03,\r\n          sps: [],\r\n          pps: []\r\n        },\r\n        numOfSequenceParameterSets = data[5] & 0x1f,\r\n        numOfPictureParameterSets,\r\n        nalSize,\r\n        offset,\r\n        i;\r\n\r\n      // iterate past any SPSs\r\n      offset = 6;\r\n      for (i = 0; i < numOfSequenceParameterSets; i++) {\r\n        nalSize = view.getUint16(offset);\r\n        offset += 2;\r\n        result.sps.push(new Uint8Array(data.subarray(offset, offset + nalSize)));\r\n        offset += nalSize;\r\n      }\r\n      // iterate past any PPSs\r\n      numOfPictureParameterSets = data[offset];\r\n      offset++;\r\n      for (i = 0; i < numOfPictureParameterSets; i++) {\r\n        nalSize = view.getUint16(offset);\r\n        offset += 2;\r\n        result.pps.push(new Uint8Array(data.subarray(offset, offset + nalSize)));\r\n        offset += nalSize;\r\n      }\r\n      return result;\r\n    },\r\n    btrt: function(data) {\r\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\r\n      return {\r\n        bufferSizeDB: view.getUint32(0),\r\n        maxBitrate: view.getUint32(4),\r\n        avgBitrate: view.getUint32(8)\r\n      };\r\n    },\r\n    ftyp: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        result = {\r\n          majorBrand: parseType(data.subarray(0, 4)),\r\n          minorVersion: view.getUint32(4),\r\n          compatibleBrands: []\r\n        },\r\n        i = 8;\r\n      while (i < data.byteLength) {\r\n        result.compatibleBrands.push(parseType(data.subarray(i, i + 4)));\r\n        i += 4;\r\n      }\r\n      return result;\r\n    },\r\n    dinf: function(data) {\r\n      return {\r\n        boxes: mp4toJSON(data)\r\n      };\r\n    },\r\n    dref: function(data) {\r\n      return {\r\n        version: data[0],\r\n        flags: new Uint8Array(data.subarray(1, 4)),\r\n        dataReferences: mp4toJSON(data.subarray(8))\r\n      };\r\n    },\r\n    hdlr: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        result = {\r\n          version: view.getUint8(0),\r\n          flags: new Uint8Array(data.subarray(1, 4)),\r\n          handlerType: parseType(data.subarray(8, 12)),\r\n          name: ''\r\n        },\r\n        i = 8;\r\n\r\n      // parse out the name field\r\n      for (i = 24; i < data.byteLength; i++) {\r\n        if (data[i] === 0x00) {\r\n          // the name field is null-terminated\r\n          i++;\r\n          break;\r\n        }\r\n        result.name += String.fromCharCode(data[i]);\r\n      }\r\n      // decode UTF-8 to javascript's internal representation\r\n      // see http://ecmanaut.blogspot.com/2006/07/encoding-decoding-utf8-in-javascript.html\r\n      result.name = window.decodeURIComponent(window.escape(result.name));\r\n\r\n      return result;\r\n    },\r\n    mdat: function(data) {\r\n      return {\r\n        byteLength: data.byteLength,\r\n        nals: nalParse(data)\r\n      };\r\n    },\r\n    mdhd: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        i = 4,\r\n        language,\r\n        result = {\r\n          version: view.getUint8(0),\r\n          flags: new Uint8Array(data.subarray(1, 4)),\r\n          language: ''\r\n        };\r\n      if (result.version === 1) {\r\n        i += 4;\r\n        result.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\r\n        i += 8;\r\n        result.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\r\n        i += 4;\r\n        result.timescale = view.getUint32(i);\r\n        i += 8;\r\n        result.duration = view.getUint32(i); // truncating top 4 bytes\r\n      } else {\r\n        result.creationTime = parseMp4Date(view.getUint32(i));\r\n        i += 4;\r\n        result.modificationTime = parseMp4Date(view.getUint32(i));\r\n        i += 4;\r\n        result.timescale = view.getUint32(i);\r\n        i += 4;\r\n        result.duration = view.getUint32(i);\r\n      }\r\n      i += 4;\r\n      // language is stored as an ISO-639-2/T code in an array of three 5-bit fields\r\n      // each field is the packed difference between its ASCII value and 0x60\r\n      language = view.getUint16(i);\r\n      result.language += String.fromCharCode((language >> 10) + 0x60);\r\n      result.language += String.fromCharCode(((language & 0x03c0) >> 5) + 0x60);\r\n      result.language += String.fromCharCode((language & 0x1f) + 0x60);\r\n\r\n      return result;\r\n    },\r\n    mdia: function(data) {\r\n      return {\r\n        boxes: mp4toJSON(data)\r\n      };\r\n    },\r\n    mfhd: function(data) {\r\n      return {\r\n        version: data[0],\r\n        flags: new Uint8Array(data.subarray(1, 4)),\r\n        sequenceNumber: (data[4] << 24) |\r\n          (data[5] << 16) |\r\n          (data[6] << 8) |\r\n          (data[7])\r\n      };\r\n    },\r\n    minf: function(data) {\r\n      return {\r\n        boxes: mp4toJSON(data)\r\n      };\r\n    },\r\n    moof: function(data) {\r\n      return {\r\n        boxes: mp4toJSON(data)\r\n      };\r\n    },\r\n    moov: function(data) {\r\n      return {\r\n        boxes: mp4toJSON(data)\r\n      };\r\n    },\r\n    mvex: function(data) {\r\n      return {\r\n        boxes: mp4toJSON(data)\r\n      };\r\n    },\r\n    mvhd: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        i = 4,\r\n        result = {\r\n          version: view.getUint8(0),\r\n          flags: new Uint8Array(data.subarray(1, 4))\r\n        };\r\n\r\n      if (result.version === 1) {\r\n        i += 4;\r\n        result.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\r\n        i += 8;\r\n        result.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\r\n        i += 4;\r\n        result.timescale = view.getUint32(i);\r\n        i += 8;\r\n        result.duration = view.getUint32(i); // truncating top 4 bytes\r\n      } else {\r\n        result.creationTime = parseMp4Date(view.getUint32(i));\r\n        i += 4;\r\n        result.modificationTime = parseMp4Date(view.getUint32(i));\r\n        i += 4;\r\n        result.timescale = view.getUint32(i);\r\n        i += 4;\r\n        result.duration = view.getUint32(i);\r\n      }\r\n      i += 4;\r\n\r\n      // convert fixed-point, core 16 back to a number\r\n      result.rate = view.getUint16(i) + (view.getUint16(i + 2) / 16);\r\n      i += 4;\r\n      result.volume = view.getUint8(i) + (view.getUint8(i + 1) / 8);\r\n      i += 2;\r\n      i += 2;\r\n      i += 2 * 4;\r\n      result.matrix = new Uint32Array(data.subarray(i, i + (9 * 4)));\r\n      i += 9 * 4;\r\n      i += 6 * 4;\r\n      result.nextTrackId = view.getUint32(i);\r\n      return result;\r\n    },\r\n    pdin: function(data) {\r\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\r\n      return {\r\n        version: view.getUint8(0),\r\n        flags: new Uint8Array(data.subarray(1, 4)),\r\n        rate: view.getUint32(4),\r\n        initialDelay: view.getUint32(8)\r\n      };\r\n    },\r\n    sdtp: function(data) {\r\n      var\r\n        result = {\r\n          version: data[0],\r\n          flags: new Uint8Array(data.subarray(1, 4)),\r\n          samples: []\r\n        }, i;\r\n\r\n      for (i = 4; i < data.byteLength; i++) {\r\n        result.samples.push({\r\n          dependsOn: (data[i] & 0x30) >> 4,\r\n          isDependedOn: (data[i] & 0x0c) >> 2,\r\n          hasRedundancy: data[i] & 0x03\r\n        });\r\n      }\r\n      return result;\r\n    },\r\n    sidx: function(data) {\r\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n          result = {\r\n            version: data[0],\r\n            flags: new Uint8Array(data.subarray(1, 4)),\r\n            references: [],\r\n            referenceId: view.getUint32(4),\r\n            timescale: view.getUint32(8),\r\n            earliestPresentationTime: view.getUint32(12),\r\n            firstOffset: view.getUint32(16)\r\n          },\r\n          referenceCount = view.getUint16(22),\r\n          i;\r\n\r\n      for (i = 24; referenceCount; i += 12, referenceCount-- ) {\r\n        result.references.push({\r\n          referenceType: (data[i] & 0x80) >>> 7,\r\n          referencedSize: view.getUint32(i) & 0x7FFFFFFF,\r\n          subsegmentDuration: view.getUint32(i + 4),\r\n          startsWithSap: !!(data[i + 8] & 0x80),\r\n          sapType: (data[i + 8] & 0x70) >>> 4,\r\n          sapDeltaTime: view.getUint32(i + 8) & 0x0FFFFFFF\r\n        });\r\n      }\r\n\r\n      return result;\r\n    },\r\n    stbl: function(data) {\r\n      return {\r\n        boxes: mp4toJSON(data)\r\n      };\r\n    },\r\n    stco: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        result = {\r\n          version: data[0],\r\n          flags: new Uint8Array(data.subarray(1, 4)),\r\n          chunkOffsets: []\r\n        },\r\n        entryCount = view.getUint32(4),\r\n        i;\r\n      for (i = 8; entryCount; i += 4, entryCount--) {\r\n        result.chunkOffsets.push(view.getUint32(i));\r\n      }\r\n      return result;\r\n    },\r\n    stsc: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        entryCount = view.getUint32(4),\r\n        result = {\r\n          version: data[0],\r\n          flags: new Uint8Array(data.subarray(1, 4)),\r\n          sampleToChunks: []\r\n        },\r\n        i;\r\n      for (i = 8; entryCount; i += 12, entryCount--) {\r\n        result.sampleToChunks.push({\r\n          firstChunk: view.getUint32(i),\r\n          samplesPerChunk: view.getUint32(i + 4),\r\n          sampleDescriptionIndex: view.getUint32(i + 8)\r\n        });\r\n      }\r\n      return result;\r\n    },\r\n    stsd: function(data) {\r\n      return {\r\n        version: data[0],\r\n        flags: new Uint8Array(data.subarray(1, 4)),\r\n        sampleDescriptions: mp4toJSON(data.subarray(8))\r\n      };\r\n    },\r\n    stsz: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        result = {\r\n          version: data[0],\r\n          flags: new Uint8Array(data.subarray(1, 4)),\r\n          sampleSize: view.getUint32(4),\r\n          entries: []\r\n        },\r\n        i;\r\n      for (i = 12; i < data.byteLength; i += 4) {\r\n        result.entries.push(view.getUint32(i));\r\n      }\r\n      return result;\r\n    },\r\n    stts: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        result = {\r\n          version: data[0],\r\n          flags: new Uint8Array(data.subarray(1, 4)),\r\n          timeToSamples: []\r\n        },\r\n        entryCount = view.getUint32(4),\r\n        i;\r\n\r\n      for (i = 8; entryCount; i += 8, entryCount--) {\r\n        result.timeToSamples.push({\r\n          sampleCount: view.getUint32(i),\r\n          sampleDelta: view.getUint32(i + 4)\r\n        });\r\n      }\r\n      return result;\r\n    },\r\n    styp: function(data) {\r\n      return parse.ftyp(data);\r\n    },\r\n    tfdt: function(data) {\r\n      return {\r\n        version: data[0],\r\n        flags: new Uint8Array(data.subarray(1, 4)),\r\n        baseMediaDecodeTime: data[4] << 24 | data[5] << 16 | data[6] << 8 | data[7]\r\n      };\r\n    },\r\n    tfhd: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        result = {\r\n          version: data[0],\r\n          flags: new Uint8Array(data.subarray(1, 4)),\r\n          trackId: view.getUint32(4)\r\n        },\r\n        baseDataOffsetPresent = result.flags[2] & 0x01,\r\n        sampleDescriptionIndexPresent = result.flags[2] & 0x02,\r\n        defaultSampleDurationPresent = result.flags[2] & 0x08,\r\n        defaultSampleSizePresent = result.flags[2] & 0x10,\r\n        defaultSampleFlagsPresent = result.flags[2] & 0x20,\r\n        i;\r\n\r\n      i = 8;\r\n      if (baseDataOffsetPresent) {\r\n        i += 4; // truncate top 4 bytes\r\n        result.baseDataOffset = view.getUint32(12);\r\n        i += 4;\r\n      }\r\n      if (sampleDescriptionIndexPresent) {\r\n        result.sampleDescriptionIndex = view.getUint32(i);\r\n        i += 4;\r\n      }\r\n      if (defaultSampleDurationPresent) {\r\n        result.defaultSampleDuration = view.getUint32(i);\r\n        i += 4;\r\n      }\r\n      if (defaultSampleSizePresent) {\r\n        result.defaultSampleSize = view.getUint32(i);\r\n        i += 4;\r\n      }\r\n      if (defaultSampleFlagsPresent) {\r\n        result.defaultSampleFlags = view.getUint32(i);\r\n      }\r\n      return result;\r\n    },\r\n    tkhd: function(data) {\r\n      var\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        i = 4,\r\n        result = {\r\n          version: view.getUint8(0),\r\n          flags: new Uint8Array(data.subarray(1, 4)),\r\n        };\r\n      if (result.version === 1) {\r\n        i += 4;\r\n        result.creationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\r\n        i += 8;\r\n        result.modificationTime = parseMp4Date(view.getUint32(i)); // truncating top 4 bytes\r\n        i += 4;\r\n        result.trackId = view.getUint32(i);\r\n        i += 4;\r\n        i += 8;\r\n        result.duration = view.getUint32(i); // truncating top 4 bytes\r\n      } else {\r\n        result.creationTime = parseMp4Date(view.getUint32(i));\r\n        i += 4;\r\n        result.modificationTime = parseMp4Date(view.getUint32(i));\r\n        i += 4;\r\n        result.trackId = view.getUint32(i);\r\n        i += 4;\r\n        i += 4;\r\n        result.duration = view.getUint32(i);\r\n      }\r\n      i += 4;\r\n      i += 2 * 4;\r\n      result.layer = view.getUint16(i);\r\n      i += 2;\r\n      result.alternateGroup = view.getUint16(i);\r\n      i += 2;\r\n      // convert fixed-point, core 16 back to a number\r\n      result.volume = view.getUint8(i) + (view.getUint8(i + 1) / 8);\r\n      i += 2;\r\n      i += 2;\r\n      result.matrix = new Uint32Array(data.subarray(i, i + (9 * 4)));\r\n      i += 9 * 4;\r\n      result.width = view.getUint16(i) + (view.getUint16(i + 2) / 16);\r\n      i += 4;\r\n      result.height = view.getUint16(i) + (view.getUint16(i + 2) / 16);\r\n      return result;\r\n    },\r\n    traf: function(data) {\r\n      return {\r\n        boxes: mp4toJSON(data)\r\n      };\r\n    },\r\n    trak: function(data) {\r\n      return {\r\n        boxes: mp4toJSON(data)\r\n      };\r\n    },\r\n    trex: function(data) {\r\n      var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\r\n      return {\r\n        version: data[0],\r\n        flags: new Uint8Array(data.subarray(1, 4)),\r\n        trackId: view.getUint32(4),\r\n        defaultSampleDescriptionIndex: view.getUint32(8),\r\n        defaultSampleDuration: view.getUint32(12),\r\n        defaultSampleSize: view.getUint32(16),\r\n        sampleDependsOn: data[20] & 0x03,\r\n        sampleIsDependedOn: (data[21] & 0xc0) >> 6,\r\n        sampleHasRedundancy: (data[21] & 0x30) >> 4,\r\n        samplePaddingValue: (data[21] & 0x0e) >> 1,\r\n        sampleIsDifferenceSample: !!(data[21] & 0x01),\r\n        sampleDegradationPriority: view.getUint16(22)\r\n      };\r\n    },\r\n    trun: function(data) {\r\n      var\r\n        result = {\r\n          version: data[0],\r\n          flags: new Uint8Array(data.subarray(1, 4)),\r\n          samples: []\r\n        },\r\n        view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n        dataOffsetPresent = result.flags[2] & 0x01,\r\n        firstSampleFlagsPresent = result.flags[2] & 0x04,\r\n        sampleDurationPresent = result.flags[1] & 0x01,\r\n        sampleSizePresent = result.flags[1] & 0x02,\r\n        sampleFlagsPresent = result.flags[1] & 0x04,\r\n        sampleCompositionTimeOffsetPresent = result.flags[1] & 0x08,\r\n        sampleCount = view.getUint32(4),\r\n        offset = 8,\r\n        sample;\r\n\r\n      if (dataOffsetPresent) {\r\n        result.dataOffset = view.getUint32(offset);\r\n        offset += 4;\r\n      }\r\n      if (firstSampleFlagsPresent && sampleCount) {\r\n        sample = {\r\n          flags: parseSampleFlags(data.subarray(offset, offset + 4))\r\n        };\r\n        offset += 4;\r\n        if (sampleDurationPresent) {\r\n          sample.duration = view.getUint32(offset);\r\n          offset += 4;\r\n        }\r\n        if (sampleSizePresent) {\r\n          sample.size = view.getUint32(offset);\r\n          offset += 4;\r\n        }\r\n        if (sampleCompositionTimeOffsetPresent) {\r\n          sample.compositionTimeOffset = view.getUint32(offset);\r\n          offset += 4;\r\n        }\r\n        result.samples.push(sample);\r\n        sampleCount--;\r\n      }\r\n      while (sampleCount--) {\r\n        sample = {};\r\n        if (sampleDurationPresent) {\r\n          sample.duration = view.getUint32(offset);\r\n          offset += 4;\r\n        }\r\n        if (sampleSizePresent) {\r\n          sample.size = view.getUint32(offset);\r\n          offset += 4;\r\n        }\r\n        if (sampleFlagsPresent) {\r\n          sample.flags = parseSampleFlags(data.subarray(offset, offset + 4));\r\n          offset += 4;\r\n        }\r\n        if (sampleCompositionTimeOffsetPresent) {\r\n          sample.compositionTimeOffset = view.getUint32(offset);\r\n          offset += 4;\r\n        }\r\n        result.samples.push(sample);\r\n      }\r\n      return result;\r\n    },\r\n    'url ': function(data) {\r\n      return {\r\n        version: data[0],\r\n        flags: new Uint8Array(data.subarray(1, 4))\r\n      };\r\n    },\r\n    vmhd: function(data) {\r\n      //var view = new DataView(data.buffer, data.byteOffset, data.byteLength);\r\n      return {\r\n        version: data[0],\r\n        flags: new Uint8Array(data.subarray(1, 4)),\r\n        //graphicsmode: view.getUint16(4),\r\n        //opcolor: new Uint16Array([view.getUint16(6),\r\n        //                          view.getUint16(8),\r\n        //                          view.getUint16(10)])\r\n      };\r\n    }\r\n  };\r\n\r\n/**\r\n * Return a javascript array of box objects parsed from an ISO core\r\n * media file.\r\n * @param data {Uint8Array} the binary data of the media to be inspected\r\n * @return {array} a javascript array of potentially nested box objects\r\n */\r\nvar mp4toJSON = function(data) {\r\n  var\r\n    i = 0,\r\n    result = [],\r\n    view = new DataView(data.buffer, data.byteOffset, data.byteLength),\r\n    size,\r\n    type,\r\n    end,\r\n    box;\r\n\r\n  while (i < data.byteLength) {\r\n    // parse box data\r\n    size = view.getUint32(i),\r\n    type =  parseType(data.subarray(i + 4, i + 8));\r\n    end = size > 1 ? i + size : data.byteLength;\r\n\r\n    // parse type-specific data\r\n    box = (parse[type] || function(data) {\r\n      return {\r\n        data: data\r\n      };\r\n    })(data.subarray(i + 8, end));\r\n    box.size = size;\r\n    box.type = type;\r\n\r\n    // store this box and move to the next\r\n    result.push(box);\r\n    i = end;\r\n  }\r\n  return result;\r\n};\r\n\r\n\r\nexport let MP4Inspect = {\r\n  mp4toJSON: mp4toJSON\r\n};\r\n\r\nexport default MP4Inspect;\r\n","import {EventEmitter} from 'bp_event';\r\nimport {MP4Inspect} from '../iso-bmff/mp4-inspector';\r\nimport {getTagged} from 'bp_logger';\r\n\r\nconst LOG_TAG = \"mse\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\nexport class Buffer {\r\n    constructor(parent, codec) {\r\n        this.mediaSource = parent.mediaSource;\r\n        this.players = parent.players;\r\n        this.cleaning = false;\r\n        this.parent = parent;\r\n        this.queue = [];\r\n        this.cleanResolvers = [];\r\n        this.codec = codec;\r\n        this.cleanRanges = [];\r\n\r\n        Log.debug(`Use codec: ${codec}`);\r\n\r\n        this.sourceBuffer = this.mediaSource.addSourceBuffer(codec);\r\n\r\n        this.sourceBuffer.addEventListener('updatestart', (e)=> {\r\n            // this.updating = true;\r\n            // Log.debug('update start');\r\n            if (this.cleaning) {\r\n                Log.debug(`${this.codec} cleaning start`);\r\n            }\r\n        });\r\n\r\n        this.sourceBuffer.addEventListener('update', (e)=> {\r\n            // this.updating = true;\r\n            if (this.cleaning) {\r\n                Log.debug(`${this.codec} cleaning update`);\r\n            }\r\n        });\r\n\r\n        this.sourceBuffer.addEventListener('updateend', (e)=> {\r\n            // Log.debug('update end');\r\n            // this.updating = false;\r\n            if (this.cleaning) {\r\n                Log.debug(`${this.codec} cleaning end`);\r\n\r\n                try {\r\n                    if (this.sourceBuffer.buffered.length && this.players[0].currentTime < this.sourceBuffer.buffered.start(0)) {\r\n                        this.players[0].currentTime = this.sourceBuffer.buffered.start(0);\r\n                    }\r\n                } catch (e) {\r\n                    // TODO: do something?\r\n                }\r\n                while (this.cleanResolvers.length) {\r\n                    let resolver = this.cleanResolvers.shift();\r\n                    resolver();\r\n                }\r\n                this.cleaning = false;\r\n\r\n                if (this.cleanRanges.length) {\r\n                    this.doCleanup();\r\n                    return;\r\n                }\r\n            } else {\r\n                // Log.debug(`buffered: ${this.sourceBuffer.buffered.end(0)}, current ${this.players[0].currentTime}`);\r\n            }\r\n            this.feedNext();\r\n        });\r\n\r\n        this.sourceBuffer.addEventListener('error', (e)=> {\r\n            Log.debug(`Source buffer error: ${this.mediaSource.readyState}`);\r\n            if (this.mediaSource.sourceBuffers.length) {\r\n                this.mediaSource.removeSourceBuffer(this.sourceBuffer);\r\n            }\r\n            this.parent.eventSource.dispatchEvent('error');\r\n        });\r\n\r\n        this.sourceBuffer.addEventListener('abort', (e)=> {\r\n            Log.debug(`Source buffer aborted: ${this.mediaSource.readyState}`);\r\n            if (this.mediaSource.sourceBuffers.length) {\r\n                this.mediaSource.removeSourceBuffer(this.sourceBuffer);\r\n            }\r\n            this.parent.eventSource.dispatchEvent('error');\r\n        });\r\n\r\n        if (!this.sourceBuffer.updating) {\r\n            this.feedNext();\r\n        }\r\n        // TODO: cleanup every hour for live streams\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n        this.queue = [];\r\n        this.mediaSource.removeSourceBuffer(this.sourceBuffer);\r\n    }\r\n\r\n    clear() {\r\n        this.queue = [];\r\n        let promises = [];\r\n        for (let i=0; i< this.sourceBuffer.buffered.length; ++i) {\r\n            // TODO: await remove\r\n            this.cleaning = true;\r\n            promises.push(new Promise((resolve, reject)=>{\r\n                this.cleanResolvers.push(resolve);\r\n                this.sourceBuffer.remove(this.sourceBuffer.buffered.start(i), this.sourceBuffer.buffered.end(i));\r\n                resolve();\r\n            }));\r\n        }\r\n        return Promise.all(promises);\r\n    }\r\n\r\n    setLive(is_live) {\r\n        this.is_live = is_live;\r\n    }\r\n\r\n    feedNext() {\r\n        // Log.debug(\"feed next \", this.sourceBuffer.updating);\r\n        if (!this.sourceBuffer.updating && !this.cleaning && this.queue.length) {\r\n            this.doAppend(this.queue.shift());\r\n            // TODO: if is live and current position > 1hr => clean all and restart\r\n        }\r\n    }\r\n\r\n    doCleanup() {\r\n        if (!this.cleanRanges.length) {\r\n            this.cleaning = false;\r\n            this.feedNext();\r\n            return;\r\n        }\r\n        let range = this.cleanRanges.shift();\r\n        Log.debug(`${this.codec} remove range [${range[0]} - ${range[1]}). \r\n                    \\nUpdating: ${this.sourceBuffer.updating}\r\n                    `);\r\n        this.cleaning = true;\r\n        this.sourceBuffer.remove(range[0], range[1]);\r\n    }\r\n\r\n    initCleanup() {\r\n        if (this.sourceBuffer.buffered.length && !this.sourceBuffer.updating && !this.cleaning) {\r\n            Log.debug(`${this.codec} cleanup`);\r\n            let removeBound = this.sourceBuffer.buffered.end(this.sourceBuffer.buffered.length-1) - 2;\r\n\r\n            for (let i=0; i< this.sourceBuffer.buffered.length; ++i) {\r\n                let removeStart = this.sourceBuffer.buffered.start(i);\r\n                let removeEnd = this.sourceBuffer.buffered.end(i);\r\n                if ((this.players[0].currentTime <= removeStart) || (removeBound <= removeStart)) continue;\r\n\r\n                if ((removeBound <= removeEnd) && (removeBound >= removeStart)) {\r\n                    Log.debug(`Clear [${removeStart}, ${removeBound}), leave [${removeBound}, ${removeEnd}]`);\r\n                    removeEnd = removeBound;\r\n                    if (removeEnd!=removeStart) {\r\n                        this.cleanRanges.push([removeStart, removeEnd]);\r\n                    }\r\n                    continue; // Do not cleanup buffered range after current position\r\n                }\r\n                this.cleanRanges.push([removeStart, removeEnd]);\r\n            }\r\n\r\n            this.doCleanup();\r\n\r\n            // let bufferStart = this.sourceBuffer.buffered.start(0);\r\n            // let removeEnd = this.sourceBuffer.buffered.start(0) + (this.sourceBuffer.buffered.end(0) - this.sourceBuffer.buffered.start(0))/2;\r\n            // if (this.players[0].currentTime < removeEnd) {\r\n            //     this.players[0].currentTime = removeEnd;\r\n            // }\r\n            // let removeEnd = Math.max(this.players[0].currentTime - 3, this.sourceBuffer.buffered.end(0) - 3);\r\n            //\r\n            // if (removeEnd < bufferStart) {\r\n            //     removeEnd = this.sourceBuffer.buffered.start(0) + (this.sourceBuffer.buffered.end(0) - this.sourceBuffer.buffered.start(0))/2;\r\n            //     if (this.players[0].currentTime < removeEnd) {\r\n            //         this.players[0].currentTime = removeEnd;\r\n            //     }\r\n            // }\r\n\r\n            // if (removeEnd > bufferStart && (removeEnd - bufferStart > 0.5 )) {\r\n            //     // try {\r\n            //         Log.debug(`${this.codec} remove range [${bufferStart} - ${removeEnd}).\r\n            //         \\nBuffered end: ${this.sourceBuffer.buffered.end(0)}\r\n            //         \\nUpdating: ${this.sourceBuffer.updating}\r\n            //         `);\r\n            //         this.cleaning = true;\r\n            //         this.sourceBuffer.remove(bufferStart, removeEnd);\r\n            //     // } catch (e) {\r\n            //     //     // TODO: implement\r\n            //     //     Log.error(e);\r\n            //     // }\r\n            // } else {\r\n            //     this.feedNext();\r\n            // }\r\n        } else {\r\n            this.feedNext();\r\n        }\r\n    }\r\n\r\n    doAppend(data) {\r\n        // console.log(MP4Inspect.mp4toJSON(data));\r\n        let err = this.players[0].error;\r\n        if (err) {\r\n            Log.error(`Error occured: ${MSE.ErrorNotes[err.code]}`);\r\n            try {\r\n                this.players.forEach((video)=>{video.stop();});\r\n                this.mediaSource.endOfStream();\r\n            } catch (e){\r\n\r\n            }\r\n            this.parent.eventSource.dispatchEvent('error');\r\n        } else {\r\n            try {\r\n                this.sourceBuffer.appendBuffer(data);\r\n            } catch (e) {\r\n                if (e.name === 'QuotaExceededError') {\r\n                    Log.debug(`${this.codec} quota fail`);\r\n                    this.queue.unshift(data);\r\n                    this.initCleanup();\r\n                    return;\r\n                }\r\n\r\n                // reconnect on fail\r\n                Log.error(`Error occured while appending buffer. ${e.name}: ${e.message}`);\r\n                this.parent.eventSource.dispatchEvent('error');\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    feed(data) {\r\n        this.queue = this.queue.concat(data);\r\n        // Log.debug(this.sourceBuffer.updating, this.updating, this.queue.length);\r\n        if (this.sourceBuffer && !this.sourceBuffer.updating && !this.cleaning) {\r\n            // Log.debug('enq feed');\r\n            this.feedNext();\r\n        }\r\n    }\r\n}\r\n\r\nexport class MSE {\r\n    // static CODEC_AVC_BASELINE = \"avc1.42E01E\";\r\n    // static CODEC_AVC_MAIN = \"avc1.4D401E\";\r\n    // static CODEC_AVC_HIGH = \"avc1.64001E\";\r\n    // static CODEC_VP8 = \"vp8\";\r\n    // static CODEC_AAC = \"mp4a.40.2\";\r\n    // static CODEC_VORBIS = \"vorbis\";\r\n    // static CODEC_THEORA = \"theora\";\r\n\r\n    static get ErrorNotes() {return  {\r\n        [MediaError.MEDIA_ERR_ABORTED]: 'fetching process aborted by user',\r\n        [MediaError.MEDIA_ERR_NETWORK]: 'error occurred when downloading',\r\n        [MediaError.MEDIA_ERR_DECODE]: 'error occurred when decoding',\r\n        [MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED]: 'audio/video not supported'\r\n    }};\r\n\r\n    static isSupported(codecs) {\r\n        return (window.MediaSource && window.MediaSource.isTypeSupported(`video/mp4; codecs=\"${codecs.join(',')}\"`));\r\n    }\r\n\r\n    constructor (players) {\r\n        this.players = players;\r\n        this.eventSource = new EventEmitter();\r\n        this.mediaSource = new MediaSource();\r\n        this.reset();\r\n    }\r\n\r\n    destroy() {\r\n        this.clear();\r\n        this.eventSource.destroy();\r\n    }\r\n\r\n    play() {\r\n        this.players.forEach((video)=>{video.play();});\r\n    }\r\n\r\n    setLive(is_live) {\r\n        for (let idx in this.buffers) {\r\n            this.buffers[idx].setLive(is_live);\r\n        }\r\n        this.is_live = is_live;\r\n    }\r\n\r\n    resetBuffers() {\r\n        this.players.forEach((video)=>{\r\n            video.pause();\r\n            video.currentTime=0;\r\n        });\r\n\r\n        let promises = [];\r\n        for (let buffer of this.buffers.values()) {\r\n            promises.push(buffer.clear());\r\n        }\r\n        return Promise.all(promises).then(()=>{\r\n            this.mediaSource.endOfStream();\r\n            this.mediaSource.duration = 0;\r\n            this.mediaSource.clearLiveSeekableRange();\r\n            this.play();\r\n        });\r\n    }\r\n\r\n    clear() {\r\n        for (let track in this.buffers) {\r\n            this.buffers[track].destroy();\r\n            delete this.buffers[track];\r\n        }\r\n        if (this.mediaSource.readyState == 'open') {\r\n            this.mediaSource.duration = 0;\r\n            this.mediaSource.endOfStream();\r\n        }\r\n        this.players.forEach((video)=>{video.src = URL.createObjectURL(this.mediaSource)});\r\n\r\n        return this.setupEvents();\r\n    }\r\n\r\n    setupEvents() {\r\n        if (this._sourceOpen) this.mediaSource.removeEventListener('sourceopen', this._sourceOpen);\r\n        if (this._sourceEnded) this.mediaSource.removeEventListener('sourceended', this._sourceEnded);\r\n        if (this._sourceClose) this.mediaSource.removeEventListener('sourceclose', this._sourceClose);\r\n        this.resolved = false;\r\n        this.mediaReady = new Promise((resolve, reject)=> {\r\n            this._sourceOpen = ()=> {\r\n                Log.debug(`Media source opened: ${this.mediaSource.readyState}`);\r\n                if (!this.resolved) {\r\n                    this.resolved = true;\r\n                    resolve();\r\n                }\r\n            };\r\n            this._sourceEnded = ()=>{\r\n                Log.debug(`Media source ended: ${this.mediaSource.readyState}`);\r\n            };\r\n            this._sourceClose = ()=>{\r\n                Log.debug(`Media source closed: ${this.mediaSource.readyState}`);\r\n                if (this.resolved) {\r\n                    this.eventSource.dispatchEvent('sourceclose');\r\n                }\r\n            };\r\n            this.mediaSource.addEventListener('sourceopen', this._sourceOpen);\r\n            this.mediaSource.addEventListener('sourceended', this._sourceEnded);\r\n            this.mediaSource.addEventListener('sourceclose', this._sourceClose);\r\n        });\r\n        return this.mediaReady;\r\n    }\r\n\r\n    reset() {\r\n        this.updating = false;\r\n        this.resolved = false;\r\n        this.buffers = {};\r\n        // this.players.forEach((video)=>{video.src = URL.createObjectURL(this.mediaSource)});\r\n        // TODO: remove event listeners for existing media source\r\n        // this.setupEvents();\r\n        // this.clear();\r\n    }\r\n\r\n    setCodec(track, mimeCodec) {\r\n        return this.mediaReady.then(()=>{\r\n            this.buffers[track] = new Buffer(this, mimeCodec);\r\n            this.buffers[track].setLive(this.is_live);\r\n        });\r\n    }\r\n\r\n    feed(track, data) {\r\n        if (this.buffers[track]) {\r\n            this.buffers[track].feed(data);\r\n        }\r\n    }\r\n}","import {getTagged} from 'bp_logger';\r\nconst Log = getTagged('remuxer:base');\r\nlet track_id = 1;\r\nexport class BaseRemuxer {\r\n\r\n    static get MP4_TIMESCALE() { return 90000;}\r\n\r\n    // TODO: move to ts parser\r\n    // static PTSNormalize(value, reference) {\r\n    //\r\n    //     let offset;\r\n    //     if (reference === undefined) {\r\n    //         return value;\r\n    //     }\r\n    //     if (reference < value) {\r\n    //         // - 2^33\r\n    //         offset = -8589934592;\r\n    //     } else {\r\n    //         // + 2^33\r\n    //         offset = 8589934592;\r\n    //     }\r\n    //     /* PTS is 33bit (from 0 to 2^33 -1)\r\n    //      if diff between value and reference is bigger than half of the amplitude (2^32) then it means that\r\n    //      PTS looping occured. fill the gap */\r\n    //     while (Math.abs(value - reference) > 4294967296) {\r\n    //         value += offset;\r\n    //     }\r\n    //     return value;\r\n    // }\r\n\r\n    static getTrackID() {\r\n        return track_id++;\r\n    }\r\n\r\n    constructor(timescale, scaleFactor, params) {\r\n        this.timeOffset = 0;\r\n        this.timescale = timescale;\r\n        this.scaleFactor = scaleFactor;\r\n        this.readyToDecode = false;\r\n        this.samples = [];\r\n        this.seq = 1;\r\n        this.tsAlign = 1;\r\n    }\r\n\r\n    shifted(timestamp) {\r\n        return timestamp - this.timeOffset;\r\n    }\r\n\r\n    scaled(timestamp) {\r\n        return timestamp / this.scaleFactor;\r\n    }\r\n\r\n    unscaled(timestamp) {\r\n        return timestamp * this.scaleFactor;\r\n    }\r\n\r\n    remux(unit) {\r\n        if (unit && this.timeOffset >= 0) {\r\n            this.samples.push({\r\n                unit: unit,\r\n                pts: this.shifted(unit.pts),\r\n                dts: this.shifted(unit.dts)\r\n            });\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    static toMS(timestamp) {\r\n        return timestamp/90;\r\n    }\r\n    \r\n    setConfig(config) {\r\n        \r\n    }\r\n\r\n    insertDscontinuity() {\r\n        this.samples.push(null);\r\n    }\r\n\r\n    init(initPTS, initDTS, shouldInitialize=true) {\r\n        this.initPTS = Math.min(initPTS, this.samples[0].dts - this.unscaled(this.timeOffset));\r\n        this.initDTS = Math.min(initDTS, this.samples[0].dts - this.unscaled(this.timeOffset));\r\n        Log.debug(`Initial pts=${this.initPTS} dts=${this.initDTS}`);\r\n        this.initialized = shouldInitialize;\r\n    }\r\n\r\n    flush() {\r\n        this.seq++;\r\n        this.mp4track.len = 0;\r\n        this.mp4track.samples = [];\r\n    }\r\n\r\n    getPayloadBase(sampleFunction, setupSample) {\r\n        if (!this.readyToDecode || !this.initialized || !this.samples.length) return null;\r\n        this.samples.sort(function(a, b) {\r\n            return (a.dts-b.dts);\r\n        });\r\n        return true;\r\n\r\n        let payload = new Uint8Array(this.mp4track.len);\r\n        let offset = 0;\r\n        let samples=this.mp4track.samples;\r\n        let mp4Sample, lastDTS, pts, dts;\r\n\r\n        while (this.samples.length) {\r\n            let sample = this.samples.shift();\r\n            if (sample === null) {\r\n                // discontinuity\r\n                this.nextDts = undefined;\r\n                break;\r\n            }\r\n\r\n            let unit = sample.unit;\r\n\r\n            pts = Math.round((sample.pts - this.initDTS)/this.tsAlign)*this.tsAlign;\r\n            dts = Math.round((sample.dts - this.initDTS)/this.tsAlign)*this.tsAlign;\r\n            // ensure DTS is not bigger than PTS\r\n            dts = Math.min(pts, dts);\r\n\r\n            // sampleFunction(pts, dts);   // TODO:\r\n\r\n            // mp4Sample = setupSample(unit, pts, dts);    // TODO:\r\n\r\n            payload.set(unit.getData(), offset);\r\n            offset += unit.getSize();\r\n\r\n            samples.push(mp4Sample);\r\n            lastDTS = dts;\r\n        }\r\n        if (!samples.length) return null;\r\n\r\n        // samplesPostFunction(samples); // TODO:\r\n\r\n        return new Uint8Array(payload.buffer, 0, this.mp4track.len);\r\n    }\r\n}","import {AACAsm} from '../elementary/AACAsm';\r\nimport {AACFrame} from '../elementary/AACFrame';\r\nimport {MSE} from '../presentation/mse';\r\nimport {BaseRemuxer} from './base';\r\nimport {BitArray, hexToByteArray, bitSlice} from '../util/binary';\r\nimport {getTagged} from 'bp_logger';\r\n\r\nconst Log = getTagged(\"remuxer:aac\");\r\n// TODO: asm.js\r\nexport class AACRemuxer extends BaseRemuxer {\r\n\r\n    constructor(timescale, scaleFactor = 1, params={}) {\r\n        super(timescale, scaleFactor);\r\n\r\n        this.codecstring=MSE.CODEC_AAC;\r\n        this.units = [];\r\n        this.initDTS = undefined;\r\n        this.nextAacPts = undefined;\r\n        this.lastPts = 0;\r\n        this.firstDTS = 0;\r\n        this.firstPTS = 0;\r\n        this.duration = params.duration || 1;\r\n        this.initialized = false;\r\n\r\n        this.mp4track={\r\n            id:BaseRemuxer.getTrackID(),\r\n            type: 'audio',\r\n            fragmented:true,\r\n            channelCount:0,\r\n            audiosamplerate: this.timescale,\r\n            duration: 0,\r\n            timescale: this.timescale,\r\n            volume: 1,\r\n            samples: [],\r\n            config: '',\r\n            len: 0\r\n        };\r\n        if (params.config) {\r\n            this.setConfig(params.config);\r\n        }\r\n    }\r\n\r\n    setConfig(config) {\r\n        this.mp4track.channelCount = config.channels;\r\n        this.mp4track.audiosamplerate = config.samplerate;\r\n        if (!this.mp4track.duration) {\r\n            this.mp4track.duration = (this.duration?this.duration:1)*config.samplerate;\r\n        }\r\n        this.mp4track.timescale = config.samplerate;\r\n        this.mp4track.config = config.config;\r\n        this.mp4track.codec = config.codec;\r\n        this.timescale = config.samplerate;\r\n        this.scaleFactor = BaseRemuxer.MP4_TIMESCALE / config.samplerate;\r\n        this.expectedSampleDuration = 1024 * this.scaleFactor;\r\n        this.readyToDecode = true;\r\n    }\r\n\r\n    remux(aac) {\r\n        if (super.remux.call(this, aac)) {\r\n            this.mp4track.len += aac.getSize();\r\n        }\r\n    }\r\n    \r\n    getPayload() {\r\n        if (!this.readyToDecode || !this.samples.length) return null;\r\n        this.samples.sort(function(a, b) {\r\n            return (a.dts-b.dts);\r\n        });\r\n\r\n        let payload = new Uint8Array(this.mp4track.len);\r\n        let offset = 0;\r\n        let samples=this.mp4track.samples;\r\n        let mp4Sample, lastDTS, pts, dts;\r\n\r\n        while (this.samples.length) {\r\n            let sample = this.samples.shift();\r\n            if (sample === null) {\r\n                // discontinuity\r\n                this.nextDts = undefined;\r\n                break;\r\n            }\r\n            let unit = sample.unit;\r\n            pts = sample.pts - this.initDTS;\r\n            dts = sample.dts - this.initDTS;\r\n\r\n            if (lastDTS === undefined) {\r\n                if (this.nextDts) {\r\n                    let delta = Math.round(this.scaled(pts - this.nextAacPts));\r\n                    // if fragment are contiguous, or delta less than 600ms, ensure there is no overlap/hole between fragments\r\n                    if (/*contiguous || */Math.abs(delta) < 600) {\r\n                        // log delta\r\n                        if (delta) {\r\n                            if (delta > 0) {\r\n                                Log.log(`${delta} ms hole between AAC samples detected,filling it`);\r\n                                // if we have frame overlap, overlapping for more than half a frame duraion\r\n                            } else if (delta < -12) {\r\n                                // drop overlapping audio frames... browser will deal with it\r\n                                Log.log(`${(-delta)} ms overlapping between AAC samples detected, drop frame`);\r\n                                this.mp4track.len -= unit.getSize();\r\n                                continue;\r\n                            }\r\n                            // set DTS to next DTS\r\n                            pts = dts = this.nextAacPts;\r\n                        }\r\n                    }\r\n                }\r\n                // remember first PTS of our aacSamples, ensure value is positive\r\n                this.firstDTS = Math.max(0, dts);\r\n            }\r\n\r\n            mp4Sample = {\r\n                size: unit.getSize(),\r\n                cts: 0,\r\n                duration:1024,\r\n                flags: {\r\n                    isLeading: 0,\r\n                    isDependedOn: 0,\r\n                    hasRedundancy: 0,\r\n                    degradPrio: 0,\r\n                    dependsOn: 1\r\n                }\r\n            };\r\n\r\n            payload.set(unit.getData(), offset);\r\n            offset += unit.getSize();\r\n            samples.push(mp4Sample);\r\n            lastDTS = dts;\r\n        }\r\n        if (!samples.length) return null;\r\n        this.nextDts =pts+this.expectedSampleDuration;\r\n        return new Uint8Array(payload.buffer, 0, this.mp4track.len);\r\n    }\r\n}\r\n//test.bundle.js:42 [remuxer:h264] skip frame from the past at DTS=18397972271140676 with expected DTS=18397998040950484","import {appendByteArray} from '../util/binary';\r\n\r\nexport class NALU {\r\n\r\n    static get NDR() {return 1;}\r\n    static get IDR() {return 5;}\r\n    static get SEI() {return 6;}\r\n    static get SPS() {return 7;}\r\n    static get PPS() {return 8;}\r\n\r\n    static get TYPES() {return {\r\n        [NALU.IDR]: 'IDR',\r\n        [NALU.SEI]: 'SEI',\r\n        [NALU.SPS]: 'SPS',\r\n        [NALU.PPS]: 'PPS',\r\n        [NALU.NDR]: 'NDR'\r\n    }};\r\n\r\n    static type(nalu) {\r\n        if (nalu.ntype in NALU.TYPES) {\r\n            return NALU.TYPES[nalu.ntype];\r\n        } else {\r\n            return 'UNKNOWN';\r\n        }\r\n    }\r\n\r\n    constructor(ntype, nri, data, dts, pts) {\r\n\r\n        this.data = data;\r\n        this.ntype = ntype;\r\n        this.nri = nri;\r\n        this.dts = dts;\r\n        this.pts = pts ? pts : this.dts;\r\n\r\n    }\r\n\r\n    appendData(idata) {\r\n        this.data = appendByteArray(this.data, idata);\r\n    }\r\n\r\n    type() {\r\n        return this.ntype;\r\n    }\r\n\r\n    isKeyframe() {\r\n        return this.ntype == NALU.IDR;\r\n    }\r\n\r\n    getSize() {\r\n        return 4 + 1 + this.data.byteLength;\r\n    }\r\n\r\n    getData() {\r\n        let header = new Uint8Array(5 + this.data.byteLength);\r\n        let view = new DataView(header.buffer);\r\n        view.setUint32(0, this.data.byteLength + 1);\r\n        view.setUint8(4, (0x0 & 0x80) | (this.nri & 0x60) | (this.ntype & 0x1F));\r\n        header.set(this.data, 5);\r\n        return header;\r\n    }\r\n}\r\n","import {NALU} from './NALU';\r\nimport {Log} from 'bp_logger';\r\n// TODO: asm.js\r\nexport class NALUAsm {\r\n    static get NALTYPE_FU_A() {return 28;}\r\n    static get NALTYPE_FU_B() {return 29;}\r\n\r\n    constructor() {\r\n        this.nalu = null;\r\n    }\r\n\r\n    onNALUFragment(rawData, dts, pts) {\r\n\r\n        var data = new DataView(rawData.buffer, rawData.byteOffset, rawData.byteLength);\r\n\r\n        var nalhdr = data.getUint8(0);\r\n\r\n        var nri = nalhdr & 0x60;\r\n        var naltype = nalhdr & 0x1F;\r\n        var nal_start_idx = 1;\r\n\r\n        if (27 >= naltype && 0 < naltype) {\r\n            /* This RTP package is a single NALU, dispatch and forget, 0 is undefined */\r\n            return new NALU(naltype, nri, rawData.subarray(nal_start_idx), dts, pts);\r\n            //return;\r\n        }\r\n\r\n        if (NALUAsm.NALTYPE_FU_A !== naltype && NALUAsm.NALTYPE_FU_B !== naltype) {\r\n            /* 30 - 31 is undefined, ignore those (RFC3984). */\r\n            Log.log('Undefined NAL unit, type: ' + naltype);\r\n            return null;\r\n        }\r\n        nal_start_idx++;\r\n\r\n        var nalfrag = data.getUint8(1);\r\n        var nfstart = (nalfrag & 0x80) >>> 7;\r\n        var nfend = (nalfrag & 0x40) >>> 6;\r\n        var nftype = nalfrag & 0x1F;\r\n\r\n        var nfdon = 0;\r\n        if (NALUAsm.NALTYPE_FU_B === naltype) {\r\n            nfdon = data.getUint16(2);\r\n            nal_start_idx+=2;\r\n        }\r\n\r\n        if (null === this.nalu || nfstart) {\r\n            if (!nfstart) {\r\n                console.log('broken chunk (continuation of lost frame)');\r\n                return null;\r\n            }  // Ignore broken chunks\r\n\r\n            /* Create a new NAL unit from multiple fragmented NAL units */\r\n            this.nalu = new NALU(nftype, nri, rawData.subarray(nal_start_idx), dts, pts);\r\n        } else {\r\n            if (this.nalu.dts != dts) {\r\n                // debugger;\r\n                // Frames lost\r\n                console.log('broken chunk (continuation of frame with other timestamp)');\r\n                this.nalu = null;\r\n                return null;\r\n            }\r\n            /* We've already created the NAL unit, append current data */\r\n            this.nalu.appendData(rawData.subarray(nal_start_idx));\r\n        }\r\n\r\n        if (1 === nfend) {\r\n            let ret = this.nalu;\r\n            this.nalu = null;\r\n            return ret;\r\n        }\r\n    }\r\n}\r\n","/**\r\n * Parser for exponential Golomb codes, a variable-bitwidth number encoding scheme used by h264.\r\n*/\r\n// TODO: asm.js\r\nimport {Log as logger} from 'bp_logger';\r\n\r\nexport class ExpGolomb {\r\n\r\n  constructor(data) {\r\n    this.data = data;\r\n    // the number of bytes left to examine in this.data\r\n    this.bytesAvailable = this.data.byteLength;\r\n    // the current word being examined\r\n    this.word = 0; // :uint\r\n    // the number of bits left to examine in the current word\r\n    this.bitsAvailable = 0; // :uint\r\n  }\r\n\r\n  // ():void\r\n  loadWord() {\r\n    var\r\n      position = this.data.byteLength - this.bytesAvailable,\r\n      workingBytes = new Uint8Array(4),\r\n      availableBytes = Math.min(4, this.bytesAvailable);\r\n    if (availableBytes === 0) {\r\n      throw new Error('no bytes available');\r\n    }\r\n    workingBytes.set(this.data.subarray(position, position + availableBytes));\r\n    this.word = new DataView(workingBytes.buffer, workingBytes.byteOffset, workingBytes.byteLength).getUint32(0);\r\n    // track the amount of this.data that has been processed\r\n    this.bitsAvailable = availableBytes * 8;\r\n    this.bytesAvailable -= availableBytes;\r\n  }\r\n\r\n  // (count:int):void\r\n  skipBits(count) {\r\n    var skipBytes; // :int\r\n    if (this.bitsAvailable > count) {\r\n      this.word <<= count;\r\n      this.bitsAvailable -= count;\r\n    } else {\r\n      count -= this.bitsAvailable;\r\n      skipBytes = count >> 3;\r\n      count -= (skipBytes >> 3);\r\n      this.bytesAvailable -= skipBytes;\r\n      this.loadWord();\r\n      this.word <<= count;\r\n      this.bitsAvailable -= count;\r\n    }\r\n  }\r\n\r\n  // (size:int):uint\r\n  readBits(size) {\r\n    var\r\n      bits = Math.min(this.bitsAvailable, size), // :uint\r\n      valu = this.word >>> (32 - bits); // :uint\r\n    if (size > 32) {\r\n      logger.error('Cannot read more than 32 bits at a time');\r\n    }\r\n    this.bitsAvailable -= bits;\r\n    if (this.bitsAvailable > 0) {\r\n      this.word <<= bits;\r\n    } else if (this.bytesAvailable > 0) {\r\n      this.loadWord();\r\n    }\r\n    bits = size - bits;\r\n    if (bits > 0) {\r\n      return valu << bits | this.readBits(bits);\r\n    } else {\r\n      return valu;\r\n    }\r\n  }\r\n\r\n  // ():uint\r\n  skipLZ() {\r\n    var leadingZeroCount; // :uint\r\n    for (leadingZeroCount = 0; leadingZeroCount < this.bitsAvailable; ++leadingZeroCount) {\r\n      if (0 !== (this.word & (0x80000000 >>> leadingZeroCount))) {\r\n        // the first bit of working word is 1\r\n        this.word <<= leadingZeroCount;\r\n        this.bitsAvailable -= leadingZeroCount;\r\n        return leadingZeroCount;\r\n      }\r\n    }\r\n    // we exhausted word and still have not found a 1\r\n    this.loadWord();\r\n    return leadingZeroCount + this.skipLZ();\r\n  }\r\n\r\n  // ():void\r\n  skipUEG() {\r\n    this.skipBits(1 + this.skipLZ());\r\n  }\r\n\r\n  // ():void\r\n  skipEG() {\r\n    this.skipBits(1 + this.skipLZ());\r\n  }\r\n\r\n  // ():uint\r\n  readUEG() {\r\n    var clz = this.skipLZ(); // :uint\r\n    return this.readBits(clz + 1) - 1;\r\n  }\r\n\r\n  // ():int\r\n  readEG() {\r\n    var valu = this.readUEG(); // :int\r\n    if (0x01 & valu) {\r\n      // the number is odd if the low order bit is set\r\n      return (1 + valu) >>> 1; // add 1 to make it even, and divide by 2\r\n    } else {\r\n      return -1 * (valu >>> 1); // divide by two then make it negative\r\n    }\r\n  }\r\n\r\n  // Some convenience functions\r\n  // :Boolean\r\n  readBoolean() {\r\n    return 1 === this.readBits(1);\r\n  }\r\n\r\n  // ():int\r\n  readUByte() {\r\n    return this.readBits(8);\r\n  }\r\n\r\n  // ():int\r\n  readUShort() {\r\n    return this.readBits(16);\r\n  }\r\n    // ():int\r\n  readUInt() {\r\n    return this.readBits(32);\r\n  }  \r\n}\r\n","import {ExpGolomb} from '../util/exp-golomb';\r\nimport {NALU} from '../elementary/NALU';\r\n\r\nexport class H264Parser {\r\n\r\n    constructor(remuxer) {\r\n        this.remuxer = remuxer;\r\n        this.track = remuxer.mp4track;\r\n    }\r\n\r\n    msToScaled(timestamp) {\r\n        return (timestamp - this.remuxer.timeOffset) * this.remuxer.scaleFactor;\r\n    }\r\n\r\n    parseSPS(sps) {\r\n        var config = H264Parser.readSPS(new Uint8Array(sps));\r\n\r\n        this.track.width = config.width;\r\n        this.track.height = config.height;\r\n        this.track.sps = [new Uint8Array(sps)];\r\n        // this.track.timescale = this.remuxer.timescale;\r\n        // this.track.duration = this.remuxer.timescale; // TODO: extract duration for non-live client\r\n        this.track.codec = 'avc1.';\r\n\r\n        let codecarray = new DataView(sps.buffer, sps.byteOffset+1, 4);\r\n        for (let i = 0; i < 3; ++i) {\r\n            var h = codecarray.getUint8(i).toString(16);\r\n            if (h.length < 2) {\r\n                h = '0' + h;\r\n            }\r\n            this.track.codec  += h;\r\n        }\r\n    }\r\n\r\n    parsePPS(pps) {\r\n        this.track.pps = [new Uint8Array(pps)];\r\n    }\r\n\r\n    parseNAL(unit) {\r\n        if (!unit) return false;\r\n        \r\n        let push = false;\r\n        switch (unit.type()) {\r\n            case NALU.NDR:\r\n                push = true;\r\n                break;\r\n            case NALU.IDR:\r\n                push = true;\r\n                break;\r\n            case NALU.PPS:\r\n                if (!this.track.pps) {\r\n                    this.parsePPS(unit.getData().subarray(4));\r\n                    if (!this.remuxer.readyToDecode && this.track.pps && this.track.sps) {\r\n                        this.remuxer.readyToDecode = true;\r\n                    }\r\n                }\r\n                break;\r\n            case NALU.SPS:\r\n                if(!this.track.sps) {\r\n                    this.parseSPS(unit.getData().subarray(4));\r\n                    if (!this.remuxer.readyToDecode && this.track.pps && this.track.sps) {\r\n                        this.remuxer.readyToDecode = true;\r\n                    }\r\n                }\r\n                break;\r\n            case NALU.SEI:\r\n                // console.log('SEI');\r\n                break;\r\n            default:\r\n        }\r\n        return push;\r\n    }\r\n\r\n    /**\r\n     * Advance the ExpGolomb decoder past a scaling list. The scaling\r\n     * list is optionally transmitted as part of a sequence parameter\r\n     * set and is not relevant to transmuxing.\r\n     * @param decoder {ExpGolomb} exp golomb decoder\r\n     * @param count {number} the number of entries in this scaling list\r\n     * @see Recommendation ITU-T H.264, Section 7.3.2.1.1.1\r\n     */\r\n    static skipScalingList(decoder, count) {\r\n        let lastScale = 8,\r\n            nextScale = 8,\r\n            deltaScale;\r\n        for (let j = 0; j < count; j++) {\r\n            if (nextScale !== 0) {\r\n                deltaScale = decoder.readEG();\r\n                nextScale = (lastScale + deltaScale + 256) % 256;\r\n            }\r\n            lastScale = (nextScale === 0) ? lastScale : nextScale;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Read a sequence parameter set and return some interesting video\r\n     * properties. A sequence parameter set is the H264 metadata that\r\n     * describes the properties of upcoming video frames.\r\n     * @param data {Uint8Array} the bytes of a sequence parameter set\r\n     * @return {object} an object with configuration parsed from the\r\n     * sequence parameter set, including the dimensions of the\r\n     * associated video frames.\r\n     */\r\n    static readSPS(data) {\r\n        let decoder = new ExpGolomb(data);\r\n        let frameCropLeftOffset = 0,\r\n            frameCropRightOffset = 0,\r\n            frameCropTopOffset = 0,\r\n            frameCropBottomOffset = 0,\r\n            sarScale = 1,\r\n            profileIdc,profileCompat,levelIdc,\r\n            numRefFramesInPicOrderCntCycle, picWidthInMbsMinus1,\r\n            picHeightInMapUnitsMinus1,\r\n            frameMbsOnlyFlag,\r\n            scalingListCount;\r\n        decoder.readUByte();\r\n        profileIdc = decoder.readUByte(); // profile_idc\r\n        profileCompat = decoder.readBits(5); // constraint_set[0-4]_flag, u(5)\r\n        decoder.skipBits(3); // reserved_zero_3bits u(3),\r\n        levelIdc = decoder.readUByte(); //level_idc u(8)\r\n        decoder.skipUEG(); // seq_parameter_set_id\r\n        // some profiles have more optional data we don't need\r\n        if (profileIdc === 100 ||\r\n            profileIdc === 110 ||\r\n            profileIdc === 122 ||\r\n            profileIdc === 244 ||\r\n            profileIdc === 44  ||\r\n            profileIdc === 83  ||\r\n            profileIdc === 86  ||\r\n            profileIdc === 118 ||\r\n            profileIdc === 128) {\r\n            var chromaFormatIdc = decoder.readUEG();\r\n            if (chromaFormatIdc === 3) {\r\n                decoder.skipBits(1); // separate_colour_plane_flag\r\n            }\r\n            decoder.skipUEG(); // bit_depth_luma_minus8\r\n            decoder.skipUEG(); // bit_depth_chroma_minus8\r\n            decoder.skipBits(1); // qpprime_y_zero_transform_bypass_flag\r\n            if (decoder.readBoolean()) { // seq_scaling_matrix_present_flag\r\n                scalingListCount = (chromaFormatIdc !== 3) ? 8 : 12;\r\n                for (let i = 0; i < scalingListCount; ++i) {\r\n                    if (decoder.readBoolean()) { // seq_scaling_list_present_flag[ i ]\r\n                        if (i < 6) {\r\n                            H264Parser.skipScalingList(decoder, 16);\r\n                        } else {\r\n                            H264Parser.skipScalingList(decoder, 64);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        decoder.skipUEG(); // log2_max_frame_num_minus4\r\n        var picOrderCntType = decoder.readUEG();\r\n        if (picOrderCntType === 0) {\r\n            decoder.readUEG(); //log2_max_pic_order_cnt_lsb_minus4\r\n        } else if (picOrderCntType === 1) {\r\n            decoder.skipBits(1); // delta_pic_order_always_zero_flag\r\n            decoder.skipEG(); // offset_for_non_ref_pic\r\n            decoder.skipEG(); // offset_for_top_to_bottom_field\r\n            numRefFramesInPicOrderCntCycle = decoder.readUEG();\r\n            for(let i = 0; i < numRefFramesInPicOrderCntCycle; ++i) {\r\n                decoder.skipEG(); // offset_for_ref_frame[ i ]\r\n            }\r\n        }\r\n        decoder.skipUEG(); // max_num_ref_frames\r\n        decoder.skipBits(1); // gaps_in_frame_num_value_allowed_flag\r\n        picWidthInMbsMinus1 = decoder.readUEG();\r\n        picHeightInMapUnitsMinus1 = decoder.readUEG();\r\n        frameMbsOnlyFlag = decoder.readBits(1);\r\n        if (frameMbsOnlyFlag === 0) {\r\n            decoder.skipBits(1); // mb_adaptive_frame_field_flag\r\n        }\r\n        decoder.skipBits(1); // direct_8x8_inference_flag\r\n        if (decoder.readBoolean()) { // frame_cropping_flag\r\n            frameCropLeftOffset = decoder.readUEG();\r\n            frameCropRightOffset = decoder.readUEG();\r\n            frameCropTopOffset = decoder.readUEG();\r\n            frameCropBottomOffset = decoder.readUEG();\r\n        }\r\n        if (decoder.readBoolean()) {\r\n            // vui_parameters_present_flag\r\n            if (decoder.readBoolean()) {\r\n                // aspect_ratio_info_present_flag\r\n                let sarRatio;\r\n                const aspectRatioIdc = decoder.readUByte();\r\n                switch (aspectRatioIdc) {\r\n                    case 1: sarRatio = [1,1]; break;\r\n                    case 2: sarRatio = [12,11]; break;\r\n                    case 3: sarRatio = [10,11]; break;\r\n                    case 4: sarRatio = [16,11]; break;\r\n                    case 5: sarRatio = [40,33]; break;\r\n                    case 6: sarRatio = [24,11]; break;\r\n                    case 7: sarRatio = [20,11]; break;\r\n                    case 8: sarRatio = [32,11]; break;\r\n                    case 9: sarRatio = [80,33]; break;\r\n                    case 10: sarRatio = [18,11]; break;\r\n                    case 11: sarRatio = [15,11]; break;\r\n                    case 12: sarRatio = [64,33]; break;\r\n                    case 13: sarRatio = [160,99]; break;\r\n                    case 14: sarRatio = [4,3]; break;\r\n                    case 15: sarRatio = [3,2]; break;\r\n                    case 16: sarRatio = [2,1]; break;\r\n                    case 255: {\r\n                        sarRatio = [decoder.readUByte() << 8 | decoder.readUByte(), decoder.readUByte() << 8 | decoder.readUByte()];\r\n                        break;\r\n                    }\r\n                }\r\n                if (sarRatio) {\r\n                    sarScale = sarRatio[0] / sarRatio[1];\r\n                }\r\n            }\r\n            if (decoder.readBoolean()) {decoder.skipBits(1);}\r\n\r\n            if (decoder.readBoolean()) {\r\n                decoder.skipBits(4);\r\n                if (decoder.readBoolean()) {\r\n                    decoder.skipBits(24);\r\n                }\r\n            }\r\n            if (decoder.readBoolean()) {\r\n                decoder.skipUEG();\r\n                decoder.skipUEG();\r\n            }\r\n            if (decoder.readBoolean()) {\r\n                let unitsInTick = decoder.readUInt();\r\n                let timeScale = decoder.readUInt();\r\n                let fixedFrameRate = decoder.readBoolean();\r\n                let frameDuration = timeScale/(2*unitsInTick);\r\n                console.log(`timescale: ${timeScale}; unitsInTick: ${unitsInTick}; fixedFramerate: ${fixedFrameRate}; avgFrameDuration: ${frameDuration}`);\r\n            }\r\n        }\r\n        return {\r\n            width: Math.ceil((((picWidthInMbsMinus1 + 1) * 16) - frameCropLeftOffset * 2 - frameCropRightOffset * 2) * sarScale),\r\n            height: ((2 - frameMbsOnlyFlag) * (picHeightInMapUnitsMinus1 + 1) * 16) - ((frameMbsOnlyFlag? 2 : 4) * (frameCropTopOffset + frameCropBottomOffset))\r\n        };\r\n    }\r\n\r\n    static readSliceType(decoder) {\r\n        // skip NALu type\r\n        decoder.readUByte();\r\n        // discard first_mb_in_slice\r\n        decoder.readUEG();\r\n        // return slice_type\r\n        return decoder.readUEG();\r\n    }\r\n}","import {NALUAsm} from '../elementary/NALUAsm';\r\nimport {H264Parser} from '../parsers/h264';\r\nimport {base64ToArrayBuffer} from '../util/binary';\r\nimport {BaseRemuxer} from './base';\r\nimport {getTagged} from 'bp_logger';\r\n\r\nconst Log = getTagged(\"remuxer:h264\"); \r\n// TODO: asm.js\r\nexport class H264Remuxer extends BaseRemuxer {\r\n\r\n    constructor(timescale, scaleFactor=1, params={}) {\r\n        super(timescale, scaleFactor);\r\n\r\n        this.nextDts = undefined;\r\n        this.readyToDecode = false;\r\n        this.initialized = false;\r\n\r\n        this.firstDTS=0;\r\n        this.firstPTS=0;\r\n        this.lastDTS=undefined;\r\n        this.lastSampleDuration = 0;\r\n        this.lastDurations = [];\r\n        // this.timescale = 90000;\r\n        this.tsAlign = Math.round(this.timescale/60);\r\n\r\n        this.mp4track={\r\n            id:BaseRemuxer.getTrackID(),\r\n            type: 'video',\r\n            len:0,\r\n            fragmented:true,\r\n            sps:'',\r\n            pps:'',\r\n            width:0,\r\n            height:0,\r\n            timescale: timescale,\r\n            duration: timescale,\r\n            samples: []\r\n        };\r\n        this.samples = [];\r\n\r\n        this.h264 = new H264Parser(this);\r\n\r\n        if (params.sps) {\r\n            this.setSPS(new Uint8Array(params.sps));\r\n        }\r\n        if (params.pps) {\r\n            this.setPPS(new Uint8Array(params.pps));\r\n        }\r\n\r\n        if (this.mp4track.pps && this.mp4track.sps) {\r\n            this.readyToDecode = true;\r\n        }\r\n    }\r\n\r\n    _scaled(timestamp) {\r\n        return timestamp >>> this.scaleFactor;\r\n    }\r\n\r\n    _unscaled(timestamp) {\r\n        return timestamp << this.scaleFactor;\r\n    }\r\n\r\n    setSPS(sps) {\r\n        this.h264.parseSPS(sps);\r\n    }\r\n\r\n    setPPS(pps) {\r\n        this.h264.parsePPS(pps);\r\n    }\r\n\r\n    remux(nalu) {\r\n        if (this.h264.parseNAL(nalu) && super.remux.call(this, nalu)) {\r\n            this.mp4track.len += nalu.getSize();\r\n        }\r\n    }\r\n\r\n    getPayload() {\r\n        if (!this.getPayloadBase()) {\r\n            return null;\r\n        }\r\n\r\n        let payload = new Uint8Array(this.mp4track.len);\r\n        let offset = 0;\r\n        let samples=this.mp4track.samples;\r\n        let mp4Sample, lastDTS, pts, dts;\r\n\r\n\r\n        // Log.debug(this.samples.map((e)=>{\r\n        //     return Math.round((e.dts - this.initDTS));\r\n        // }));\r\n\r\n        // let minDuration = Number.MAX_SAFE_INTEGER;\r\n        while (this.samples.length) {\r\n            let sample = this.samples.shift();\r\n            if (sample === null) {\r\n                // discontinuity\r\n                this.nextDts = undefined;\r\n                break;\r\n            }\r\n\r\n            let unit = sample.unit;\r\n            \r\n            pts = /*Math.round(*/(sample.pts - this.initDTS)/*/this.tsAlign)*this.tsAlign*/;\r\n            dts = /*Math.round(*/(sample.dts - this.initDTS)/*/this.tsAlign)*this.tsAlign*/;\r\n            // ensure DTS is not bigger than PTS\r\n            dts = Math.min(pts,dts);\r\n\r\n            // if not first AVC sample of video track, normalize PTS/DTS with previous sample value\r\n            // and ensure that sample duration is positive\r\n            if (lastDTS !== undefined) {\r\n                let sampleDuration = this.scaled(dts - lastDTS);\r\n                // Log.debug(`Sample duration: ${sampleDuration}`);\r\n                if (sampleDuration <= 0) {\r\n                    Log.log(`invalid AVC sample duration at PTS/DTS: ${pts}/${dts}|lastDTS: ${lastDTS}:${sampleDuration}`);\r\n                    this.mp4track.len -= unit.getSize();\r\n                    continue;\r\n                }\r\n                // minDuration = Math.min(sampleDuration, minDuration);\r\n                this.lastDurations.push(sampleDuration);\r\n                if (this.lastDurations.length > 100) {\r\n                    this.lastDurations.shift();\r\n                }\r\n                mp4Sample.duration = sampleDuration;\r\n            } else {\r\n                if (this.nextDts) {\r\n                    let delta = dts - this.nextDts;\r\n                    // if fragment are contiguous, or delta less than 600ms, ensure there is no overlap/hole between fragments\r\n                    if (/*contiguous ||*/ Math.abs(Math.round(BaseRemuxer.toMS(delta))) < 600) {\r\n\r\n                        if (delta) {\r\n                            // set DTS to next DTS\r\n                            // Log.debug(`Video/PTS/DTS adjusted: ${pts}->${Math.max(pts - delta, this.nextDts)}/${dts}->${this.nextDts},delta:${delta}`);\r\n                            dts = this.nextDts;\r\n                            // offset PTS as well, ensure that PTS is smaller or equal than new DTS\r\n                            pts = Math.max(pts - delta, dts);\r\n                        }\r\n                    } else {\r\n                        if (delta < 0) {\r\n                            Log.log(`skip frame from the past at DTS=${dts} with expected DTS=${this.nextDts}`);\r\n                            this.mp4track.len -= unit.getSize();\r\n                            continue;\r\n                        }\r\n                    }\r\n                }\r\n                // remember first DTS of our avcSamples, ensure value is positive\r\n                this.firstDTS = Math.max(0, dts);\r\n            }\r\n\r\n            mp4Sample = {\r\n                size: unit.getSize(),\r\n                duration: 0,\r\n                cts: this.scaled(pts - dts),\r\n                flags: {\r\n                    isLeading: 0,\r\n                    isDependedOn: 0,\r\n                    hasRedundancy: 0,\r\n                    degradPrio: 0\r\n                }\r\n            };\r\n            let flags = mp4Sample.flags;\r\n            if (sample.unit.isKeyframe() === true) {\r\n                // the current sample is a key frame\r\n                flags.dependsOn = 2;\r\n                flags.isNonSync = 0;\r\n            } else {\r\n                flags.dependsOn = 1;\r\n                flags.isNonSync = 1;\r\n            }\r\n\r\n            payload.set(unit.getData(), offset);\r\n            offset += unit.getSize();\r\n\r\n            samples.push(mp4Sample);\r\n            lastDTS = dts;\r\n        }\r\n\r\n        if (!samples.length) return null;\r\n\r\n        let avgDuration = this.lastDurations.reduce(function(a, b) { return (a|0) + (b|0); }, 0) / (this.lastDurations.length||1)|0;\r\n        if (samples.length >= 2) {\r\n            this.lastSampleDuration = avgDuration;\r\n            mp4Sample.duration = avgDuration;\r\n        } else {\r\n            mp4Sample.duration = this.lastSampleDuration;\r\n        }\r\n\r\n        if(samples.length && (!this.nextDts /*|| navigator.userAgent.toLowerCase().indexOf('chrome') > -1*/)) {\r\n            let flags = samples[0].flags;\r\n            // chrome workaround, mark first sample as being a Random Access Point to avoid sourcebuffer append issue\r\n            // https://code.google.com/p/chromium/issues/detail?id=229412\r\n            flags.dependsOn = 2;\r\n            flags.isNonSync = 0;\r\n        }\r\n\r\n        // next AVC sample DTS should be equal to last sample DTS + last sample duration\r\n        this.nextDts = dts + this.unscaled(this.lastSampleDuration);\r\n        // Log.debug(`next dts: ${this.nextDts}, last duration: ${this.lastSampleDuration}, last dts: ${dts}`);\r\n\r\n        return new Uint8Array(payload.buffer, 0, this.mp4track.len);\r\n    }\r\n}","export class StreamType {\r\n    static get VIDEO() {return 1;}\r\n    static get AUDIO() {return 2;}\r\n\r\n    static get map() {return {\r\n        [StreamType.VIDEO]: 'video',\r\n        [StreamType.AUDIO]: 'audio'\r\n    }};\r\n}\r\n\r\nexport class PayloadType {\r\n    static get H264() {return 1;}\r\n    static get AAC() {return 2;}\r\n\r\n    static get map() {return {\r\n        [PayloadType.H264]: 'video',\r\n        [PayloadType.AAC]: 'audio'\r\n    }};\r\n\r\n    static get string_map() {return  {\r\n        H264: PayloadType.H264,\r\n        AAC: PayloadType.AAC,\r\n        'MP4A-LATM': PayloadType.AAC,\r\n        'MPEG4-GENERIC': PayloadType.AAC\r\n    }}\r\n}","import {MP4} from '../iso-bmff/mp4-generator';\r\nimport {AACRemuxer} from './aac';\r\nimport {H264Remuxer} from './h264';\r\nimport {MSE} from '../presentation/mse';\r\nimport {EventEmitter} from 'bp_event';\r\nimport {PayloadType} from \"../defs\";\r\n\r\nimport {getTagged} from \"bp_logger\";\r\n\r\nconst LOG_TAG = \"remuxer\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\nexport class Remuxer {\r\n    static get TrackConverters() {return {\r\n        [PayloadType.H264]: H264Remuxer,\r\n        [PayloadType.AAC]:  AACRemuxer\r\n    }};\r\n\r\n    static get TrackScaleFactor() {return {\r\n        [PayloadType.H264]: 1,//4,\r\n        [PayloadType.AAC]:  0\r\n    }};\r\n\r\n    static get TrackTimescale() {return {\r\n        [PayloadType.H264]: 90000,//22500,\r\n        [PayloadType.AAC]:  0\r\n    }};\r\n\r\n    constructor(mediaElement) {\r\n        this.mse = new MSE([mediaElement]);\r\n        this.eventSource = new EventEmitter();\r\n        this.mse_ready = true;\r\n\r\n        this.reset();\r\n\r\n        this.errorListener = this.mseClose.bind(this);\r\n        this.closeListener = this.mseClose.bind(this);\r\n        this.samplesListener = this.onSamples.bind(this);\r\n        this.audioConfigListener = this.onAudioConfig.bind(this);\r\n\r\n        this.mse.eventSource.addEventListener('error', this.errorListener);\r\n        this.mse.eventSource.addEventListener('sourceclose', this.closeListener);\r\n        \r\n        this.eventSource.addEventListener('ready', this.init.bind(this));\r\n    }\r\n\r\n    reset() {\r\n        this.tracks = {};\r\n        this.initialized = false;\r\n        this.initSegments = {};\r\n        this.codecs = [];\r\n        this.streams = {};\r\n        this.enabled = false;\r\n    }\r\n\r\n    destroy() {\r\n        this.mse.destroy();\r\n        this.mse = null;\r\n\r\n        this.detachClient();\r\n\r\n        this.eventSource.destroy();\r\n    }\r\n\r\n    onTracks(tracks) {\r\n        Log.debug(tracks.detail);\r\n        // store available track types\r\n        for (let track of tracks.detail) {\r\n            this.tracks[track.type] = new Remuxer.TrackConverters[track.type](Remuxer.TrackTimescale[track.type], Remuxer.TrackScaleFactor[track.type], track.params);\r\n            if (track.offset) {\r\n                this.tracks[track.type].timeOffset = track.offset;\r\n            }\r\n            if (track.duration) {\r\n                this.tracks[track.type].mp4track.duration = track.duration*(this.tracks[track.type].timescale || Remuxer.TrackTimescale[track.type]);\r\n                this.tracks[track.type].duration = track.duration;\r\n            } else {\r\n                this.tracks[track.type].duration = 1;\r\n            }\r\n\r\n            // this.tracks[track.type].duration\r\n        }\r\n        this.mse.setLive(!this.client.seekable);\r\n    }\r\n\r\n    setTimeOffset(timeOffset, track) {\r\n        if (this.tracks[track.type]) {\r\n            this.tracks[track.type].timeOffset = timeOffset;///this.tracks[track.type].scaleFactor;\r\n        }\r\n    }\r\n\r\n    init() {\r\n        let tracks = [];\r\n        this.codecs = [];\r\n        let initmse = [];\r\n        let initPts = Infinity;\r\n        let initDts = Infinity;\r\n        for (let track_type in this.tracks) {\r\n            let track = this.tracks[track_type];\r\n            if (!MSE.isSupported([track.mp4track.codec])) {\r\n                throw new Error(`${track.mp4track.type} codec ${track.mp4track.codec} is not supported`);\r\n            }\r\n            tracks.push(track.mp4track);\r\n            this.codecs.push(track.mp4track.codec);\r\n            track.init(initPts, initDts/*, false*/);\r\n            // initPts = Math.min(track.initPTS, initPts);\r\n            // initDts = Math.min(track.initDTS, initDts);\r\n        }\r\n\r\n        for (let track_type in this.tracks) {\r\n            let track = this.tracks[track_type];\r\n            //track.init(initPts, initDts);\r\n            this.initSegments[track_type] = MP4.initSegment([track.mp4track], track.duration*track.timescale, track.timescale);\r\n            initmse.push(this.initMSE(track_type, track.mp4track.codec));\r\n        }\r\n        this.initialized = true;\r\n        Promise.all(initmse).then(()=>{\r\n            this.mse.play();\r\n            this.enabled = true;\r\n        });\r\n        \r\n    }\r\n\r\n    initMSE(track_type, codec) {\r\n        if (MSE.isSupported(this.codecs)) {\r\n            return this.mse.setCodec(track_type, `${PayloadType.map[track_type]}/mp4; codecs=\"${codec}\"`).then(()=>{\r\n                this.mse.feed(track_type, this.initSegments[track_type]);\r\n                // this.mse.play();\r\n                // this.enabled = true;\r\n            });\r\n        } else {\r\n            throw new Error('Codecs are not supported');\r\n        }\r\n    }\r\n\r\n    mseClose() {\r\n        // this.mse.clear();\r\n        this.eventSource.dispatchEvent('stopped');\r\n    }\r\n\r\n    flush() {\r\n        this.onSamples();\r\n        if (!this.initialized) {\r\n            if (Object.keys(this.tracks).length) {\r\n                for (let track_type in this.tracks) {\r\n                    if (!this.tracks[track_type].readyToDecode || !this.tracks[track_type].samples.length) return;\r\n                }\r\n                this.eventSource.dispatchEvent('ready');\r\n            }\r\n        } else {\r\n            for (let track_type in this.tracks) {\r\n                let track = this.tracks[track_type];\r\n                let pay = track.getPayload();\r\n                if (pay && pay.byteLength) {\r\n                    this.mse.feed(track_type, [MP4.moof(track.seq, track.scaled(track.firstDTS), track.mp4track), MP4.mdat(pay)]);\r\n                    track.flush();\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    onSamples(ev) {\r\n        // TODO: check format\r\n        // let data = ev.detail;\r\n        // if (this.tracks[data.pay] && this.client.sampleQueues[data.pay].length) {\r\n            // console.log(`video ${data.units[0].dts}`);\r\n        for (let qidx in this.client.sampleQueues) {\r\n            let queue = this.client.sampleQueues[qidx];\r\n            while (queue.length) {\r\n                let units = queue.shift();\r\n                for (let chunk of units) {\r\n                    this.tracks[qidx].remux(chunk);\r\n                }\r\n            }\r\n        }\r\n        // }\r\n    }\r\n\r\n    onAudioConfig(ev) {\r\n        if (this.tracks[ev.detail.pay]) {\r\n            this.tracks[ev.detail.pay].setConfig(ev.detail.config);\r\n        }\r\n    }\r\n\r\n    attachClient(client) {\r\n        this.detachClient();\r\n        this.client = client;\r\n        this.client.eventSource.addEventListener('samples', this.samplesListener);\r\n        this.client.eventSource.addEventListener('audio_config', this.audioConfigListener);\r\n        this.client.eventSource.addEventListener('tracks', this.onTracks.bind(this));\r\n        this.client.eventSource.addEventListener('flush', this.flush.bind(this));\r\n        this.client.eventSource.addEventListener('clear', ()=>{\r\n            this.reset();\r\n            this.mse.clear().then(()=>{\r\n                this.mse.play();\r\n            });\r\n        });\r\n    }\r\n\r\n    detachClient() {\r\n        if (this.client) {\r\n            this.client.eventSource.removeEventListener('samples', this.samplesListener);\r\n            this.client.eventSource.removeEventListener('audio_config', this.audioConfigListener);\r\n            // TODO: clear other listeners\r\n            // this.client.eventSource.removeEventListener('clear');\r\n            this.client = null;\r\n        }\r\n    }\r\n}","class State {\n    constructor(name, stateMachine) {\n        this.stateMachine = stateMachine;\n        this.transitions = new Set();\n        this.name = name;\n    }\n\n\n    activate() {\n        return Promise.resolve(null);\n    }\n\n    finishTransition() {}\n\n    deactivate() {\n        return Promise.resolve(null);\n    }\n}\n\nexport class StateMachine {\n    constructor() {\n        this.storage = {};\n        this.currentState = null;\n        this.states = new Map();\n    }\n\n    addState(name, {activate, finishTransition, deactivate}) {\n        let state = new State(name, this);\n        if (activate) state.activate = activate;\n        if (finishTransition) state.finishTransition = finishTransition;\n        if (deactivate) state.deactivate = deactivate;\n        this.states.set(name, state);\n        return this;\n    }\n\n    addTransition(fromName, toName){\n        if (!this.states.has(fromName)) {\n            throw ReferenceError(`No such state: ${fromName} while connecting to ${toName}`);\n        }\n        if (!this.states.has(toName)) {\n            throw ReferenceError(`No such state: ${toName} while connecting from ${fromName}`);\n        }\n        this.states.get(fromName).transitions.add(toName);\n        return this;\n    }\n\n    _promisify(res) {\n        let promise;\n        try {\n            promise = res;\n            if (!promise.then) {\n                promise = Promise.resolve(promise);\n            }\n        } catch (e) {\n            promise = Promise.reject(e);\n        }\n        return promise;\n    }\n\n    transitionTo(stateName) {\n        if (this.currentState == null) {\n            let state = this.states.get(stateName);\n            return this._promisify(state.activate.call(this))\n                .then((data)=> {\n                    this.currentState = state;\n                    return data;\n                }).then(state.finishTransition.bind(this));\n        }\n        if (this.currentState.name == stateName) return Promise.resolve();\n        if (this.currentState.transitions.has(stateName)) {\n            let state = this.states.get(stateName);\n            return this._promisify(state.deactivate.call(this))\n                .then(state.activate.bind(this)).then((data)=> {\n                    this.currentState = state;\n                    return data;\n                }).then(state.finishTransition.bind(this));\n        } else {\n            return Promise.reject(`No such transition: ${this.currentState.name} to ${stateName}`);\n        }\n    }\n\n}\n","import {PayloadType} from '../defs';\r\n\r\nimport {getTagged} from 'bp_logger';\r\nconst Log = getTagged(\"parser:sdp\");\r\n\r\nexport class SDPParser {\r\n    constructor(){\r\n        this.version = -1;\r\n        this.origin = null;\r\n        this.sessionName = null;\r\n        this.timing = null;\r\n        this.sessionBlock = {};\r\n        this.media = {};\r\n        this.tracks = {};\r\n        this.mediaMap = {};\r\n    }\r\n\r\n    parse(content) {\r\n        Log.debug(content);\r\n        return new Promise((resolve, reject)=>{\r\n            var dataString = content;\r\n            var success = true;\r\n            var currentMediaBlock = this.sessionBlock;\r\n\r\n            // TODO: multiple audio/video tracks\r\n\r\n            for (let line of dataString.split(\"\\n\")) {\r\n                line = line.replace(/\\r/, '');\r\n                if (0 === line.length) {\r\n                    /* Empty row (last row perhaps?), skip to next */\r\n                    continue;\r\n                }\r\n\r\n                switch (line.charAt(0)) {\r\n                    case 'v':\r\n                        if (-1 !== this.version) {\r\n                            Log.log('Version present multiple times in SDP');\r\n                            reject();\r\n                            return false;\r\n                        }\r\n                        success = success && this._parseVersion(line);\r\n                        break;\r\n\r\n                    case 'o':\r\n                        if (null !== this.origin) {\r\n                            Log.log('Origin present multiple times in SDP');\r\n                            reject();\r\n                            return false;\r\n                        }\r\n                        success = success && this._parseOrigin(line);\r\n                        break;\r\n\r\n                    case 's':\r\n                        if (null !== this.sessionName) {\r\n                            Log.log('Session Name present multiple times in SDP');\r\n                            reject();\r\n                            return false;\r\n                        }\r\n                        success = success && this._parseSessionName(line);\r\n                        break;\r\n\r\n                    case 't':\r\n                        if (null !== this.timing) {\r\n                            Log.log('Timing present multiple times in SDP');\r\n                            reject();\r\n                            return false;\r\n                        }\r\n                        success = success && this._parseTiming(line);\r\n                        break;\r\n\r\n                    case 'm':\r\n                        if (null !== currentMediaBlock && this.sessionBlock !== currentMediaBlock) {\r\n                            /* Complete previous block and store it */\r\n                            this.media[currentMediaBlock.type] = currentMediaBlock;\r\n                        }\r\n\r\n                        /* A wild media block appears */\r\n                        currentMediaBlock = {};\r\n                        currentMediaBlock.rtpmap = {};\r\n                        this._parseMediaDescription(line, currentMediaBlock);\r\n                        break;\r\n\r\n                    case 'a':\r\n                        SDPParser._parseAttribute(line, currentMediaBlock);\r\n                        break;\r\n\r\n                    default:\r\n                        Log.log('Ignored unknown SDP directive: ' + line);\r\n                        break;\r\n                }\r\n\r\n                if (!success) {\r\n                    reject();\r\n                    return;\r\n                }\r\n            }\r\n\r\n            this.media[currentMediaBlock.type] = currentMediaBlock;\r\n\r\n            success?resolve():reject();\r\n        });\r\n    }\r\n\r\n    _parseVersion(line) {\r\n        var matches = line.match(/^v=([0-9]+)$/);\r\n        if (0 === matches.length) {\r\n            Log.log('\\'v=\\' (Version) formatted incorrectly: ' + line);\r\n            return false;\r\n        }\r\n\r\n        this.version = matches[1];\r\n        if (0 != this.version) {\r\n            Log.log('Unsupported SDP version:' + this.version);\r\n            return false;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    _parseOrigin(line) {\r\n        var matches = line.match(/^o=([^ ]+) ([0-9]+) ([0-9]+) (IN) (IP4|IP6) ([^ ]+)$/);\r\n        if (0 === matches.length) {\r\n            Log.log('\\'o=\\' (Origin) formatted incorrectly: ' + line);\r\n            return false;\r\n        }\r\n\r\n        this.origin = {};\r\n        this.origin.username       = matches[1];\r\n        this.origin.sessionid      = matches[2];\r\n        this.origin.sessionversion = matches[3];\r\n        this.origin.nettype        = matches[4];\r\n        this.origin.addresstype    = matches[5];\r\n        this.origin.unicastaddress = matches[6];\r\n\r\n        return true;\r\n    }\r\n\r\n    _parseSessionName(line) {\r\n        var matches = line.match(/^s=([^\\r\\n]+)$/);\r\n        if (0 === matches.length) {\r\n            Log.log('\\'s=\\' (Session Name) formatted incorrectly: ' + line);\r\n            return false;\r\n        }\r\n\r\n        this.sessionName = matches[1];\r\n\r\n        return true;\r\n    }\r\n\r\n    _parseTiming(line) {\r\n        var matches = line.match(/^t=([0-9]+) ([0-9]+)$/);\r\n        if (0 === matches.length) {\r\n            Log.log('\\'t=\\' (Timing) formatted incorrectly: ' + line);\r\n            return false;\r\n        }\r\n\r\n        this.timing = {};\r\n        this.timing.start = matches[1];\r\n        this.timing.stop  = matches[2];\r\n\r\n        return true;\r\n    }\r\n\r\n    _parseMediaDescription(line, media) {\r\n        var matches = line.match(/^m=([^ ]+) ([^ ]+) ([^ ]+)[ ]/);\r\n        if (0 === matches.length) {\r\n            Log.log('\\'m=\\' (Media) formatted incorrectly: ' + line);\r\n            return false;\r\n        }\r\n\r\n        media.type  = matches[1];\r\n        media.port  = matches[2];\r\n        media.proto = matches[3];\r\n        media.fmt   = line.substr(matches[0].length).split(' ').map(function(fmt, index, array) {\r\n            return parseInt(fmt);\r\n        });\r\n\r\n        for (let fmt of media.fmt) {\r\n            this.mediaMap[fmt] = media;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    static _parseAttribute(line, media) {\r\n        if (null === media) {\r\n            /* Not in a media block, can't be bothered parsing attributes for session */\r\n            return true;\r\n        }\r\n\r\n        var matches; /* Used for some cases of below switch-case */\r\n        var separator = line.indexOf(':');\r\n        var attribute = line.substr(0, (-1 === separator) ? 0x7FFFFFFF : separator); /* 0x7FF.. is default */\r\n\r\n        switch (attribute) {\r\n            case 'a=recvonly':\r\n            case 'a=sendrecv':\r\n            case 'a=sendonly':\r\n            case 'a=inactive':\r\n                media.mode = line.substr('a='.length);\r\n                break;\r\ncase 'a=range':\r\n                matches = line.match(/^a=range:\\s*([a-zA-Z-]+)=([0-9.]+|now)\\s*-\\s*([0-9.]*)$/);\r\n                media.range= [Number(matches[2]==\"now\"?-1:matches[2]), Number(matches[3]), matches[1]];\r\n                break;\r\n            case 'a=control':\r\n                media.control = line.substr('a=control:'.length);\r\n                break;\r\n\r\n            case 'a=rtpmap':\r\n                matches = line.match(/^a=rtpmap:(\\d+) (.*)$/);\r\n                if (null === matches) {\r\n                    Log.log('Could not parse \\'rtpmap\\' of \\'a=\\'');\r\n                    return false;\r\n                }\r\n\r\n                var payload = parseInt(matches[1]);\r\n                media.rtpmap[payload] = {};\r\n\r\n                var attrs = matches[2].split('/');\r\n                media.rtpmap[payload].name  = attrs[0].toUpperCase();\r\n                media.rtpmap[payload].clock = attrs[1];\r\n                if (undefined !== attrs[2]) {\r\n                    media.rtpmap[payload].encparams = attrs[2];\r\n                }\r\n                media.ptype = PayloadType.string_map[attrs[0].toUpperCase()];\r\n\r\n                break;\r\n\r\n            case 'a=fmtp':\r\n                matches = line.match(/^a=fmtp:(\\d+) (.*)$/);\r\n                if (0 === matches.length) {\r\n                    Log.log('Could not parse \\'fmtp\\'  of \\'a=\\'');\r\n                    return false;\r\n                }\r\n\r\n                media.fmtp = {};\r\n                for (var param of matches[2].split(';')) {\r\n                    var idx = param.indexOf('=');\r\n                    media.fmtp[param.substr(0, idx).toLowerCase().trim()] = param.substr(idx + 1).trim();\r\n                }\r\n                break;\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    getSessionBlock() {\r\n        return this.sessionBlock;\r\n    }\r\n\r\n    hasMedia(mediaType) {\r\n        return this.media[mediaType] != undefined;\r\n    }\r\n\r\n    getMediaBlock(mediaType) {\r\n        return this.media[mediaType];\r\n    }\r\n\r\n    getMediaBlockByPayloadType(pt) {\r\n        // for (var m in this.media) {\r\n        //     if (-1 !== this.media[m].fmt.indexOf(pt)) {\r\n        //         return this.media[m];\r\n        //     }\r\n        // }\r\n        return this.mediaMap[pt] || null;\r\n\r\n        //ErrorManager.dispatchError(826, [pt], true);\r\n        // Log.error(`failed to find media with payload type ${pt}`);\r\n        //\r\n        // return null;\r\n    }\r\n\r\n    getMediaBlockList() {\r\n        var res = [];\r\n        for (var m in this.media) {\r\n            res.push(m);\r\n        }\r\n\r\n        return res;\r\n    }\r\n}","import {RTSPClientSM as RTSPClient}  from './client';\r\nimport {Url} from '../../core/util/url';\r\nimport {getTagged} from 'bp_logger';\r\n\r\nconst LOG_TAG = \"rtsp:stream\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\nexport class RTSPStream {\r\n\r\n    constructor(client, track) {\r\n        this.state = null;\r\n        this.client = client;\r\n        this.track = track;\r\n        this.rtpChannel = 1;\r\n\r\n        this.stopKeepAlive();\r\n        this.keepaliveInterval = null;\r\n    }\r\n\r\n    reset() {\r\n        this.stopKeepAlive();\r\n        this.client.forgetRTPChannel(this.rtpChannel);\r\n        this.client = null;\r\n        this.track = null;\r\n    }\r\n\r\n    start() {\r\n        return this.sendSetup().then(this.sendPlay.bind(this));\r\n    }\r\n\r\n    stop() {\r\n        return this.sendTeardown();\r\n    }\r\n\r\n    getSetupURL(track) {\r\n        var sessionBlock = this.client.sdp.getSessionBlock();\r\n        if (Url.isAbsolute(track.control)) {\r\n            return track.control;\r\n        } else if (Url.isAbsolute(`${sessionBlock.control}${track.control}`)) {\r\n            return `${sessionBlock.control}${track.control}`;\r\n        } else if (Url.isAbsolute(`${this.client.contentBase}${track.control}`)) {\r\n            /* Should probably check session level control before this */\r\n            return `${this.client.contentBase}${track.control}`;\r\n        }\r\n\r\n        Log.error('Can\\'t determine track URL from ' +\r\n            'block.control:' + track.control + ', ' +\r\n            'session.control:' + sessionBlock.control + ', and ' +\r\n            'content-base:' + this.client.contentBase);\r\n    }\r\n\r\n    getControlURL() {\r\n        let ctrl = this.client.sdp.getSessionBlock().control;\r\n        if (Url.isAbsolute(ctrl)) {\r\n            return ctrl;\r\n        } else if (!ctrl || '*' === ctrl) {\r\n            return this.client.contentBase;\r\n        } else {\r\n            return `${this.client.contentBase}${ctrl}`;\r\n        }\r\n    }\r\n\r\n    sendKeepalive() {\r\n        return this.client.sendRequest('GET_PARAMETER', this.getSetupURL(this.track), {\r\n            'Session': this.session\r\n        });\r\n    }\r\n\r\n    stopKeepAlive() {\r\n        clearInterval(this.keepaliveInterval);\r\n    }\r\n\r\n    startKeepAlive() {\r\n        this.keepaliveInterval = setInterval(()=>{\r\n            this.sendKeepalive().catch((e)=>{\r\n                Log.error(e);\r\n                this.client.reconnect();\r\n            });\r\n        }, 30000);\r\n    }\r\n\r\n    sendRequest(_cmd, _params={}) {\r\n        let params = {};\r\n        if (this.session) {\r\n            params['Session'] = this.session;\r\n        }\r\n        Object.assign(params, _params);\r\n        return this.client.sendRequest(_cmd, this.getControlURL(), params);\r\n    }\r\n\r\n    sendSetup() {\r\n        this.state = RTSPClient.STATE_SETUP;\r\n        this.rtpChannel = this.client.interleaveChannelIndex;\r\n        let interleavedChannels = this.client.interleaveChannelIndex++ + \"-\" + this.client.interleaveChannelIndex++;\r\n        return this.client.sendRequest('SETUP', this.getSetupURL(this.track), {\r\n            'Transport': `RTP/AVP/TCP;unicast;interleaved=${interleavedChannels}`,\r\n            'Date': new Date().toUTCString()\r\n        }).then((_data)=>{\r\n            this.session = _data.headers['session'];\r\n            /*if (!/RTP\\/AVP\\/TCP;unicast;interleaved=/.test(_data.headers[\"transport\"])) {\r\n                // TODO: disconnect stream and notify client\r\n                throw new Error(\"Connection broken\");\r\n            }*/\r\n            this.startKeepAlive();\r\n        });\r\n    }\r\n\r\n    sendPlay(pos=0) {\r\n        this.state = RTSPStream.STATE_PLAY;\r\n        let params = {};\r\n        let range = this.client.sdp.sessionBlock.range;\r\n        if (range) {\r\n            // TODO: seekable\r\n            if (range[0]==-1) {\r\n                range[0]=0;// Do not handle now at the moment\r\n            }\r\n            // params['Range'] = `${range[2]}=${range[0]}-`;\r\n        }\r\n        return this.sendRequest('PLAY', params).then((_data)=>{\r\n            this.client.useRTPChannel(this.rtpChannel);\r\n            this.state = RTSPClient.STATE_PLAYING;\r\n            return {track:this.track, data: _data};\r\n        });\r\n    }\r\n\r\n    sendPause() {\r\n        if (!this.client.supports(\"PAUSE\")) {\r\n            return;\r\n        }\r\n        this.state = RTSPClient.STATE_PAUSE;\r\n        return this.sendRequest(\"PAUSE\").then((_data)=>{\r\n            this.state = RTSPClient.STATE_PAUSED;\r\n        });\r\n    }\r\n\r\n    sendTeardown() {\r\n        if (this.state != RTSPClient.STATE_TEARDOWN) {\r\n            this.client.forgetRTPChannel(this.rtpChannel);\r\n            this.state = RTSPClient.STATE_TEARDOWN;\r\n            this.stopKeepAlive();\r\n            return this.sendRequest(\"TEARDOWN\").then(()=> {\r\n                Log.log('RTSPClient: STATE_TEARDOWN');\r\n                ///this.client.connection.disconnect();\r\n                // TODO: Notify client\r\n            });\r\n        }\r\n    }\r\n}\r\n","// TODO: asm.js\r\nimport {Log} from 'bp_logger';\r\nexport default class RTP {\r\n    constructor(pkt/*uint8array*/, sdp) {\r\n        let bytes = new DataView(pkt.buffer, pkt.byteOffset, pkt.byteLength);\r\n\r\n        this.version   = bytes.getUint8(0) >>> 6;\r\n        this.padding   = bytes.getUint8(0) & 0x20 >>> 5;\r\n        this.has_extension = bytes.getUint8(0) & 0x10 >>> 4;\r\n        this.csrc      = bytes.getUint8(0) & 0x0F;\r\n        this.marker    = bytes.getUint8(1) >>> 7;\r\n        this.pt        = bytes.getUint8(1) & 0x7F;\r\n        this.sequence  = bytes.getUint16(2) ;\r\n        this.timestamp = bytes.getUint32(4);\r\n        this.ssrc      = bytes.getUint32(8);\r\n        this.csrcs     = [];\r\n\r\n        let pktIndex=12;\r\n        if (this.csrc>0) {\r\n            this.csrcs.push(bytes.getUint32(pktIndex));\r\n            pktIndex+=4;\r\n        }\r\n        if (this.has_extension==1) {\r\n            this.extension = bytes.getUint16(pktIndex);\r\n            this.ehl = bytes.getUint16(pktIndex+2);\r\n            pktIndex+=4;\r\n            this.header_data = pkt.slice(pktIndex, this.ehl);\r\n            pktIndex += this.ehl;\r\n        }\r\n\r\n        this.headerLength = pktIndex;\r\n        let padLength = 0;\r\n        if (this.padding) {\r\n            padLength = bytes.getUint8(pkt.byteLength-1);\r\n        }\r\n\r\n        // this.bodyLength   = pkt.byteLength-this.headerLength-padLength;\r\n\r\n        this.media = sdp.getMediaBlockByPayloadType(this.pt);\r\n        if (null === this.media) {\r\n            Log.log(`Media description for payload type: ${this.pt} not provided.`);\r\n        }\r\n        this.type = this.media.ptype;//PayloadType.string_map[this.media.rtpmap[this.media.fmt[0]].name];\r\n\r\n        this.data = pkt.subarray(pktIndex);\r\n        // this.timestamp = 1000 * (this.timestamp / this.media.rtpmap[this.pt].clock);\r\n        // console.log(this);\r\n    }\r\n    getPayload() {\r\n        return this.data;\r\n    }\r\n\r\n    getTimestampMS() {\r\n        return this.timestamp; //1000 * (this.timestamp / this.media.rtpmap[this.pt].clock);\r\n    }\r\n\r\n    toString() {\r\n        return \"RTP(\" +\r\n            \"version:\"   + this.version   + \", \" +\r\n            \"padding:\"   + this.padding   + \", \" +\r\n            \"has_extension:\" + this.has_extension + \", \" +\r\n            \"csrc:\"      + this.csrc      + \", \" +\r\n            \"marker:\"    + this.marker    + \", \" +\r\n            \"pt:\"        + this.pt        + \", \" +\r\n            \"sequence:\"  + this.sequence  + \", \" +\r\n            \"timestamp:\" + this.timestamp + \", \" +\r\n            \"ssrc:\"      + this.ssrc      + \")\";\r\n    }\r\n\r\n    isVideo(){return this.media.type == 'video';}\r\n    isAudio(){return this.media.type == 'audio';}\r\n\r\n    \r\n}","import RTP from './rtp';\r\n\r\nexport default class RTPFactory {\r\n    constructor(sdp) {\r\n        this.tsOffsets={};\r\n        for (let pay in sdp.media) {\r\n            for (let pt of sdp.media[pay].fmt) {\r\n                this.tsOffsets[pt] = {last: 0, overflow: 0};\r\n            }\r\n        }\r\n    }\r\n\r\n    build(pkt/*uint8array*/, sdp) {\r\n        let rtp = new RTP(pkt, sdp);\r\n\r\n        let tsOffset = this.tsOffsets[rtp.pt];\r\n        if (tsOffset) {\r\n            rtp.timestamp += tsOffset.overflow;\r\n            if (tsOffset.last && Math.abs(rtp.timestamp - tsOffset.last) > 0x7fffffff) {\r\n                console.log(`\\nlast ts: ${tsOffset.last}\\n\r\n                            new ts: ${rtp.timestamp}\\n\r\n                            new ts adjusted: ${rtp.timestamp+0xffffffff}\\n\r\n                            last overflow: ${tsOffset.overflow}\\n\r\n                            new overflow: ${tsOffset.overflow+0xffffffff}\\n\r\n                            `);\r\n                tsOffset.overflow += 0xffffffff;\r\n                rtp.timestamp += 0xffffffff;\r\n            }\r\n            /*if (rtp.timestamp>0xffffffff) {\r\n                console.log(`ts: ${rtp.timestamp}, seq: ${rtp.sequence}`);\r\n            }*/\r\n            tsOffset.last = rtp.timestamp;\r\n        }\r\n\r\n        return rtp;\r\n    }\r\n}","export class RTSPMessage {\r\n    static get RTSP_1_0() {return  \"RTSP/1.0\";}\r\n\r\n    constructor(_rtsp_version) {\r\n        this.version = _rtsp_version;\r\n    }\r\n\r\n    build(_cmd, _host, _params={}, _payload=null) {\r\n        let requestString = `${_cmd} ${_host} ${this.version}\\r\\n`;\r\n        for (let param in _params) {\r\n            requestString+=`${param}: ${_params[param]}\\r\\n`\r\n        }\r\n        // TODO: binary payload\r\n        if (_payload) {\r\n            requestString+=`Content-Length: ${_payload.length}\\r\\n`\r\n        }\r\n        requestString+='\\r\\n';\r\n        if (_payload) {\r\n            requestString+=_payload;\r\n        }\r\n        return requestString;\r\n    }\r\n\r\n    parse(_data) {\r\n        let lines = _data.split('\\r\\n');\r\n        let parsed = {\r\n            headers:{},\r\n            body:null,\r\n            code: 0,\r\n            statusLine: ''\r\n        };\r\n\r\n        let match;\r\n        [match, parsed.code, parsed.statusLine] = lines[0].match(new RegExp(`${this.version}[ ]+([0-9]{3})[ ]+(.*)`));\r\n        parsed.code = Number(parsed.code);\r\n        let lineIdx = 1;\r\n\r\n        while (lines[lineIdx]) {\r\n            let [k,v] = lines[lineIdx].split(/:(.+)/);\r\n            parsed.headers[k.toLowerCase()] = v.trim();\r\n            lineIdx++;\r\n        }\r\n\r\n        parsed.body = lines.slice(lineIdx).join('\\n\\r');\r\n\r\n        return parsed;\r\n    }\r\n\r\n}\r\n\r\nexport const MessageBuilder = new RTSPMessage(RTSPMessage.RTSP_1_0);","import {NALUAsm} from \"../../../../core/elementary/NALUAsm\";\r\nimport {AACAsm} from \"../../../../core/elementary/AACAsm\";\r\n\r\nexport class RTPPayloadParser {\r\n\r\n    constructor() {\r\n        this.h264parser = new RTPH264Parser();\r\n        this.aacparser = new RTPAACParser();\r\n    }\r\n\r\n    parse(rtp) {\r\n        if (rtp.media.type=='video') {\r\n            return this.h264parser.parse(rtp);\r\n        } else if (rtp.media.type == 'audio') {\r\n            return this.aacparser.parse(rtp);\r\n        }\r\n        return null;\r\n    }\r\n}\r\n\r\nclass RTPH264Parser {\r\n    constructor() {\r\n        this.naluasm = new NALUAsm();\r\n    }\r\n\r\n    parse(rtp) {\r\n        return this.naluasm.onNALUFragment(rtp.getPayload(), rtp.getTimestampMS());\r\n    }\r\n}\r\n\r\nclass RTPAACParser {\r\n\r\n    constructor() {\r\n        this.scale = 1;\r\n        this.asm = new AACAsm();\r\n    }\r\n\r\n    setConfig(conf) {\r\n        this.asm.config = conf;\r\n    }\r\n\r\n    parse(rtp) {\r\n        return this.asm.onAACFragment(rtp);\r\n    }\r\n}","import {Log} from 'bp_logger';\r\nimport {EventEmitter} from 'bp_event';\r\n\r\nexport class BaseClient {\r\n    constructor(transport, options={flush: 100}) {\r\n        this.options = options;\r\n        this.eventSource = new EventEmitter();\r\n\r\n        Object.defineProperties(this, {\r\n            sourceUrl: {value: null, writable: true},   // TODO: getter with validator\r\n            paused: {value: true, writable: true},\r\n            seekable: {value: false, writable: true},\r\n            connected: {value: false, writable: true}\r\n        });\r\n\r\n        this._onData = ()=>{\r\n            if (this.connected) {\r\n                while (this.transport.dataQueue.length) {\r\n                    this.onData(this.transport.dataQueue.pop());\r\n                }\r\n            }\r\n        };\r\n        this._onConnect = this.onConnected.bind(this);\r\n        this._onDisconnect = this.onDisconnected.bind(this);\r\n        this.attachTransport(transport);\r\n    }\r\n\r\n    static streamType() {\r\n        return null;    \r\n    }\r\n    \r\n    destroy() {\r\n        this.detachTransport();\r\n    }\r\n\r\n    attachTransport(transport) {\r\n        this.detachTransport();\r\n        this.transport = transport;\r\n        this.transport.eventSource.addEventListener('data', this._onData);\r\n        this.transport.eventSource.addEventListener('connected', this._onConnect);\r\n        this.transport.eventSource.addEventListener('disconnected', this._onDisconnect);\r\n    }\r\n\r\n    detachTransport() {\r\n        if (this.transport) {\r\n            this.transport.eventSource.removeEventListener('data', this._onData);\r\n            this.transport.eventSource.removeEventListener('connected', this._onConnect);\r\n            this.transport.eventSource.removeEventListener('disconnected', this._onDisconnect);\r\n        }\r\n    }\r\n\r\n    start() {\r\n        Log.log('Client started');\r\n        this.paused = false;\r\n        // this.startStreamFlush();\r\n    }\r\n\r\n    stop() {\r\n        Log.log('Client paused');\r\n        this.paused = true;\r\n        // this.stopStreamFlush();\r\n    }\r\n\r\n    seek(timeOffset) {\r\n\r\n    }\r\n\r\n    setSource(source) {\r\n        this.stop();\r\n        this.endpoint = source;\r\n        this.sourceUrl = source.urlpath;\r\n    }\r\n\r\n    startStreamFlush() {\r\n        this.flushInterval = setInterval(()=>{\r\n            if (!this.paused) {\r\n                this.eventSource.dispatchEvent('flush');\r\n            }\r\n        }, this.options.flush);\r\n    }\r\n\r\n    stopStreamFlush() {\r\n        clearInterval(this.flushInterval);\r\n    }\r\n\r\n    onData(data) {\r\n\r\n    }\r\n\r\n    onConnected() {\r\n        if (!this.seekable) {\r\n            this.transport.dataQueue = [];\r\n            this.eventSource.dispatchEvent('clear');\r\n        }\r\n        this.connected = true;\r\n    }\r\n\r\n    onDisconnected() {\r\n        this.connected = false;\r\n    }\r\n}","import {StateMachine} from 'bp_statemachine';\r\nimport {SDPParser} from '../../core/parsers/sdp';\r\nimport {RTSPStream} from './stream';\r\n// import {RTP} from './rtp/rtp';\r\nimport RTPFactory from './rtp/factory';\r\nimport {MessageBuilder} from './message';\r\nimport {RTPPayloadParser} from './rtp/payload/parser';\r\nimport {BaseClient} from '../../core/base_client';\r\nimport {getTagged} from 'bp_logger';\r\nimport {PayloadType} from '../../core/defs';\r\nimport {base64ToArrayBuffer, hexToByteArray} from '../../core/util/binary';\r\nimport {AACParser} from '../../core/parsers/aac';\r\n\r\nconst LOG_TAG = \"client:rtsp\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\nexport class RTPError {\r\n    constructor(message, file, line) {\r\n        //super(message, file, line);\r\n    }\r\n}\r\n\r\nexport default class RTSPClient extends BaseClient {\r\n    constructor(transport, options={flush: 200}) {\r\n        super(transport, options);\r\n        this.clientSM = new RTSPClientSM(this, transport);\r\n        this.clientSM.ontracks = (tracks) => {\r\n            this.eventSource.dispatchEvent('tracks', tracks);\r\n            this.startStreamFlush();\r\n        };\r\n        this.sampleQueues={};\r\n    }\r\n    \r\n    static streamType() {\r\n        return 'rtsp';\r\n    }\r\n\r\n    setSource(url) {\r\n        super.setSource(url);\r\n        this.clientSM.setSource(url);\r\n    }\r\n\r\n    destroy() {\r\n        this.clientSM.destroy();\r\n        return super.destroy();\r\n    }\r\n\r\n    start() {\r\n        super.start();\r\n        this.transport.ready.then(()=> {\r\n            this.clientSM.start();\r\n        });\r\n    }\r\n\r\n    onData(data) {\r\n        this.clientSM.onData(data);\r\n    }\r\n\r\n    onConnected() {\r\n        this.clientSM.onConnected();\r\n        super.onConnected();\r\n    }\r\n\r\n    onDisconnected() {\r\n        super.onDisconnected();\r\n        this.clientSM.onDisconnected();\r\n    }\r\n}\r\n\r\nexport class RTSPClientSM extends StateMachine {\r\n    static get USER_AGENT() {return 'SFRtsp 0.3';}\r\n    static get STATE_INITIAL() {return  1 << 0;}\r\n    static get STATE_OPTIONS() {return 1 << 1;}\r\n    static get STATE_DESCRIBE () {return  1 << 2;}\r\n    static get STATE_SETUP() {return  1 << 3;}\r\n    static get STATE_STREAMS() {return 1 << 4;}\r\n    static get STATE_TEARDOWN() {return  1 << 5;}\r\n    // static STATE_PAUSED = 1 << 6;\r\n\r\n    constructor(parent, transport) {\r\n        super();\r\n\r\n        this.parent = parent;\r\n        this.transport = transport;\r\n        this.payParser = new RTPPayloadParser();\r\n        this.rtp_channels = new Set();\r\n        this.ontracks = null;\r\n\r\n        this.reset();\r\n\r\n        this.addState(RTSPClientSM.STATE_INITIAL,{\r\n        }).addState(RTSPClientSM.STATE_OPTIONS, {\r\n            activate: this.sendOptions,\r\n            finishTransition: this.onOptions\r\n        }).addState(RTSPClientSM.STATE_DESCRIBE, {\r\n            activate: this.sendDescribe,\r\n            finishTransition: this.onDescribe\r\n        }).addState(RTSPClientSM.STATE_SETUP, {\r\n            activate: this.sendSetup,\r\n            finishTransition: this.onSetup\r\n        }).addState(RTSPClientSM.STATE_STREAMS, {\r\n\r\n        }).addState(RTSPClientSM.STATE_TEARDOWN, {\r\n            activate: ()=>{\r\n                this.started = false;\r\n            },\r\n            finishTransition: ()=>{\r\n                return this.transitionTo(RTSPClientSM.STATE_INITIAL)\r\n            }\r\n        }).addTransition(RTSPClientSM.STATE_INITIAL, RTSPClientSM.STATE_OPTIONS)\r\n            .addTransition(RTSPClientSM.STATE_INITIAL, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_OPTIONS, RTSPClientSM.STATE_DESCRIBE)\r\n            .addTransition(RTSPClientSM.STATE_DESCRIBE, RTSPClientSM.STATE_SETUP)\r\n            .addTransition(RTSPClientSM.STATE_SETUP, RTSPClientSM.STATE_STREAMS)\r\n            .addTransition(RTSPClientSM.STATE_TEARDOWN, RTSPClientSM.STATE_INITIAL)\r\n            // .addTransition(RTSPClientSM.STATE_STREAMS, RTSPClientSM.STATE_PAUSED)\r\n            // .addTransition(RTSPClientSM.STATE_PAUSED, RTSPClientSM.STATE_STREAMS)\r\n            .addTransition(RTSPClientSM.STATE_STREAMS, RTSPClientSM.STATE_TEARDOWN)\r\n            // .addTransition(RTSPClientSM.STATE_PAUSED, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_SETUP, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_DESCRIBE, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_OPTIONS, RTSPClientSM.STATE_TEARDOWN);\r\n\r\n        this.transitionTo(RTSPClientSM.STATE_INITIAL);\r\n\r\n        this.shouldReconnect = false;\r\n\r\n        // TODO: remove listeners\r\n        // this.connection.eventSource.addEventListener('connected', ()=>{\r\n        //     if (this.shouldReconnect) {\r\n        //         this.reconnect();\r\n        //     }\r\n        // });\r\n        // this.connection.eventSource.addEventListener('disconnected', ()=>{\r\n        //     if (this.started) {\r\n        //         this.shouldReconnect = true;\r\n        //     }\r\n        // });\r\n        // this.connection.eventSource.addEventListener('data', (data)=>{\r\n        //     let channel = new DataView(data).getUint8(1);\r\n        //     if (this.rtp_channels.has(channel)) {\r\n        //         this.onRTP({packet: new Uint8Array(data, 4), type: channel});\r\n        //     }\r\n        //\r\n        // });\r\n    }\r\n\r\n    destroy() {\r\n        this.parent = null;\r\n    }\r\n\r\n    setSource(url) {\r\n        this.endpoint = url;\r\n        this.url = url.urlpath;\r\n    }\r\n\r\n    onConnected() {\r\n        if (this.rtpFactory) {\r\n            this.rtpFactory = null;\r\n        }\r\n        if (this.shouldReconnect) {\r\n            this.start();\r\n        }\r\n    }\r\n\r\n    onDisconnected() {\r\n        this.reset();\r\n        this.shouldReconnect = true;\r\n        return this.transitionTo(RTSPClientSM.STATE_TEARDOWN);\r\n    }\r\n\r\n    start() {\r\n        if (this.state != RTSPClientSM.STATE_STREAMS) {\r\n            this.transitionTo(RTSPClientSM.STATE_OPTIONS);\r\n        } else {\r\n            // TODO: seekable\r\n        }\r\n    }\r\n\r\n    onData(data) {\r\n        let channel = data[1];\r\n        if (this.rtp_channels.has(channel)) {\r\n            this.onRTP({packet: data.subarray(4), type: channel});\r\n        }\r\n    }\r\n\r\n    useRTPChannel(channel) {\r\n        this.rtp_channels.add(channel);\r\n    }\r\n\r\n    forgetRTPChannel(channel) {\r\n        this.rtp_channels.delete(channel);\r\n    }\r\n\r\n    stop() {\r\n        this.shouldReconnect = false;\r\n        // this.mse = null;\r\n    }\r\n\r\n    reset() {\r\n        this.methods = [];\r\n        this.tracks = [];\r\n        for (let stream in this.streams) {\r\n            this.streams[stream].reset();\r\n        }\r\n        this.streams={};\r\n        this.contentBase = \"\";\r\n        this.state = RTSPClientSM.STATE_INITIAL;\r\n        this.sdp = null;\r\n        this.interleaveChannelIndex = 0;\r\n        this.session = null;\r\n        this.timeOffset = {};\r\n    }\r\n\r\n    reconnect() {\r\n        //this.parent.eventSource.dispatchEvent('clear');\r\n        this.reset();\r\n        if (this.currentState.name != RTSPClientSM.STATE_INITIAL) {\r\n            this.transitionTo(RTSPClientSM.STATE_TEARDOWN).then(()=> {\r\n                this.transitionTo(RTSPClientSM.STATE_OPTIONS);\r\n            });\r\n        } else {\r\n            this.transitionTo(RTSPClientSM.STATE_OPTIONS);\r\n        }\r\n    }\r\n\r\n    supports(method) {\r\n        return this.methods.includes(method)\r\n    }\r\n\r\n    parse(_data) {\r\n        Log.debug(_data.payload);\r\n        let d=_data.payload.split('\\r\\n\\r\\n');\r\n        let parsed =  MessageBuilder.parse(d[0]);\r\n        let len = Number(parsed.headers['content-length']);\r\n        if (len) {\r\n            let d=_data.payload.split('\\r\\n\\r\\n');\r\n            parsed.body = d[1];\r\n        } else {\r\n            parsed.body=\"\";\r\n        }\r\n        return parsed\r\n    }\r\n\r\n    sendRequest(_cmd, _host, _params={}, _payload=null) {\r\n        this.cSeq++;\r\n        Object.assign(_params, {\r\n            CSeq: this.cSeq,\r\n            'User-Agent': RTSPClientSM.USER_AGENT\r\n        });\r\n        if (_host != '*' && this.parent.endpoint.auth) {\r\n            // TODO: DIGEST authentication\r\n            _params['Authorization'] = `Basic ${btoa(this.parent.endpoint.auth)}`;\r\n        }\r\n        return this.send(MessageBuilder.build(_cmd, _host, _params, _payload));\r\n    }\r\n\r\n    send(_data) {\r\n        return this.transport.ready.then(()=> {\r\n            Log.debug(_data);\r\n            return this.transport.send(_data).then(this.parse.bind(this)).then((parsed)=> {\r\n                // TODO: parse status codes\r\n                if (parsed.code>=300) {\r\n                    Log.error(parsed.statusLine);\r\n                    throw new Error(`RTSP error: ${parsed.code} ${parsed.message}`);\r\n                }\r\n                return parsed;\r\n            });\r\n        }).catch(this.onDisconnected.bind(this));\r\n    }\r\n\r\n    sendOptions() {\r\n        this.reset();\r\n        this.started = true;\r\n        this.cSeq = 0;\r\n        return this.sendRequest('OPTIONS', '*', {});\r\n    }\r\n\r\n    onOptions(data) {\r\n        this.methods = data.headers['public'].split(',').map((e)=>e.trim());\r\n        this.transitionTo(RTSPClientSM.STATE_DESCRIBE);\r\n    }\r\n\r\n    sendDescribe() {\r\n        return this.sendRequest('DESCRIBE', this.url, {\r\n            'Accept': 'application/sdp'\r\n        }).then((data)=>{\r\n            this.sdp = new SDPParser();\r\n            return this.sdp.parse(data.body).catch(()=>{\r\n                throw new Error(\"Failed to parse SDP\");\r\n            }).then(()=>{return data;});\r\n        });\r\n    }\r\n\r\n    onDescribe(data) {\r\n        this.contentBase = data.headers['content-base'] || `${this.endpoint.protocol}://${this.endpoint.location}${this.url}/`;\r\n        this.tracks = this.sdp.getMediaBlockList();\r\n        this.rtpFactory = new RTPFactory(this.sdp);\r\n\r\n        Log.log('SDP contained ' + this.tracks.length + ' track(s). Calling SETUP for each.');\r\n\r\n        if (data.headers['session']) {\r\n            this.session = data.headers['session'];\r\n        }\r\n\r\n        if (!this.tracks.length) {\r\n            throw new Error(\"No tracks in SDP\");\r\n        }\r\n\r\n        this.transitionTo(RTSPClientSM.STATE_SETUP);\r\n    }\r\n\r\n    sendSetup() {\r\n        let streams=[];\r\n\r\n        // TODO: select first video and first audio tracks\r\n        for (let track_type of this.tracks) {\r\n            Log.log(\"setup track: \"+track_type);\r\n            // if (track_type=='audio') continue;\r\n            // if (track_type=='video') continue;\r\n            let track = this.sdp.getMediaBlock(track_type);\r\n            if (!PayloadType.string_map[track.rtpmap[track.fmt[0]].name]) continue;\r\n\r\n            this.streams[track_type] = new RTSPStream(this, track);\r\n            let playPromise = this.streams[track_type].start();\r\n            this.parent.sampleQueues[PayloadType.string_map[track.rtpmap[track.fmt[0]].name]]=[];\r\n            streams.push(playPromise.then(({track, data})=>{\r\n                let timeOffset = 0;\r\n                try {\r\n                    let rtp_info = data.headers[\"rtp-info\"].split(';');\r\n                    this.timeOffset[track.fmt[0]] = Number(rtp_info[rtp_info.length - 1].split(\"=\")[1]) ;\r\n                } catch (e) {\r\n                    this.timeOffset[track.fmt[0]] = new Date().getTime();\r\n                }\r\n\r\n                let params = {\r\n                    timescale: 0,\r\n                    scaleFactor: 0\r\n                };\r\n                if (track.fmtp['sprop-parameter-sets']) {\r\n                    let sps_pps = track.fmtp['sprop-parameter-sets'].split(',');\r\n                    params = {\r\n                        sps:base64ToArrayBuffer(sps_pps[0]),\r\n                        pps:base64ToArrayBuffer(sps_pps[1])\r\n                    };\r\n                } else if (track.fmtp['config']) {\r\n                    let config = track.fmtp['config'];\r\n                    this.has_config = track.fmtp['cpresent']!='0';\r\n                    let generic = track.rtpmap[track.fmt[0]].name == 'MPEG4-GENERIC';\r\n                    if (generic) {\r\n                        params={config:\r\n                            AACParser.parseAudioSpecificConfig(hexToByteArray(config))\r\n                        };\r\n                        this.payParser.aacparser.setConfig(params.config);\r\n                    } else if (config) {\r\n                        // todo: parse audio specific config for mpeg4-generic\r\n                        params={config:\r\n                            AACParser.parseStreamMuxConfig(hexToByteArray(config))\r\n                        };\r\n                        this.payParser.aacparser.setConfig(params.config);\r\n                    }\r\n                }\r\n                params.duration = this.sdp.sessionBlock.range?this.sdp.sessionBlock.range[1]-this.sdp.sessionBlock.range[0]:1;\r\n                this.parent.seekable = (params.duration > 1);\r\n                let res = {\r\n                    track: track,\r\n                    offset: timeOffset,\r\n                    type: PayloadType.string_map[track.rtpmap[track.fmt[0]].name],\r\n                    params: params,\r\n                    duration: params.duration\r\n                };\r\n                return res;\r\n            }));\r\n        }\r\n        return Promise.all(streams).then((tracks)=>{\r\n\r\n            if (this.ontracks) {\r\n                this.ontracks(tracks);\r\n            }\r\n        });\r\n    }\r\n\r\n    onSetup() {\r\n        this.transitionTo(RTSPClientSM.STATE_STREAMS);\r\n    }\r\n\r\n    onRTP(_data) {\r\n        if (!this.rtpFactory) return;\r\n\r\n        let rtp = this.rtpFactory.build(_data.packet, this.sdp);\r\n        rtp.timestamp -= this.timeOffset[rtp.pt];\r\n        // Log.debug(rtp);\r\n        if (rtp.media) {\r\n            let pay = this.payParser.parse(rtp);\r\n            if (pay) {\r\n                this.parent.sampleQueues[rtp.type].push([pay]);\r\n            }\r\n        }\r\n\r\n        // this.remuxer.feedRTP();\r\n    }\r\n}","import {EventEmitter} from \"bp_event\";\r\n\r\nexport class BaseRequest {\r\n    constructor(data) {\r\n        this.data = data;\r\n        this.before = (data)=>{return Promise.resolve(data)};\r\n    }\r\n\r\n    send() {\r\n        return this.before(this.data);\r\n    }\r\n\r\n    before(fn) {\r\n        return Promise.resolve\r\n    }\r\n}\r\n\r\nexport class BaseTransport {\r\n    constructor(endpoint, stream_type, config={}) {\r\n        this.stream_type = stream_type;\r\n        this.endpoint = endpoint;\r\n        this.eventSource = new EventEmitter();\r\n        this.dataQueue = [];\r\n    }\r\n\r\n    static canTransfer(stream_type) {\r\n        return BaseTransport.streamTypes().includes(stream_type);\r\n    }\r\n    \r\n    static streamTypes() {\r\n        return [];\r\n    }\r\n\r\n    destroy() {\r\n        this.eventSource.destroy();\r\n    }\r\n\r\n    connect() {\r\n        // TO be impemented\r\n    }\r\n\r\n    disconnect() {\r\n        // TO be impemented\r\n    }\r\n\r\n    reconnect() {\r\n        return this.disconnect().then(()=>{\r\n            return this.connect();\r\n        });\r\n    }\r\n\r\n    setEndpoint(endpoint) {\r\n        this.endpoint = endpoint;\r\n        return this.reconnect();\r\n    }\r\n\r\n    send(data) {\r\n        // TO be impemented\r\n        // return this.prepare(data).send();\r\n    }\r\n\r\n    prepare(data) {\r\n        // TO be impemented\r\n        // return new Request(data);\r\n    }\r\n\r\n    // onData(type, data) {\r\n    //     this.eventSource.dispatchEvent(type, data);\r\n    // }\r\n}","export const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\r\nexport const CPU_CORES = 1;//navigator.hardwareConcurrency || 3;","// ASN.1 JavaScript decoder\r\n// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\r\n\r\n// Permission to use, copy, modify, and/or distribute this software for any\r\n// purpose with or without fee is hereby granted, provided that the above\r\n// copyright notice and this permission notice appear in all copies.\r\n// \r\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\r\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\r\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\r\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\r\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\r\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\r\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\r\n\r\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\r\n/*global oids */\r\n\r\nvar hardLimit = 100,\r\n    ellipsis = \"\\u2026\",\r\n    DOM = {\r\n        tag: function (tagName, className) {\r\n            var t = document.createElement(tagName);\r\n            t.className = className;\r\n            return t;\r\n        },\r\n        text: function (str) {\r\n            return document.createTextNode(str);\r\n        }\r\n    };\r\n\r\nclass Stream {\r\n    static get hexDigits() {\r\n        return \"0123456789ABCDEF\";\r\n    };\r\n\r\n    static get reTime() {\r\n        return /^((?:1[89]|2\\d)?\\d\\d)(0[1-9]|1[0-2])(0[1-9]|[12]\\d|3[01])([01]\\d|2[0-3])(?:([0-5]\\d)(?:([0-5]\\d)(?:[.,](\\d{1,3}))?)?)?(Z|[-+](?:[0]\\d|1[0-2])([0-5]\\d)?)?$/;\r\n    }\r\n\r\n\r\n    constructor(enc, pos) {\r\n        if (enc instanceof Stream) {\r\n            this.enc = enc.enc;\r\n            this.pos = enc.pos;\r\n        } else {\r\n            this.enc = enc;\r\n            this.pos = pos;\r\n        }\r\n    }\r\n\r\n    get(pos) {\r\n        if (pos === undefined)\r\n            pos = this.pos++;\r\n        if (pos >= this.enc.length)\r\n            throw 'Requesting byte offset ' + pos + ' on a stream of length ' + this.enc.length;\r\n        return this.enc[pos];\r\n    };\r\n\r\n    hexByte(b) {\r\n        return Stream.hexDigits.charAt((b >> 4) & 0xF) + Stream.hexDigits.charAt(b & 0xF);\r\n    };\r\n\r\n    hexDump(start, end, raw) {\r\n        var s = \"\";\r\n        for (var i = start; i < end; ++i) {\r\n            s += this.hexByte(this.get(i));\r\n            if (raw !== true)\r\n                switch (i & 0xF) {\r\n                    case 0x7:\r\n                        s += \"  \";\r\n                        break;\r\n                    case 0xF:\r\n                        s += \"\\n\";\r\n                        break;\r\n                    default:\r\n                        s += \" \";\r\n                }\r\n        }\r\n        return s;\r\n    };\r\n\r\n    parseStringISO(start, end) {\r\n        var s = \"\";\r\n        for (var i = start; i < end; ++i)\r\n            s += String.fromCharCode(this.get(i));\r\n        return s;\r\n    };\r\n\r\n    parseStringUTF(start, end) {\r\n        var s = \"\";\r\n        for (var i = start; i < end;) {\r\n            var c = this.get(i++);\r\n            if (c < 128)\r\n                s += String.fromCharCode(c);\r\n            else if ((c > 191) && (c < 224))\r\n                s += String.fromCharCode(((c & 0x1F) << 6) | (this.get(i++) & 0x3F));\r\n            else\r\n                s += String.fromCharCode(((c & 0x0F) << 12) | ((this.get(i++) & 0x3F) << 6) | (this.get(i++) & 0x3F));\r\n        }\r\n        return s;\r\n    };\r\n\r\n    parseStringBMP(start, end) {\r\n        var str = \"\"\r\n        for (var i = start; i < end; i += 2) {\r\n            var high_byte = this.get(i);\r\n            var low_byte = this.get(i + 1);\r\n            str += String.fromCharCode((high_byte << 8) + low_byte);\r\n        }\r\n\r\n        return str;\r\n    };\r\n\r\n    parseTime(start, end) {\r\n        var s = this.parseStringISO(start, end),\r\n            m = Stream.reTime.exec(s);\r\n        if (!m)\r\n            return \"Unrecognized time: \" + s;\r\n        s = m[1] + \"-\" + m[2] + \"-\" + m[3] + \" \" + m[4];\r\n        if (m[5]) {\r\n            s += \":\" + m[5];\r\n            if (m[6]) {\r\n                s += \":\" + m[6];\r\n                if (m[7])\r\n                    s += \".\" + m[7];\r\n            }\r\n        }\r\n        if (m[8]) {\r\n            s += \" UTC\";\r\n            if (m[8] != 'Z') {\r\n                s += m[8];\r\n                if (m[9])\r\n                    s += \":\" + m[9];\r\n            }\r\n        }\r\n        return s;\r\n    };\r\n\r\n    parseInteger(start, end) {\r\n        //TODO support negative numbers\r\n        var len = end - start;\r\n        if (len > 4) {\r\n            len <<= 3;\r\n            var s = this.get(start);\r\n            if (s === 0)\r\n                len -= 8;\r\n            else\r\n                while (s < 128) {\r\n                    s <<= 1;\r\n                    --len;\r\n                }\r\n            return \"(\" + len + \" bit)\";\r\n        }\r\n        var n = 0;\r\n        for (var i = start; i < end; ++i)\r\n            n = (n << 8) | this.get(i);\r\n        return n;\r\n    };\r\n\r\n    parseBitString(start, end) {\r\n        var unusedBit = this.get(start),\r\n            lenBit = ((end - start - 1) << 3) - unusedBit,\r\n            s = \"(\" + lenBit + \" bit)\";\r\n        if (lenBit <= 20) {\r\n            var skip = unusedBit;\r\n            s += \" \";\r\n            for (var i = end - 1; i > start; --i) {\r\n                var b = this.get(i);\r\n                for (var j = skip; j < 8; ++j)\r\n                    s += (b >> j) & 1 ? \"1\" : \"0\";\r\n                skip = 0;\r\n            }\r\n        }\r\n        return s;\r\n    };\r\n\r\n    parseOctetString(start, end) {\r\n        var len = end - start,\r\n            s = \"(\" + len + \" byte) \";\r\n        if (len > hardLimit)\r\n            end = start + hardLimit;\r\n        for (var i = start; i < end; ++i)\r\n            s += this.hexByte(this.get(i)); //TODO: also try Latin1?\r\n        if (len > hardLimit)\r\n            s += ellipsis;\r\n        return s;\r\n    };\r\n\r\n    parseOID(start, end) {\r\n        var s = '',\r\n            n = 0,\r\n            bits = 0;\r\n        for (var i = start; i < end; ++i) {\r\n            var v = this.get(i);\r\n            n = (n << 7) | (v & 0x7F);\r\n            bits += 7;\r\n            if (!(v & 0x80)) { // finished\r\n                if (s === '') {\r\n                    var m = n < 80 ? n < 40 ? 0 : 1 : 2;\r\n                    s = m + \".\" + (n - m * 40);\r\n                } else\r\n                    s += \".\" + ((bits >= 31) ? \"bigint\" : n);\r\n                n = bits = 0;\r\n            }\r\n        }\r\n        return s;\r\n    };\r\n}\r\n\r\nexport class ASN1 {\r\n    static get reSeemsASCII() {\r\n        return /^[ -~]+$/;\r\n    }\r\n\r\n    constructor(stream, header, length, tag, sub) {\r\n        this.stream = stream;\r\n        this.header = header;\r\n        this.length = length;\r\n        this.tag = tag;\r\n        this.sub = sub;\r\n    }\r\n\r\n    typeName() {\r\n        if (this.tag === undefined)\r\n            return \"unknown\";\r\n        var tagClass = this.tag >> 6,\r\n            tagConstructed = (this.tag >> 5) & 1,\r\n            tagNumber = this.tag & 0x1F;\r\n        switch (tagClass) {\r\n            case 0: // universal\r\n                switch (tagNumber) {\r\n                    case 0x00:\r\n                        return \"EOC\";\r\n                    case 0x01:\r\n                        return \"BOOLEAN\";\r\n                    case 0x02:\r\n                        return \"INTEGER\";\r\n                    case 0x03:\r\n                        return \"BIT_STRING\";\r\n                    case 0x04:\r\n                        return \"OCTET_STRING\";\r\n                    case 0x05:\r\n                        return \"NULL\";\r\n                    case 0x06:\r\n                        return \"OBJECT_IDENTIFIER\";\r\n                    case 0x07:\r\n                        return \"ObjectDescriptor\";\r\n                    case 0x08:\r\n                        return \"EXTERNAL\";\r\n                    case 0x09:\r\n                        return \"REAL\";\r\n                    case 0x0A:\r\n                        return \"ENUMERATED\";\r\n                    case 0x0B:\r\n                        return \"EMBEDDED_PDV\";\r\n                    case 0x0C:\r\n                        return \"UTF8String\";\r\n                    case 0x10:\r\n                        return \"SEQUENCE\";\r\n                    case 0x11:\r\n                        return \"SET\";\r\n                    case 0x12:\r\n                        return \"NumericString\";\r\n                    case 0x13:\r\n                        return \"PrintableString\"; // ASCII subset\r\n                    case 0x14:\r\n                        return \"TeletexString\"; // aka T61String\r\n                    case 0x15:\r\n                        return \"VideotexString\";\r\n                    case 0x16:\r\n                        return \"IA5String\"; // ASCII\r\n                    case 0x17:\r\n                        return \"UTCTime\";\r\n                    case 0x18:\r\n                        return \"GeneralizedTime\";\r\n                    case 0x19:\r\n                        return \"GraphicString\";\r\n                    case 0x1A:\r\n                        return \"VisibleString\"; // ASCII subset\r\n                    case 0x1B:\r\n                        return \"GeneralString\";\r\n                    case 0x1C:\r\n                        return \"UniversalString\";\r\n                    case 0x1E:\r\n                        return \"BMPString\";\r\n                    default:\r\n                        return \"Universal_\" + tagNumber.toString(16);\r\n                }\r\n            case 1:\r\n                return \"Application_\" + tagNumber.toString(16);\r\n            case 2:\r\n                return \"[\" + tagNumber + \"]\"; // Context\r\n            case 3:\r\n                return \"Private_\" + tagNumber.toString(16);\r\n        }\r\n    }\r\n\r\n    content() {\r\n        if (this.tag === undefined)\r\n            return null;\r\n        var tagClass = this.tag >> 6,\r\n            tagNumber = this.tag & 0x1F,\r\n            content = this.posContent(),\r\n            len = Math.abs(this.length);\r\n        if (tagClass !== 0) { // universal\r\n            if (this.sub !== null)\r\n                return \"(\" + this.sub.length + \" elem)\";\r\n            //TODO: TRY TO PARSE ASCII STRING\r\n            var s = this.stream.parseStringISO(content, content + Math.min(len, hardLimit));\r\n            if (ASN1.reSeemsASCII.test(s))\r\n                return s.substring(0, 2 * hardLimit) + ((s.length > 2 * hardLimit) ? ellipsis : \"\");\r\n            else\r\n                return this.stream.parseOctetString(content, content + len);\r\n        }\r\n        switch (tagNumber) {\r\n            case 0x01: // BOOLEAN\r\n                return (this.stream.get(content) === 0) ? \"false\" : \"true\";\r\n            case 0x02: // INTEGER\r\n                return this.stream.parseInteger(content, content + len);\r\n            case 0x03: // BIT_STRING\r\n                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\r\n                    this.stream.parseBitString(content, content + len);\r\n            case 0x04: // OCTET_STRING\r\n                return this.sub ? \"(\" + this.sub.length + \" elem)\" :\r\n                    this.stream.parseOctetString(content, content + len);\r\n            //case 0x05: // NULL\r\n            case 0x06: // OBJECT_IDENTIFIER\r\n                return this.stream.parseOID(content, content + len);\r\n            //case 0x07: // ObjectDescriptor\r\n            //case 0x08: // EXTERNAL\r\n            //case 0x09: // REAL\r\n            //case 0x0A: // ENUMERATED\r\n            //case 0x0B: // EMBEDDED_PDV\r\n            case 0x10: // SEQUENCE\r\n            case 0x11: // SET\r\n                return \"(\" + this.sub.length + \" elem)\";\r\n            case 0x0C: // UTF8String\r\n                return this.stream.parseStringUTF(content, content + len);\r\n            case 0x12: // NumericString\r\n            case 0x13: // PrintableString\r\n            case 0x14: // TeletexString\r\n            case 0x15: // VideotexString\r\n            case 0x16: // IA5String\r\n            //case 0x19: // GraphicString\r\n            case 0x1A: // VisibleString\r\n                //case 0x1B: // GeneralString\r\n                //case 0x1C: // UniversalString\r\n                return this.stream.parseStringISO(content, content + len);\r\n            case 0x1E: // BMPString\r\n                return this.stream.parseStringBMP(content, content + len);\r\n            case 0x17: // UTCTime\r\n            case 0x18: // GeneralizedTime\r\n                return this.stream.parseTime(content, content + len);\r\n        }\r\n        return null;\r\n    };\r\n\r\n    toString() {\r\n        return this.typeName() + \"@\" + this.stream.pos + \"[header:\" + this.header + \",length:\" + this.length + \",sub:\" + ((this.sub === null) ? 'null' : this.sub.length) + \"]\";\r\n    };\r\n\r\n    print(indent) {\r\n        if (indent === undefined) indent = '';\r\n        document.writeln(indent + this);\r\n        if (this.sub !== null) {\r\n            indent += '  ';\r\n            for (var i = 0, max = this.sub.length; i < max; ++i)\r\n                this.sub[i].print(indent);\r\n        }\r\n    };\r\n\r\n    toPrettyString(indent) {\r\n        if (indent === undefined) indent = '';\r\n        var s = indent + this.typeName() + \" @\" + this.stream.pos;\r\n        if (this.length >= 0)\r\n            s += \"+\";\r\n        s += this.length;\r\n        if (this.tag & 0x20)\r\n            s += \" (constructed)\";\r\n        else if (((this.tag == 0x03) || (this.tag == 0x04)) && (this.sub !== null))\r\n            s += \" (encapsulates)\";\r\n        s += \"\\n\";\r\n        if (this.sub !== null) {\r\n            indent += '  ';\r\n            for (var i = 0, max = this.sub.length; i < max; ++i)\r\n                s += this.sub[i].toPrettyString(indent);\r\n        }\r\n        return s;\r\n    };\r\n\r\n    toDOM() {\r\n        var node = DOM.tag(\"div\", \"node\");\r\n        node.asn1 = this;\r\n        var head = DOM.tag(\"div\", \"head\");\r\n        var s = this.typeName().replace(/_/g, \" \");\r\n        head.innerHTML = s;\r\n        var content = this.content();\r\n        if (content !== null) {\r\n            content = String(content).replace(/</g, \"&lt;\");\r\n            var preview = DOM.tag(\"span\", \"preview\");\r\n            preview.appendChild(DOM.text(content));\r\n            head.appendChild(preview);\r\n        }\r\n        node.appendChild(head);\r\n        this.node = node;\r\n        this.head = head;\r\n        var value = DOM.tag(\"div\", \"value\");\r\n        s = \"Offset: \" + this.stream.pos + \"<br/>\";\r\n        s += \"Length: \" + this.header + \"+\";\r\n        if (this.length >= 0)\r\n            s += this.length;\r\n        else\r\n            s += (-this.length) + \" (undefined)\";\r\n        if (this.tag & 0x20)\r\n            s += \"<br/>(constructed)\";\r\n        else if (((this.tag == 0x03) || (this.tag == 0x04)) && (this.sub !== null))\r\n            s += \"<br/>(encapsulates)\";\r\n        //TODO if (this.tag == 0x03) s += \"Unused bits: \"\r\n        if (content !== null) {\r\n            s += \"<br/>Value:<br/><b>\" + content + \"</b>\";\r\n            if ((typeof oids === 'object') && (this.tag == 0x06)) {\r\n                var oid = oids[content];\r\n                if (oid) {\r\n                    if (oid.d) s += \"<br/>\" + oid.d;\r\n                    if (oid.c) s += \"<br/>\" + oid.c;\r\n                    if (oid.w) s += \"<br/>(warning!)\";\r\n                }\r\n            }\r\n        }\r\n        value.innerHTML = s;\r\n        node.appendChild(value);\r\n        var sub = DOM.tag(\"div\", \"sub\");\r\n        if (this.sub !== null) {\r\n            for (var i = 0, max = this.sub.length; i < max; ++i)\r\n                sub.appendChild(this.sub[i].toDOM());\r\n        }\r\n        node.appendChild(sub);\r\n        head.onclick = function () {\r\n            node.className = (node.className == \"node collapsed\") ? \"node\" : \"node collapsed\";\r\n        };\r\n        return node;\r\n    };\r\n\r\n    posStart() {\r\n        return this.stream.pos;\r\n    };\r\n\r\n    posContent() {\r\n        return this.stream.pos + this.header;\r\n    };\r\n\r\n    posEnd() {\r\n        return this.stream.pos + this.header + Math.abs(this.length);\r\n    };\r\n\r\n    fakeHover(current) {\r\n        this.node.className += \" hover\";\r\n        if (current)\r\n            this.head.className += \" hover\";\r\n    };\r\n\r\n    fakeOut(current) {\r\n        var re = / ?hover/;\r\n        this.node.className = this.node.className.replace(re, \"\");\r\n        if (current)\r\n            this.head.className = this.head.className.replace(re, \"\");\r\n    };\r\n\r\n    toHexDOM_sub(node, className, stream, start, end) {\r\n        if (start >= end)\r\n            return;\r\n        var sub = DOM.tag(\"span\", className);\r\n        sub.appendChild(DOM.text(\r\n            stream.hexDump(start, end)));\r\n        node.appendChild(sub);\r\n    };\r\n\r\n    toHexDOM(root) {\r\n        var node = DOM.tag(\"span\", \"hex\");\r\n        if (root === undefined) root = node;\r\n        this.head.hexNode = node;\r\n        this.head.onmouseover = function () {\r\n            this.hexNode.className = \"hexCurrent\";\r\n        };\r\n        this.head.onmouseout = function () {\r\n            this.hexNode.className = \"hex\";\r\n        };\r\n        node.asn1 = this;\r\n        node.onmouseover = function () {\r\n            var current = !root.selected;\r\n            if (current) {\r\n                root.selected = this.asn1;\r\n                this.className = \"hexCurrent\";\r\n            }\r\n            this.asn1.fakeHover(current);\r\n        };\r\n        node.onmouseout = function () {\r\n            var current = (root.selected == this.asn1);\r\n            this.asn1.fakeOut(current);\r\n            if (current) {\r\n                root.selected = null;\r\n                this.className = \"hex\";\r\n            }\r\n        };\r\n        this.toHexDOM_sub(node, \"tag\", this.stream, this.posStart(), this.posStart() + 1);\r\n        this.toHexDOM_sub(node, (this.length >= 0) ? \"dlen\" : \"ulen\", this.stream, this.posStart() + 1, this.posContent());\r\n        if (this.sub === null)\r\n            node.appendChild(DOM.text(\r\n                this.stream.hexDump(this.posContent(), this.posEnd())));\r\n        else if (this.sub.length > 0) {\r\n            var first = this.sub[0];\r\n            var last = this.sub[this.sub.length - 1];\r\n            this.toHexDOM_sub(node, \"intro\", this.stream, this.posContent(), first.posStart());\r\n            for (var i = 0, max = this.sub.length; i < max; ++i)\r\n                node.appendChild(this.sub[i].toHexDOM(root));\r\n            this.toHexDOM_sub(node, \"outro\", this.stream, last.posEnd(), this.posEnd());\r\n        }\r\n        return node;\r\n    };\r\n\r\n    toHexString(root) {\r\n        return this.stream.hexDump(this.posStart(), this.posEnd(), true);\r\n    };\r\n\r\n}\r\n\r\nASN1.decodeLength = function (stream) {\r\n    var buf = stream.get(),\r\n        len = buf & 0x7F;\r\n    if (len == buf)\r\n        return len;\r\n    if (len > 3)\r\n        throw \"Length over 24 bits not supported at position \" + (stream.pos - 1);\r\n    if (len === 0)\r\n        return -1; // undefined\r\n    buf = 0;\r\n    for (var i = 0; i < len; ++i)\r\n        buf = (buf << 8) | stream.get();\r\n    return buf;\r\n};\r\nASN1.hasContent = function (tag, len, stream) {\r\n    if (tag & 0x20) // constructed\r\n        return true;\r\n    if ((tag < 0x03) || (tag > 0x04))\r\n        return false;\r\n    var p = new Stream(stream);\r\n    if (tag == 0x03) p.get(); // BitString unused bits, must be in [0, 7]\r\n    var subTag = p.get();\r\n    if ((subTag >> 6) & 0x01) // not (universal or context)\r\n        return false;\r\n    try {\r\n        var subLength = ASN1.decodeLength(p);\r\n        return ((p.pos - stream.pos) + subLength == len);\r\n    } catch (exception) {\r\n        return false;\r\n    }\r\n};\r\nASN1.decode = function (stream) {\r\n    if (!(stream instanceof Stream))\r\n        stream = new Stream(stream, 0);\r\n    var streamStart = new Stream(stream),\r\n        tag = stream.get(),\r\n        len = ASN1.decodeLength(stream),\r\n        header = stream.pos - streamStart.pos,\r\n        sub = null;\r\n    if (ASN1.hasContent(tag, len, stream)) {\r\n        // it has content, so we decode it\r\n        var start = stream.pos;\r\n        if (tag == 0x03) stream.get(); // skip BitString unused bits, must be in [0, 7]\r\n        sub = [];\r\n        if (len >= 0) {\r\n            // definite length\r\n            var end = start + len;\r\n            while (stream.pos < end)\r\n                sub[sub.length] = ASN1.decode(stream);\r\n            if (stream.pos != end)\r\n                throw \"Content size is not correct for container starting at offset \" + start;\r\n        } else {\r\n            // undefined length\r\n            try {\r\n                for (; ;) {\r\n                    var s = ASN1.decode(stream);\r\n                    if (s.tag === 0)\r\n                        break;\r\n                    sub[sub.length] = s;\r\n                }\r\n                len = start - stream.pos;\r\n            } catch (e) {\r\n                throw \"Exception while decoding undefined length content: \" + e;\r\n            }\r\n        }\r\n    } else\r\n        stream.pos += len; // skip content\r\n    return new ASN1(streamStart, header, len, tag, sub);\r\n};\r\nASN1.test = function () {\r\n    var test = [\r\n        {value: [0x27], expected: 0x27},\r\n        {value: [0x81, 0xC9], expected: 0xC9},\r\n        {value: [0x83, 0xFE, 0xDC, 0xBA], expected: 0xFEDCBA}\r\n    ];\r\n    for (var i = 0, max = test.length; i < max; ++i) {\r\n        var pos = 0,\r\n            stream = new Stream(test[i].value, 0),\r\n            res = ASN1.decodeLength(stream);\r\n        if (res != test[i].expected)\r\n            document.write(\"In test[\" + i + \"] expected \" + test[i].expected + \" got \" + res + \"\\n\");\r\n    }\r\n};","// prng4.js - uses Arcfour as a PRNG\r\n\r\nexport class Arcfour {\r\n  constructor() {\r\n    this.i = 0;\r\n    this.j = 0;\r\n    this.S = [];\r\n  }\r\n}\r\n\r\n// Initialize arcfour context from key, an array of ints, each from [0..255]\r\nfunction ARC4init(key) {\r\n  var i, j, t;\r\n  for(i = 0; i < 256; ++i)\r\n    this.S[i] = i;\r\n  j = 0;\r\n  for(i = 0; i < 256; ++i) {\r\n    j = (j + this.S[i] + key[i % key.length]) & 255;\r\n    t = this.S[i];\r\n    this.S[i] = this.S[j];\r\n    this.S[j] = t;\r\n  }\r\n  this.i = 0;\r\n  this.j = 0;\r\n}\r\n\r\nfunction ARC4next() {\r\n  var t;\r\n  this.i = (this.i + 1) & 255;\r\n  this.j = (this.j + this.S[this.i]) & 255;\r\n  t = this.S[this.i];\r\n  this.S[this.i] = this.S[this.j];\r\n  this.S[this.j] = t;\r\n  return this.S[(t + this.S[this.i]) & 255];\r\n}\r\n\r\nArcfour.prototype.init = ARC4init;\r\nArcfour.prototype.next = ARC4next;\r\n\r\n// Plug in your RNG constructor here\r\nexport function prng_newstate() {\r\n  return new Arcfour();\r\n}\r\n\r\n// Pool size must be a multiple of 4 and greater than 32.\r\n// An array of bytes the size of the pool will be passed to init()\r\nexport var rng_psize = 256;\r\n","import {rng_psize} from \"./prng4\";\r\nimport {prng_newstate} from \"./prng4\";\r\n// Random number generator - requires a PRNG backend, e.g. prng4.js\r\nvar rng_state;\r\nvar rng_pool;\r\nvar rng_pptr;\r\n\r\n// Initialize the pool with junk if needed.\r\nif(rng_pool == null) {\r\n  rng_pool = new Array();\r\n  rng_pptr = 0;\r\n  var t;\r\n  if(window.crypto && window.crypto.getRandomValues) {\r\n    // Extract entropy (2048 bits) from RNG if available\r\n    var z = new Uint32Array(256);\r\n    window.crypto.getRandomValues(z);\r\n    for (t = 0; t < z.length; ++t)\r\n      rng_pool[rng_pptr++] = z[t] & 255;\r\n  }\r\n\r\n  // Use mouse events for entropy, if we do not have enough entropy by the time\r\n  // we need it, entropy will be generated by Math.random.\r\n  var onMouseMoveListener = function(ev) {\r\n    this.count = this.count || 0;\r\n    if (this.count >= 256 || rng_pptr >= rng_psize) {\r\n      if (window.removeEventListener)\r\n        window.removeEventListener(\"mousemove\", onMouseMoveListener, false);\r\n      else if (window.detachEvent)\r\n        window.detachEvent(\"onmousemove\", onMouseMoveListener);\r\n      return;\r\n    }\r\n    try {\r\n      var mouseCoordinates = ev.x + ev.y;\r\n      rng_pool[rng_pptr++] = mouseCoordinates & 255;\r\n      this.count += 1;\r\n    } catch (e) {\r\n      // Sometimes Firefox will deny permission to access event properties for some reason. Ignore.\r\n    }\r\n  };\r\n  if (window.addEventListener)\r\n    window.addEventListener(\"mousemove\", onMouseMoveListener, false);\r\n  else if (window.attachEvent)\r\n    window.attachEvent(\"onmousemove\", onMouseMoveListener);\r\n\r\n}\r\n\r\nfunction rng_get_byte() {\r\n  if(rng_state == null) {\r\n    rng_state = prng_newstate();\r\n    // At this point, we may not have collected enough entropy.  If not, fall back to Math.random\r\n    while (rng_pptr < rng_psize) {\r\n      var random = Math.floor(65536 * Math.random());\r\n      rng_pool[rng_pptr++] = random & 255;\r\n    }\r\n    rng_state.init(rng_pool);\r\n    for(rng_pptr = 0; rng_pptr < rng_pool.length; ++rng_pptr)\r\n      rng_pool[rng_pptr] = 0;\r\n    rng_pptr = 0;\r\n  }\r\n  // TODO: allow reseeding after first request\r\n  return rng_state.next();\r\n}\r\n\r\nfunction rng_get_bytes(ba) {\r\n  var i;\r\n  for(i = 0; i < ba.length; ++i) ba[i] = rng_get_byte();\r\n}\r\n\r\nexport class SecureRandom {\r\n  constructor(){}\r\n}\r\n\r\nSecureRandom.prototype.nextBytes = rng_get_bytes;\r\n","// Copyright (c) 2005  Tom Wu\r\n// All Rights Reserved.\r\n// See \"LICENSE\" for details.\r\n\r\n// Basic JavaScript BN library - subset useful for RSA encryption.\r\n\r\n// Bits per digit\r\nvar dbits;\r\n\r\n// JavaScript engine analysis\r\nvar canary = 0xdeadbeefcafe;\r\nvar j_lm = ((canary&0xffffff)==0xefcafe);\r\n\r\n// (public) Constructor\r\nexport class BigInteger {\r\n  constructor(a,b,c) {\r\n    if (a != null)\r\n      if (\"number\" == typeof a) this.fromNumber(a, b, c);\r\n      else if (b == null && \"string\" != typeof a) this.fromString(a, 256);\r\n      else this.fromString(a, b);\r\n  }\r\n}\r\n\r\n// return new, unset BigInteger\r\nexport function nbi() { return new BigInteger(null); }\r\n\r\n// am: Compute w_j += (x*this_i), propagate carries,\r\n// c is initial carry, returns final carry.\r\n// c < 3*dvalue, x < 2*dvalue, this_i < dvalue\r\n// We need to select the fastest one that works in this environment.\r\n\r\n// am1: use a single mult and divide to get the high bits,\r\n// max digit bits should be 26 because\r\n// max internal value = 2*dvalue^2-2*dvalue (< 2^53)\r\nfunction am1(i,x,w,j,c,n) {\r\n  while(--n >= 0) {\r\n    var v = x*this[i++]+w[j]+c;\r\n    c = Math.floor(v/0x4000000);\r\n    w[j++] = v&0x3ffffff;\r\n  }\r\n  return c;\r\n}\r\n// am2 avoids a big mult-and-extract completely.\r\n// Max digit bits should be <= 30 because we do bitwise ops\r\n// on values up to 2*hdvalue^2-hdvalue-1 (< 2^31)\r\nfunction am2(i,x,w,j,c,n) {\r\n  var xl = x&0x7fff, xh = x>>15;\r\n  while(--n >= 0) {\r\n    var l = this[i]&0x7fff;\r\n    var h = this[i++]>>15;\r\n    var m = xh*l+h*xl;\r\n    l = xl*l+((m&0x7fff)<<15)+w[j]+(c&0x3fffffff);\r\n    c = (l>>>30)+(m>>>15)+xh*h+(c>>>30);\r\n    w[j++] = l&0x3fffffff;\r\n  }\r\n  return c;\r\n}\r\n// Alternately, set max digit bits to 28 since some\r\n// browsers slow down when dealing with 32-bit numbers.\r\nfunction am3(i,x,w,j,c,n) {\r\n  var xl = x&0x3fff, xh = x>>14;\r\n  while(--n >= 0) {\r\n    var l = this[i]&0x3fff;\r\n    var h = this[i++]>>14;\r\n    var m = xh*l+h*xl;\r\n    l = xl*l+((m&0x3fff)<<14)+w[j]+c;\r\n    c = (l>>28)+(m>>14)+xh*h;\r\n    w[j++] = l&0xfffffff;\r\n  }\r\n  return c;\r\n}\r\nif(j_lm && (navigator.appName == \"Microsoft Internet Explorer\")) {\r\n  BigInteger.prototype.am = am2;\r\n  dbits = 30;\r\n}\r\nelse if(j_lm && (navigator.appName != \"Netscape\")) {\r\n  BigInteger.prototype.am = am1;\r\n  dbits = 26;\r\n}\r\nelse { // Mozilla/Netscape seems to prefer am3\r\n  BigInteger.prototype.am = am3;\r\n  dbits = 28;\r\n}\r\n\r\nBigInteger.prototype.DB = dbits;\r\nBigInteger.prototype.DM = ((1<<dbits)-1);\r\nBigInteger.prototype.DV = (1<<dbits);\r\n\r\nvar BI_FP = 52;\r\nBigInteger.prototype.FV = Math.pow(2,BI_FP);\r\nBigInteger.prototype.F1 = BI_FP-dbits;\r\nBigInteger.prototype.F2 = 2*dbits-BI_FP;\r\n\r\n// Digit conversions\r\nvar BI_RM = \"0123456789abcdefghijklmnopqrstuvwxyz\";\r\nvar BI_RC = [];\r\nvar rr,vv;\r\nrr = \"0\".charCodeAt(0);\r\nfor(vv = 0; vv <= 9; ++vv) BI_RC[rr++] = vv;\r\nrr = \"a\".charCodeAt(0);\r\nfor(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\r\nrr = \"A\".charCodeAt(0);\r\nfor(vv = 10; vv < 36; ++vv) BI_RC[rr++] = vv;\r\n\r\nexport function int2char(n) { return BI_RM.charAt(n); }\r\nexport function intAt(s,i) {\r\n  var c = BI_RC[s.charCodeAt(i)];\r\n  return (c==null)?-1:c;\r\n}\r\n\r\n// (protected) copy this to r\r\nfunction bnpCopyTo(r) {\r\n  for(var i = this.t-1; i >= 0; --i) r[i] = this[i];\r\n  r.t = this.t;\r\n  r.s = this.s;\r\n}\r\n\r\n// (protected) set from integer value x, -DV <= x < DV\r\nfunction bnpFromInt(x) {\r\n  this.t = 1;\r\n  this.s = (x<0)?-1:0;\r\n  if(x > 0) this[0] = x;\r\n  else if(x < -1) this[0] = x+this.DV;\r\n  else this.t = 0;\r\n}\r\n\r\n// return bigint initialized to value\r\nexport function nbv(i) { var r = nbi(); r.fromInt(i); return r; }\r\n\r\n// (protected) set from string and radix\r\nfunction bnpFromString(s,b) {\r\n  var k;\r\n  if(b == 16) k = 4;\r\n  else if(b == 8) k = 3;\r\n  else if(b == 256) k = 8; // byte array\r\n  else if(b == 2) k = 1;\r\n  else if(b == 32) k = 5;\r\n  else if(b == 4) k = 2;\r\n  else { this.fromRadix(s,b); return; }\r\n  this.t = 0;\r\n  this.s = 0;\r\n  var i = s.length, mi = false, sh = 0;\r\n  while(--i >= 0) {\r\n    var x = (k==8)?s[i]&0xff:intAt(s,i);\r\n    if(x < 0) {\r\n      if(s.charAt(i) == \"-\") mi = true;\r\n      continue;\r\n    }\r\n    mi = false;\r\n    if(sh == 0)\r\n      this[this.t++] = x;\r\n    else if(sh+k > this.DB) {\r\n      this[this.t-1] |= (x&((1<<(this.DB-sh))-1))<<sh;\r\n      this[this.t++] = (x>>(this.DB-sh));\r\n    }\r\n    else\r\n      this[this.t-1] |= x<<sh;\r\n    sh += k;\r\n    if(sh >= this.DB) sh -= this.DB;\r\n  }\r\n  if(k == 8 && (s[0]&0x80) != 0) {\r\n    this.s = -1;\r\n    if(sh > 0) this[this.t-1] |= ((1<<(this.DB-sh))-1)<<sh;\r\n  }\r\n  this.clamp();\r\n  if(mi) BigInteger.ZERO.subTo(this,this);\r\n}\r\n\r\n// (protected) clamp off excess high words\r\nfunction bnpClamp() {\r\n  var c = this.s&this.DM;\r\n  while(this.t > 0 && this[this.t-1] == c) --this.t;\r\n}\r\n\r\n// (public) return string representation in given radix\r\nfunction bnToString(b) {\r\n  if(this.s < 0) return \"-\"+this.negate().toString(b);\r\n  var k;\r\n  if(b == 16) k = 4;\r\n  else if(b == 8) k = 3;\r\n  else if(b == 2) k = 1;\r\n  else if(b == 32) k = 5;\r\n  else if(b == 4) k = 2;\r\n  else return this.toRadix(b);\r\n  var km = (1<<k)-1, d, m = false, r = \"\", i = this.t;\r\n  var p = this.DB-(i*this.DB)%k;\r\n  if(i-- > 0) {\r\n    if(p < this.DB && (d = this[i]>>p) > 0) { m = true; r = int2char(d); }\r\n    while(i >= 0) {\r\n      if(p < k) {\r\n        d = (this[i]&((1<<p)-1))<<(k-p);\r\n        d |= this[--i]>>(p+=this.DB-k);\r\n      }\r\n      else {\r\n        d = (this[i]>>(p-=k))&km;\r\n        if(p <= 0) { p += this.DB; --i; }\r\n      }\r\n      if(d > 0) m = true;\r\n      if(m) r += int2char(d);\r\n    }\r\n  }\r\n  return m?r:\"0\";\r\n}\r\n\r\n// (public) -this\r\nfunction bnNegate() { var r = nbi(); BigInteger.ZERO.subTo(this,r); return r; }\r\n\r\n// (public) |this|\r\nfunction bnAbs() { return (this.s<0)?this.negate():this; }\r\n\r\n// (public) return + if this > a, - if this < a, 0 if equal\r\nfunction bnCompareTo(a) {\r\n  var r = this.s-a.s;\r\n  if(r != 0) return r;\r\n  var i = this.t;\r\n  r = i-a.t;\r\n  if(r != 0) return (this.s<0)?-r:r;\r\n  while(--i >= 0) if((r=this[i]-a[i]) != 0) return r;\r\n  return 0;\r\n}\r\n\r\n// returns bit length of the integer x\r\nexport function nbits(x) {\r\n  var r = 1, t;\r\n  if((t=x>>>16) != 0) { x = t; r += 16; }\r\n  if((t=x>>8) != 0) { x = t; r += 8; }\r\n  if((t=x>>4) != 0) { x = t; r += 4; }\r\n  if((t=x>>2) != 0) { x = t; r += 2; }\r\n  if((t=x>>1) != 0) { x = t; r += 1; }\r\n  return r;\r\n}\r\n\r\n// (public) return the number of bits in \"this\"\r\nfunction bnBitLength() {\r\n  if(this.t <= 0) return 0;\r\n  return this.DB*(this.t-1)+nbits(this[this.t-1]^(this.s&this.DM));\r\n}\r\n\r\n// (protected) r = this << n*DB\r\nfunction bnpDLShiftTo(n,r) {\r\n  var i;\r\n  for(i = this.t-1; i >= 0; --i) r[i+n] = this[i];\r\n  for(i = n-1; i >= 0; --i) r[i] = 0;\r\n  r.t = this.t+n;\r\n  r.s = this.s;\r\n}\r\n\r\n// (protected) r = this >> n*DB\r\nfunction bnpDRShiftTo(n,r) {\r\n  for(var i = n; i < this.t; ++i) r[i-n] = this[i];\r\n  r.t = Math.max(this.t-n,0);\r\n  r.s = this.s;\r\n}\r\n\r\n// (protected) r = this << n\r\nfunction bnpLShiftTo(n,r) {\r\n  var bs = n%this.DB;\r\n  var cbs = this.DB-bs;\r\n  var bm = (1<<cbs)-1;\r\n  var ds = Math.floor(n/this.DB), c = (this.s<<bs)&this.DM, i;\r\n  for(i = this.t-1; i >= 0; --i) {\r\n    r[i+ds+1] = (this[i]>>cbs)|c;\r\n    c = (this[i]&bm)<<bs;\r\n  }\r\n  for(i = ds-1; i >= 0; --i) r[i] = 0;\r\n  r[ds] = c;\r\n  r.t = this.t+ds+1;\r\n  r.s = this.s;\r\n  r.clamp();\r\n}\r\n\r\n// (protected) r = this >> n\r\nfunction bnpRShiftTo(n,r) {\r\n  r.s = this.s;\r\n  var ds = Math.floor(n/this.DB);\r\n  if(ds >= this.t) { r.t = 0; return; }\r\n  var bs = n%this.DB;\r\n  var cbs = this.DB-bs;\r\n  var bm = (1<<bs)-1;\r\n  r[0] = this[ds]>>bs;\r\n  for(var i = ds+1; i < this.t; ++i) {\r\n    r[i-ds-1] |= (this[i]&bm)<<cbs;\r\n    r[i-ds] = this[i]>>bs;\r\n  }\r\n  if(bs > 0) r[this.t-ds-1] |= (this.s&bm)<<cbs;\r\n  r.t = this.t-ds;\r\n  r.clamp();\r\n}\r\n\r\n// (protected) r = this - a\r\nfunction bnpSubTo(a,r) {\r\n  var i = 0, c = 0, m = Math.min(a.t,this.t);\r\n  while(i < m) {\r\n    c += this[i]-a[i];\r\n    r[i++] = c&this.DM;\r\n    c >>= this.DB;\r\n  }\r\n  if(a.t < this.t) {\r\n    c -= a.s;\r\n    while(i < this.t) {\r\n      c += this[i];\r\n      r[i++] = c&this.DM;\r\n      c >>= this.DB;\r\n    }\r\n    c += this.s;\r\n  }\r\n  else {\r\n    c += this.s;\r\n    while(i < a.t) {\r\n      c -= a[i];\r\n      r[i++] = c&this.DM;\r\n      c >>= this.DB;\r\n    }\r\n    c -= a.s;\r\n  }\r\n  r.s = (c<0)?-1:0;\r\n  if(c < -1) r[i++] = this.DV+c;\r\n  else if(c > 0) r[i++] = c;\r\n  r.t = i;\r\n  r.clamp();\r\n}\r\n\r\n// (protected) r = this * a, r != this,a (HAC 14.12)\r\n// \"this\" should be the larger one if appropriate.\r\nfunction bnpMultiplyTo(a,r) {\r\n  var x = this.abs(), y = a.abs();\r\n  var i = x.t;\r\n  r.t = i+y.t;\r\n  while(--i >= 0) r[i] = 0;\r\n  for(i = 0; i < y.t; ++i) r[i+x.t] = x.am(0,y[i],r,i,0,x.t);\r\n  r.s = 0;\r\n  r.clamp();\r\n  if(this.s != a.s) BigInteger.ZERO.subTo(r,r);\r\n}\r\n\r\n// (protected) r = this^2, r != this (HAC 14.16)\r\nfunction bnpSquareTo(r) {\r\n  var x = this.abs();\r\n  var i = r.t = 2*x.t;\r\n  while(--i >= 0) r[i] = 0;\r\n  for(i = 0; i < x.t-1; ++i) {\r\n    var c = x.am(i,x[i],r,2*i,0,1);\r\n    if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1)) >= x.DV) {\r\n      r[i+x.t] -= x.DV;\r\n      r[i+x.t+1] = 1;\r\n    }\r\n  }\r\n  if(r.t > 0) r[r.t-1] += x.am(i,x[i],r,2*i,0,1);\r\n  r.s = 0;\r\n  r.clamp();\r\n}\r\n\r\n// (protected) divide this by m, quotient and remainder to q, r (HAC 14.20)\r\n// r != q, this != m.  q or r may be null.\r\nfunction bnpDivRemTo(m,q,r) {\r\n  var pm = m.abs();\r\n  if(pm.t <= 0) return;\r\n  var pt = this.abs();\r\n  if(pt.t < pm.t) {\r\n    if(q != null) q.fromInt(0);\r\n    if(r != null) this.copyTo(r);\r\n    return;\r\n  }\r\n  if(r == null) r = nbi();\r\n  var y = nbi(), ts = this.s, ms = m.s;\r\n  var nsh = this.DB-nbits(pm[pm.t-1]);\t// normalize modulus\r\n  if(nsh > 0) { pm.lShiftTo(nsh,y); pt.lShiftTo(nsh,r); }\r\n  else { pm.copyTo(y); pt.copyTo(r); }\r\n  var ys = y.t;\r\n  var y0 = y[ys-1];\r\n  if(y0 == 0) return;\r\n  var yt = y0*(1<<this.F1)+((ys>1)?y[ys-2]>>this.F2:0);\r\n  var d1 = this.FV/yt, d2 = (1<<this.F1)/yt, e = 1<<this.F2;\r\n  var i = r.t, j = i-ys, t = (q==null)?nbi():q;\r\n  y.dlShiftTo(j,t);\r\n  if(r.compareTo(t) >= 0) {\r\n    r[r.t++] = 1;\r\n    r.subTo(t,r);\r\n  }\r\n  BigInteger.ONE.dlShiftTo(ys,t);\r\n  t.subTo(y,y);\t// \"negative\" y so we can replace sub with am later\r\n  while(y.t < ys) y[y.t++] = 0;\r\n  while(--j >= 0) {\r\n    // Estimate quotient digit\r\n    var qd = (r[--i]==y0)?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);\r\n    if((r[i]+=y.am(0,qd,r,j,0,ys)) < qd) {\t// Try it out\r\n      y.dlShiftTo(j,t);\r\n      r.subTo(t,r);\r\n      while(r[i] < --qd) r.subTo(t,r);\r\n    }\r\n  }\r\n  if(q != null) {\r\n    r.drShiftTo(ys,q);\r\n    if(ts != ms) BigInteger.ZERO.subTo(q,q);\r\n  }\r\n  r.t = ys;\r\n  r.clamp();\r\n  if(nsh > 0) r.rShiftTo(nsh,r);\t// Denormalize remainder\r\n  if(ts < 0) BigInteger.ZERO.subTo(r,r);\r\n}\r\n\r\n// (public) this mod a\r\nfunction bnMod(a) {\r\n  var r = nbi();\r\n  this.abs().divRemTo(a,null,r);\r\n  if(this.s < 0 && r.compareTo(BigInteger.ZERO) > 0) a.subTo(r,r);\r\n  return r;\r\n}\r\n\r\n// Modular reduction using \"classic\" algorithm\r\nexport class Classic{\r\n  constructor(m){\r\n    this.m = m;\r\n  }\r\n}\r\nfunction cConvert(x) {\r\n  if(x.s < 0 || x.compareTo(this.m) >= 0) return x.mod(this.m);\r\n  else return x;\r\n}\r\nfunction cRevert(x) { return x; }\r\nfunction cReduce(x) { x.divRemTo(this.m,null,x); }\r\nfunction cMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\r\nfunction cSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\r\n\r\nClassic.prototype.convert = cConvert;\r\nClassic.prototype.revert = cRevert;\r\nClassic.prototype.reduce = cReduce;\r\nClassic.prototype.mulTo = cMulTo;\r\nClassic.prototype.sqrTo = cSqrTo;\r\n\r\n// (protected) return \"-1/this % 2^DB\"; useful for Mont. reduction\r\n// justification:\r\n//         xy == 1 (mod m)\r\n//         xy =  1+km\r\n//   xy(2-xy) = (1+km)(1-km)\r\n// x[y(2-xy)] = 1-k^2m^2\r\n// x[y(2-xy)] == 1 (mod m^2)\r\n// if y is 1/x mod m, then y(2-xy) is 1/x mod m^2\r\n// should reduce x and y(2-xy) by m^2 at each step to keep size bounded.\r\n// JS multiply \"overflows\" differently from C/C++, so care is needed here.\r\nfunction bnpInvDigit() {\r\n  if(this.t < 1) return 0;\r\n  var x = this[0];\r\n  if((x&1) == 0) return 0;\r\n  var y = x&3;\t\t// y == 1/x mod 2^2\r\n  y = (y*(2-(x&0xf)*y))&0xf;\t// y == 1/x mod 2^4\r\n  y = (y*(2-(x&0xff)*y))&0xff;\t// y == 1/x mod 2^8\r\n  y = (y*(2-(((x&0xffff)*y)&0xffff)))&0xffff;\t// y == 1/x mod 2^16\r\n  // last step - calculate inverse mod DV directly;\r\n  // assumes 16 < DB <= 32 and assumes ability to handle 48-bit ints\r\n  y = (y*(2-x*y%this.DV))%this.DV;\t\t// y == 1/x mod 2^dbits\r\n  // we really want the negative inverse, and -DV < y < DV\r\n  return (y>0)?this.DV-y:-y;\r\n}\r\n\r\n// Montgomery reduction\r\nexport class Montgomery {\r\n  constructor(m) {\r\n    this.m = m;\r\n    this.mp = m.invDigit();\r\n    this.mpl = this.mp & 0x7fff;\r\n    this.mph = this.mp >> 15;\r\n    this.um = (1 << (m.DB - 15)) - 1;\r\n    this.mt2 = 2 * m.t;\r\n  }\r\n}\r\n\r\n// xR mod m\r\nfunction montConvert(x) {\r\n  var r = nbi();\r\n  x.abs().dlShiftTo(this.m.t,r);\r\n  r.divRemTo(this.m,null,r);\r\n  if(x.s < 0 && r.compareTo(BigInteger.ZERO) > 0) this.m.subTo(r,r);\r\n  return r;\r\n}\r\n\r\n// x/R mod m\r\nfunction montRevert(x) {\r\n  var r = nbi();\r\n  x.copyTo(r);\r\n  this.reduce(r);\r\n  return r;\r\n}\r\n\r\n// x = x/R mod m (HAC 14.32)\r\nfunction montReduce(x) {\r\n  while(x.t <= this.mt2)\t// pad x so am has enough room later\r\n    x[x.t++] = 0;\r\n  for(var i = 0; i < this.m.t; ++i) {\r\n    // faster way of calculating u0 = x[i]*mp mod DV\r\n    var j = x[i]&0x7fff;\r\n    var u0 = (j*this.mpl+(((j*this.mph+(x[i]>>15)*this.mpl)&this.um)<<15))&x.DM;\r\n    // use am to combine the multiply-shift-add into one call\r\n    j = i+this.m.t;\r\n    x[j] += this.m.am(0,u0,x,i,0,this.m.t);\r\n    // propagate carry\r\n    while(x[j] >= x.DV) { x[j] -= x.DV; x[++j]++; }\r\n  }\r\n  x.clamp();\r\n  x.drShiftTo(this.m.t,x);\r\n  if(x.compareTo(this.m) >= 0) x.subTo(this.m,x);\r\n}\r\n\r\n// r = \"x^2/R mod m\"; x != r\r\nfunction montSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\r\n\r\n// r = \"xy/R mod m\"; x,y != r\r\nfunction montMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\r\n\r\nMontgomery.prototype.convert = montConvert;\r\nMontgomery.prototype.revert = montRevert;\r\nMontgomery.prototype.reduce = montReduce;\r\nMontgomery.prototype.mulTo = montMulTo;\r\nMontgomery.prototype.sqrTo = montSqrTo;\r\n\r\n// (protected) true iff this is even\r\nfunction bnpIsEven() { return ((this.t>0)?(this[0]&1):this.s) == 0; }\r\n\r\n// (protected) this^e, e < 2^32, doing sqr and mul with \"r\" (HAC 14.79)\r\nfunction bnpExp(e,z) {\r\n  if(e > 0xffffffff || e < 1) return BigInteger.ONE;\r\n  var r = nbi(), r2 = nbi(), g = z.convert(this), i = nbits(e)-1;\r\n  g.copyTo(r);\r\n  while(--i >= 0) {\r\n    z.sqrTo(r,r2);\r\n    if((e&(1<<i)) > 0) z.mulTo(r2,g,r);\r\n    else { var t = r; r = r2; r2 = t; }\r\n  }\r\n  return z.revert(r);\r\n}\r\n\r\n// (public) this^e % m, 0 <= e < 2^32\r\nfunction bnModPowInt(e,m) {\r\n  var z;\r\n  if(e < 256 || m.isEven()) z = new Classic(m); else z = new Montgomery(m);\r\n  return this.exp(e,z);\r\n}\r\n\r\n// protected\r\nBigInteger.prototype.copyTo = bnpCopyTo;\r\nBigInteger.prototype.fromInt = bnpFromInt;\r\nBigInteger.prototype.fromString = bnpFromString;\r\nBigInteger.prototype.clamp = bnpClamp;\r\nBigInteger.prototype.dlShiftTo = bnpDLShiftTo;\r\nBigInteger.prototype.drShiftTo = bnpDRShiftTo;\r\nBigInteger.prototype.lShiftTo = bnpLShiftTo;\r\nBigInteger.prototype.rShiftTo = bnpRShiftTo;\r\nBigInteger.prototype.subTo = bnpSubTo;\r\nBigInteger.prototype.multiplyTo = bnpMultiplyTo;\r\nBigInteger.prototype.squareTo = bnpSquareTo;\r\nBigInteger.prototype.divRemTo = bnpDivRemTo;\r\nBigInteger.prototype.invDigit = bnpInvDigit;\r\nBigInteger.prototype.isEven = bnpIsEven;\r\nBigInteger.prototype.exp = bnpExp;\r\n\r\n// public\r\nBigInteger.prototype.toString = bnToString;\r\nBigInteger.prototype.negate = bnNegate;\r\nBigInteger.prototype.abs = bnAbs;\r\nBigInteger.prototype.compareTo = bnCompareTo;\r\nBigInteger.prototype.bitLength = bnBitLength;\r\nBigInteger.prototype.mod = bnMod;\r\nBigInteger.prototype.modPowInt = bnModPowInt;\r\n\r\n// \"constants\"\r\nBigInteger.ZERO = nbv(0);\r\nBigInteger.ONE = nbv(1);\r\n","// Copyright (c) 2005-2009  Tom Wu\r\n// All Rights Reserved.\r\n// See \"LICENSE\" for details.\r\n\r\n// Extended JavaScript BN functions, required for RSA private ops.\r\n\r\n// Version 1.1: new BigInteger(\"0\", 10) returns \"proper\" zero\r\n// Version 1.2: square() API, isProbablePrime fix\r\n\r\nimport {BigInteger, nbi, nbv, nbits, intAt, Classic, Montgomery} from \"./jsbn\";\r\nexport {BigInteger} from \"./jsbn\";\r\n// (public)\r\nfunction bnClone() { var r = nbi(); this.copyTo(r); return r; }\r\n\r\n// (public) return value as integer\r\nfunction bnIntValue() {\r\n  if(this.s < 0) {\r\n    if(this.t == 1) return this[0]-this.DV;\r\n    else if(this.t == 0) return -1;\r\n  }\r\n  else if(this.t == 1) return this[0];\r\n  else if(this.t == 0) return 0;\r\n  // assumes 16 < DB < 32\r\n  return ((this[1]&((1<<(32-this.DB))-1))<<this.DB)|this[0];\r\n}\r\n\r\n// (public) return value as byte\r\nfunction bnByteValue() { return (this.t==0)?this.s:(this[0]<<24)>>24; }\r\n\r\n// (public) return value as short (assumes DB>=16)\r\nfunction bnShortValue() { return (this.t==0)?this.s:(this[0]<<16)>>16; }\r\n\r\n// (protected) return x s.t. r^x < DV\r\nfunction bnpChunkSize(r) { return Math.floor(Math.LN2*this.DB/Math.log(r)); }\r\n\r\n// (public) 0 if this == 0, 1 if this > 0\r\nfunction bnSigNum() {\r\n  if(this.s < 0) return -1;\r\n  else if(this.t <= 0 || (this.t == 1 && this[0] <= 0)) return 0;\r\n  else return 1;\r\n}\r\n\r\n// (protected) convert to radix string\r\nfunction bnpToRadix(b) {\r\n  if(b == null) b = 10;\r\n  if(this.signum() == 0 || b < 2 || b > 36) return \"0\";\r\n  var cs = this.chunkSize(b);\r\n  var a = Math.pow(b,cs);\r\n  var d = nbv(a), y = nbi(), z = nbi(), r = \"\";\r\n  this.divRemTo(d,y,z);\r\n  while(y.signum() > 0) {\r\n    r = (a+z.intValue()).toString(b).substr(1) + r;\r\n    y.divRemTo(d,y,z);\r\n  }\r\n  return z.intValue().toString(b) + r;\r\n}\r\n\r\n// (protected) convert from radix string\r\nfunction bnpFromRadix(s,b) {\r\n  this.fromInt(0);\r\n  if(b == null) b = 10;\r\n  var cs = this.chunkSize(b);\r\n  var d = Math.pow(b,cs), mi = false, j = 0, w = 0;\r\n  for(var i = 0; i < s.length; ++i) {\r\n    var x = intAt(s,i);\r\n    if(x < 0) {\r\n      if(s.charAt(i) == \"-\" && this.signum() == 0) mi = true;\r\n      continue;\r\n    }\r\n    w = b*w+x;\r\n    if(++j >= cs) {\r\n      this.dMultiply(d);\r\n      this.dAddOffset(w,0);\r\n      j = 0;\r\n      w = 0;\r\n    }\r\n  }\r\n  if(j > 0) {\r\n    this.dMultiply(Math.pow(b,j));\r\n    this.dAddOffset(w,0);\r\n  }\r\n  if(mi) BigInteger.ZERO.subTo(this,this);\r\n}\r\n\r\n// (protected) alternate constructor\r\nfunction bnpFromNumber(a,b,c) {\r\n  if(\"number\" == typeof b) {\r\n    // new BigInteger(int,int,RNG)\r\n    if(a < 2) this.fromInt(1);\r\n    else {\r\n      this.fromNumber(a,c);\r\n      if(!this.testBit(a-1))\t// force MSB set\r\n        this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);\r\n      if(this.isEven()) this.dAddOffset(1,0); // force odd\r\n      while(!this.isProbablePrime(b)) {\r\n        this.dAddOffset(2,0);\r\n        if(this.bitLength() > a) this.subTo(BigInteger.ONE.shiftLeft(a-1),this);\r\n      }\r\n    }\r\n  }\r\n  else {\r\n    // new BigInteger(int,RNG)\r\n    var x = [], t = a&7;\r\n    x.length = (a>>3)+1;\r\n    b.nextBytes(x);\r\n    if(t > 0) x[0] &= ((1<<t)-1); else x[0] = 0;\r\n    this.fromString(x,256);\r\n  }\r\n}\r\n\r\n// (public) convert to bigendian byte array\r\nfunction bnToByteArray() {\r\n  var i = this.t, r = [];\r\n  r[0] = this.s;\r\n  var p = this.DB-(i*this.DB)%8, d, k = 0;\r\n  if(i-- > 0) {\r\n    if(p < this.DB && (d = this[i]>>p) != (this.s&this.DM)>>p)\r\n      r[k++] = d|(this.s<<(this.DB-p));\r\n    while(i >= 0) {\r\n      if(p < 8) {\r\n        d = (this[i]&((1<<p)-1))<<(8-p);\r\n        d |= this[--i]>>(p+=this.DB-8);\r\n      }\r\n      else {\r\n        d = (this[i]>>(p-=8))&0xff;\r\n        if(p <= 0) { p += this.DB; --i; }\r\n      }\r\n      if((d&0x80) != 0) d |= -256;\r\n      if(k == 0 && (this.s&0x80) != (d&0x80)) ++k;\r\n      if(k > 0 || d != this.s) r[k++] = d;\r\n    }\r\n  }\r\n  return r;\r\n}\r\n\r\nfunction bnEquals(a) { return(this.compareTo(a)==0); }\r\nfunction bnMin(a) { return(this.compareTo(a)<0)?this:a; }\r\nfunction bnMax(a) { return(this.compareTo(a)>0)?this:a; }\r\n\r\n// (protected) r = this op a (bitwise)\r\nfunction bnpBitwiseTo(a,op,r) {\r\n  var i, f, m = Math.min(a.t,this.t);\r\n  for(i = 0; i < m; ++i) r[i] = op(this[i],a[i]);\r\n  if(a.t < this.t) {\r\n    f = a.s&this.DM;\r\n    for(i = m; i < this.t; ++i) r[i] = op(this[i],f);\r\n    r.t = this.t;\r\n  }\r\n  else {\r\n    f = this.s&this.DM;\r\n    for(i = m; i < a.t; ++i) r[i] = op(f,a[i]);\r\n    r.t = a.t;\r\n  }\r\n  r.s = op(this.s,a.s);\r\n  r.clamp();\r\n}\r\n\r\n// (public) this & a\r\nfunction op_and(x,y) { return x&y; }\r\nfunction bnAnd(a) { var r = nbi(); this.bitwiseTo(a,op_and,r); return r; }\r\n\r\n// (public) this | a\r\nfunction op_or(x,y) { return x|y; }\r\nfunction bnOr(a) { var r = nbi(); this.bitwiseTo(a,op_or,r); return r; }\r\n\r\n// (public) this ^ a\r\nfunction op_xor(x,y) { return x^y; }\r\nfunction bnXor(a) { var r = nbi(); this.bitwiseTo(a,op_xor,r); return r; }\r\n\r\n// (public) this & ~a\r\nfunction op_andnot(x,y) { return x&~y; }\r\nfunction bnAndNot(a) { var r = nbi(); this.bitwiseTo(a,op_andnot,r); return r; }\r\n\r\n// (public) ~this\r\nfunction bnNot() {\r\n  var r = nbi();\r\n  for(var i = 0; i < this.t; ++i) r[i] = this.DM&~this[i];\r\n  r.t = this.t;\r\n  r.s = ~this.s;\r\n  return r;\r\n}\r\n\r\n// (public) this << n\r\nfunction bnShiftLeft(n) {\r\n  var r = nbi();\r\n  if(n < 0) this.rShiftTo(-n,r); else this.lShiftTo(n,r);\r\n  return r;\r\n}\r\n\r\n// (public) this >> n\r\nfunction bnShiftRight(n) {\r\n  var r = nbi();\r\n  if(n < 0) this.lShiftTo(-n,r); else this.rShiftTo(n,r);\r\n  return r;\r\n}\r\n\r\n// return index of lowest 1-bit in x, x < 2^31\r\nfunction lbit(x) {\r\n  if(x == 0) return -1;\r\n  var r = 0;\r\n  if((x&0xffff) == 0) { x >>= 16; r += 16; }\r\n  if((x&0xff) == 0) { x >>= 8; r += 8; }\r\n  if((x&0xf) == 0) { x >>= 4; r += 4; }\r\n  if((x&3) == 0) { x >>= 2; r += 2; }\r\n  if((x&1) == 0) ++r;\r\n  return r;\r\n}\r\n\r\n// (public) returns index of lowest 1-bit (or -1 if none)\r\nfunction bnGetLowestSetBit() {\r\n  for(var i = 0; i < this.t; ++i)\r\n    if(this[i] != 0) return i*this.DB+lbit(this[i]);\r\n  if(this.s < 0) return this.t*this.DB;\r\n  return -1;\r\n}\r\n\r\n// return number of 1 bits in x\r\nfunction cbit(x) {\r\n  var r = 0;\r\n  while(x != 0) { x &= x-1; ++r; }\r\n  return r;\r\n}\r\n\r\n// (public) return number of set bits\r\nfunction bnBitCount() {\r\n  var r = 0, x = this.s&this.DM;\r\n  for(var i = 0; i < this.t; ++i) r += cbit(this[i]^x);\r\n  return r;\r\n}\r\n\r\n// (public) true iff nth bit is set\r\nfunction bnTestBit(n) {\r\n  var j = Math.floor(n/this.DB);\r\n  if(j >= this.t) return(this.s!=0);\r\n  return((this[j]&(1<<(n%this.DB)))!=0);\r\n}\r\n\r\n// (protected) this op (1<<n)\r\nfunction bnpChangeBit(n,op) {\r\n  var r = BigInteger.ONE.shiftLeft(n);\r\n  this.bitwiseTo(r,op,r);\r\n  return r;\r\n}\r\n\r\n// (public) this | (1<<n)\r\nfunction bnSetBit(n) { return this.changeBit(n,op_or); }\r\n\r\n// (public) this & ~(1<<n)\r\nfunction bnClearBit(n) { return this.changeBit(n,op_andnot); }\r\n\r\n// (public) this ^ (1<<n)\r\nfunction bnFlipBit(n) { return this.changeBit(n,op_xor); }\r\n\r\n// (protected) r = this + a\r\nfunction bnpAddTo(a,r) {\r\n  var i = 0, c = 0, m = Math.min(a.t,this.t);\r\n  while(i < m) {\r\n    c += this[i]+a[i];\r\n    r[i++] = c&this.DM;\r\n    c >>= this.DB;\r\n  }\r\n  if(a.t < this.t) {\r\n    c += a.s;\r\n    while(i < this.t) {\r\n      c += this[i];\r\n      r[i++] = c&this.DM;\r\n      c >>= this.DB;\r\n    }\r\n    c += this.s;\r\n  }\r\n  else {\r\n    c += this.s;\r\n    while(i < a.t) {\r\n      c += a[i];\r\n      r[i++] = c&this.DM;\r\n      c >>= this.DB;\r\n    }\r\n    c += a.s;\r\n  }\r\n  r.s = (c<0)?-1:0;\r\n  if(c > 0) r[i++] = c;\r\n  else if(c < -1) r[i++] = this.DV+c;\r\n  r.t = i;\r\n  r.clamp();\r\n}\r\n\r\n// (public) this + a\r\nfunction bnAdd(a) { var r = nbi(); this.addTo(a,r); return r; }\r\n\r\n// (public) this - a\r\nfunction bnSubtract(a) { var r = nbi(); this.subTo(a,r); return r; }\r\n\r\n// (public) this * a\r\nfunction bnMultiply(a) { var r = nbi(); this.multiplyTo(a,r); return r; }\r\n\r\n// (public) this^2\r\nfunction bnSquare() { var r = nbi(); this.squareTo(r); return r; }\r\n\r\n// (public) this / a\r\nfunction bnDivide(a) { var r = nbi(); this.divRemTo(a,r,null); return r; }\r\n\r\n// (public) this % a\r\nfunction bnRemainder(a) { var r = nbi(); this.divRemTo(a,null,r); return r; }\r\n\r\n// (public) [this/a,this%a]\r\nfunction bnDivideAndRemainder(a) {\r\n  var q = nbi(), r = nbi();\r\n  this.divRemTo(a,q,r);\r\n  return new Array(q,r);\r\n}\r\n\r\n// (protected) this *= n, this >= 0, 1 < n < DV\r\nfunction bnpDMultiply(n) {\r\n  this[this.t] = this.am(0,n-1,this,0,0,this.t);\r\n  ++this.t;\r\n  this.clamp();\r\n}\r\n\r\n// (protected) this += n << w words, this >= 0\r\nfunction bnpDAddOffset(n,w) {\r\n  if(n == 0) return;\r\n  while(this.t <= w) this[this.t++] = 0;\r\n  this[w] += n;\r\n  while(this[w] >= this.DV) {\r\n    this[w] -= this.DV;\r\n    if(++w >= this.t) this[this.t++] = 0;\r\n    ++this[w];\r\n  }\r\n}\r\n\r\n// A \"null\" reducer\r\nfunction NullExp() {}\r\nfunction nNop(x) { return x; }\r\nfunction nMulTo(x,y,r) { x.multiplyTo(y,r); }\r\nfunction nSqrTo(x,r) { x.squareTo(r); }\r\n\r\nNullExp.prototype.convert = nNop;\r\nNullExp.prototype.revert = nNop;\r\nNullExp.prototype.mulTo = nMulTo;\r\nNullExp.prototype.sqrTo = nSqrTo;\r\n\r\n// (public) this^e\r\nfunction bnPow(e) { return this.exp(e,new NullExp()); }\r\n\r\n// (protected) r = lower n words of \"this * a\", a.t <= n\r\n// \"this\" should be the larger one if appropriate.\r\nfunction bnpMultiplyLowerTo(a,n,r) {\r\n  var i = Math.min(this.t+a.t,n);\r\n  r.s = 0; // assumes a,this >= 0\r\n  r.t = i;\r\n  while(i > 0) r[--i] = 0;\r\n  var j;\r\n  for(j = r.t-this.t; i < j; ++i) r[i+this.t] = this.am(0,a[i],r,i,0,this.t);\r\n  for(j = Math.min(a.t,n); i < j; ++i) this.am(0,a[i],r,i,0,n-i);\r\n  r.clamp();\r\n}\r\n\r\n// (protected) r = \"this * a\" without lower n words, n > 0\r\n// \"this\" should be the larger one if appropriate.\r\nfunction bnpMultiplyUpperTo(a,n,r) {\r\n  --n;\r\n  var i = r.t = this.t+a.t-n;\r\n  r.s = 0; // assumes a,this >= 0\r\n  while(--i >= 0) r[i] = 0;\r\n  for(i = Math.max(n-this.t,0); i < a.t; ++i)\r\n    r[this.t+i-n] = this.am(n-i,a[i],r,0,0,this.t+i-n);\r\n  r.clamp();\r\n  r.drShiftTo(1,r);\r\n}\r\n\r\n// Barrett modular reduction\r\nfunction Barrett(m) {\r\n  // setup Barrett\r\n  this.r2 = nbi();\r\n  this.q3 = nbi();\r\n  BigInteger.ONE.dlShiftTo(2*m.t,this.r2);\r\n  this.mu = this.r2.divide(m);\r\n  this.m = m;\r\n}\r\n\r\nfunction barrettConvert(x) {\r\n  if(x.s < 0 || x.t > 2*this.m.t) return x.mod(this.m);\r\n  else if(x.compareTo(this.m) < 0) return x;\r\n  else { var r = nbi(); x.copyTo(r); this.reduce(r); return r; }\r\n}\r\n\r\nfunction barrettRevert(x) { return x; }\r\n\r\n// x = x mod m (HAC 14.42)\r\nfunction barrettReduce(x) {\r\n  x.drShiftTo(this.m.t-1,this.r2);\r\n  if(x.t > this.m.t+1) { x.t = this.m.t+1; x.clamp(); }\r\n  this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);\r\n  this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);\r\n  while(x.compareTo(this.r2) < 0) x.dAddOffset(1,this.m.t+1);\r\n  x.subTo(this.r2,x);\r\n  while(x.compareTo(this.m) >= 0) x.subTo(this.m,x);\r\n}\r\n\r\n// r = x^2 mod m; x != r\r\nfunction barrettSqrTo(x,r) { x.squareTo(r); this.reduce(r); }\r\n\r\n// r = x*y mod m; x,y != r\r\nfunction barrettMulTo(x,y,r) { x.multiplyTo(y,r); this.reduce(r); }\r\n\r\nBarrett.prototype.convert = barrettConvert;\r\nBarrett.prototype.revert = barrettRevert;\r\nBarrett.prototype.reduce = barrettReduce;\r\nBarrett.prototype.mulTo = barrettMulTo;\r\nBarrett.prototype.sqrTo = barrettSqrTo;\r\n\r\n// (public) this^e % m (HAC 14.85)\r\nfunction bnModPow(e,m) {\r\n  var i = e.bitLength(), k, r = nbv(1), z;\r\n  if(i <= 0) return r;\r\n  else if(i < 18) k = 1;\r\n  else if(i < 48) k = 3;\r\n  else if(i < 144) k = 4;\r\n  else if(i < 768) k = 5;\r\n  else k = 6;\r\n  if(i < 8)\r\n    z = new Classic(m);\r\n  else if(m.isEven())\r\n    z = new Barrett(m);\r\n  else\r\n    z = new Montgomery(m);\r\n\r\n  // precomputation\r\n  var g = [], n = 3, k1 = k-1, km = (1<<k)-1;\r\n  g[1] = z.convert(this);\r\n  if(k > 1) {\r\n    var g2 = nbi();\r\n    z.sqrTo(g[1],g2);\r\n    while(n <= km) {\r\n      g[n] = nbi();\r\n      z.mulTo(g2,g[n-2],g[n]);\r\n      n += 2;\r\n    }\r\n  }\r\n\r\n  var j = e.t-1, w, is1 = true, r2 = nbi(), t;\r\n  i = nbits(e[j])-1;\r\n  while(j >= 0) {\r\n    if(i >= k1) w = (e[j]>>(i-k1))&km;\r\n    else {\r\n      w = (e[j]&((1<<(i+1))-1))<<(k1-i);\r\n      if(j > 0) w |= e[j-1]>>(this.DB+i-k1);\r\n    }\r\n\r\n    n = k;\r\n    while((w&1) == 0) { w >>= 1; --n; }\r\n    if((i -= n) < 0) { i += this.DB; --j; }\r\n    if(is1) {\t// ret == 1, don't bother squaring or multiplying it\r\n      g[w].copyTo(r);\r\n      is1 = false;\r\n    }\r\n    else {\r\n      while(n > 1) { z.sqrTo(r,r2); z.sqrTo(r2,r); n -= 2; }\r\n      if(n > 0) z.sqrTo(r,r2); else { t = r; r = r2; r2 = t; }\r\n      z.mulTo(r2,g[w],r);\r\n    }\r\n\r\n    while(j >= 0 && (e[j]&(1<<i)) == 0) {\r\n      z.sqrTo(r,r2); t = r; r = r2; r2 = t;\r\n      if(--i < 0) { i = this.DB-1; --j; }\r\n    }\r\n  }\r\n  return z.revert(r);\r\n}\r\n\r\n// (public) gcd(this,a) (HAC 14.54)\r\nfunction bnGCD(a) {\r\n  var x = (this.s<0)?this.negate():this.clone();\r\n  var y = (a.s<0)?a.negate():a.clone();\r\n  if(x.compareTo(y) < 0) { var t = x; x = y; y = t; }\r\n  var i = x.getLowestSetBit(), g = y.getLowestSetBit();\r\n  if(g < 0) return x;\r\n  if(i < g) g = i;\r\n  if(g > 0) {\r\n    x.rShiftTo(g,x);\r\n    y.rShiftTo(g,y);\r\n  }\r\n  while(x.signum() > 0) {\r\n    if((i = x.getLowestSetBit()) > 0) x.rShiftTo(i,x);\r\n    if((i = y.getLowestSetBit()) > 0) y.rShiftTo(i,y);\r\n    if(x.compareTo(y) >= 0) {\r\n      x.subTo(y,x);\r\n      x.rShiftTo(1,x);\r\n    }\r\n    else {\r\n      y.subTo(x,y);\r\n      y.rShiftTo(1,y);\r\n    }\r\n  }\r\n  if(g > 0) y.lShiftTo(g,y);\r\n  return y;\r\n}\r\n\r\n// (protected) this % n, n < 2^26\r\nfunction bnpModInt(n) {\r\n  if(n <= 0) return 0;\r\n  var d = this.DV%n, r = (this.s<0)?n-1:0;\r\n  if(this.t > 0)\r\n    if(d == 0) r = this[0]%n;\r\n    else for(var i = this.t-1; i >= 0; --i) r = (d*r+this[i])%n;\r\n  return r;\r\n}\r\n\r\n// (public) 1/this % m (HAC 14.61)\r\nfunction bnModInverse(m) {\r\n  var ac = m.isEven();\r\n  if((this.isEven() && ac) || m.signum() == 0) return BigInteger.ZERO;\r\n  var u = m.clone(), v = this.clone();\r\n  var a = nbv(1), b = nbv(0), c = nbv(0), d = nbv(1);\r\n  while(u.signum() != 0) {\r\n    while(u.isEven()) {\r\n      u.rShiftTo(1,u);\r\n      if(ac) {\r\n        if(!a.isEven() || !b.isEven()) { a.addTo(this,a); b.subTo(m,b); }\r\n        a.rShiftTo(1,a);\r\n      }\r\n      else if(!b.isEven()) b.subTo(m,b);\r\n      b.rShiftTo(1,b);\r\n    }\r\n    while(v.isEven()) {\r\n      v.rShiftTo(1,v);\r\n      if(ac) {\r\n        if(!c.isEven() || !d.isEven()) { c.addTo(this,c); d.subTo(m,d); }\r\n        c.rShiftTo(1,c);\r\n      }\r\n      else if(!d.isEven()) d.subTo(m,d);\r\n      d.rShiftTo(1,d);\r\n    }\r\n    if(u.compareTo(v) >= 0) {\r\n      u.subTo(v,u);\r\n      if(ac) a.subTo(c,a);\r\n      b.subTo(d,b);\r\n    }\r\n    else {\r\n      v.subTo(u,v);\r\n      if(ac) c.subTo(a,c);\r\n      d.subTo(b,d);\r\n    }\r\n  }\r\n  if(v.compareTo(BigInteger.ONE) != 0) return BigInteger.ZERO;\r\n  if(d.compareTo(m) >= 0) return d.subtract(m);\r\n  if(d.signum() < 0) d.addTo(m,d); else return d;\r\n  if(d.signum() < 0) return d.add(m); else return d;\r\n}\r\n\r\nvar lowprimes = [2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];\r\nvar lplim = (1<<26)/lowprimes[lowprimes.length-1];\r\n\r\n// (public) test primality with certainty >= 1-.5^t\r\nfunction bnIsProbablePrime(t) {\r\n  var i, x = this.abs();\r\n  if(x.t == 1 && x[0] <= lowprimes[lowprimes.length-1]) {\r\n    for(i = 0; i < lowprimes.length; ++i)\r\n      if(x[0] == lowprimes[i]) return true;\r\n    return false;\r\n  }\r\n  if(x.isEven()) return false;\r\n  i = 1;\r\n  while(i < lowprimes.length) {\r\n    var m = lowprimes[i], j = i+1;\r\n    while(j < lowprimes.length && m < lplim) m *= lowprimes[j++];\r\n    m = x.modInt(m);\r\n    while(i < j) if(m%lowprimes[i++] == 0) return false;\r\n  }\r\n  return x.millerRabin(t);\r\n}\r\n\r\n// (protected) true if probably prime (HAC 4.24, Miller-Rabin)\r\nfunction bnpMillerRabin(t) {\r\n  var n1 = this.subtract(BigInteger.ONE);\r\n  var k = n1.getLowestSetBit();\r\n  if(k <= 0) return false;\r\n  var r = n1.shiftRight(k);\r\n  t = (t+1)>>1;\r\n  if(t > lowprimes.length) t = lowprimes.length;\r\n  var a = nbi();\r\n  for(var i = 0; i < t; ++i) {\r\n    //Pick bases at random, instead of starting at 2\r\n    a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);\r\n    var y = a.modPow(r,this);\r\n    if(y.compareTo(BigInteger.ONE) != 0 && y.compareTo(n1) != 0) {\r\n      var j = 1;\r\n      while(j++ < k && y.compareTo(n1) != 0) {\r\n        y = y.modPowInt(2,this);\r\n        if(y.compareTo(BigInteger.ONE) == 0) return false;\r\n      }\r\n      if(y.compareTo(n1) != 0) return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n// protected\r\nBigInteger.prototype.chunkSize = bnpChunkSize;\r\nBigInteger.prototype.toRadix = bnpToRadix;\r\nBigInteger.prototype.fromRadix = bnpFromRadix;\r\nBigInteger.prototype.fromNumber = bnpFromNumber;\r\nBigInteger.prototype.bitwiseTo = bnpBitwiseTo;\r\nBigInteger.prototype.changeBit = bnpChangeBit;\r\nBigInteger.prototype.addTo = bnpAddTo;\r\nBigInteger.prototype.dMultiply = bnpDMultiply;\r\nBigInteger.prototype.dAddOffset = bnpDAddOffset;\r\nBigInteger.prototype.multiplyLowerTo = bnpMultiplyLowerTo;\r\nBigInteger.prototype.multiplyUpperTo = bnpMultiplyUpperTo;\r\nBigInteger.prototype.modInt = bnpModInt;\r\nBigInteger.prototype.millerRabin = bnpMillerRabin;\r\n\r\n// public\r\nBigInteger.prototype.clone = bnClone;\r\nBigInteger.prototype.intValue = bnIntValue;\r\nBigInteger.prototype.byteValue = bnByteValue;\r\nBigInteger.prototype.shortValue = bnShortValue;\r\nBigInteger.prototype.signum = bnSigNum;\r\nBigInteger.prototype.toByteArray = bnToByteArray;\r\nBigInteger.prototype.equals = bnEquals;\r\nBigInteger.prototype.min = bnMin;\r\nBigInteger.prototype.max = bnMax;\r\nBigInteger.prototype.and = bnAnd;\r\nBigInteger.prototype.or = bnOr;\r\nBigInteger.prototype.xor = bnXor;\r\nBigInteger.prototype.andNot = bnAndNot;\r\nBigInteger.prototype.not = bnNot;\r\nBigInteger.prototype.shiftLeft = bnShiftLeft;\r\nBigInteger.prototype.shiftRight = bnShiftRight;\r\nBigInteger.prototype.getLowestSetBit = bnGetLowestSetBit;\r\nBigInteger.prototype.bitCount = bnBitCount;\r\nBigInteger.prototype.testBit = bnTestBit;\r\nBigInteger.prototype.setBit = bnSetBit;\r\nBigInteger.prototype.clearBit = bnClearBit;\r\nBigInteger.prototype.flipBit = bnFlipBit;\r\nBigInteger.prototype.add = bnAdd;\r\nBigInteger.prototype.subtract = bnSubtract;\r\nBigInteger.prototype.multiply = bnMultiply;\r\nBigInteger.prototype.divide = bnDivide;\r\nBigInteger.prototype.remainder = bnRemainder;\r\nBigInteger.prototype.divideAndRemainder = bnDivideAndRemainder;\r\nBigInteger.prototype.modPow = bnModPow;\r\nBigInteger.prototype.modInverse = bnModInverse;\r\nBigInteger.prototype.pow = bnPow;\r\nBigInteger.prototype.gcd = bnGCD;\r\nBigInteger.prototype.isProbablePrime = bnIsProbablePrime;\r\n\r\n// JSBN-specific extension\r\nBigInteger.prototype.square = bnSquare;\r\n\r\n// BigInteger interfaces not implemented in jsbn:\r\n\r\n// BigInteger(int signum, byte[] magnitude)\r\n// double doubleValue()\r\n// float floatValue()\r\n// int hashCode()\r\n// long longValue()\r\n// static BigInteger valueOf(long val)\r\n","// Version 1.1: support utf-8 encoding in pkcs1pad2\r\n\r\n// convert a (hex) string to a bignum object\r\n\r\nimport {BigInteger} from \"./jsbn2\";\r\nimport {SecureRandom} from \"./rng\";\r\n\r\nexport function parseBigInt(str,r) {\r\n  return new BigInteger(str,r);\r\n}\r\n\r\nfunction linebrk(s,n) {\r\n  var ret = \"\";\r\n  var i = 0;\r\n  while(i + n < s.length) {\r\n    ret += s.substring(i,i+n) + \"\\n\";\r\n    i += n;\r\n  }\r\n  return ret + s.substring(i,s.length);\r\n}\r\n\r\nfunction byte2Hex(b) {\r\n  if(b < 0x10)\r\n    return \"0\" + b.toString(16);\r\n  else\r\n    return b.toString(16);\r\n}\r\n\r\n// PKCS#1 (type 2, random) pad input string s to n bytes, and return a bigint\r\nfunction pkcs1pad2(s,n) {\r\n  if(n < s.length + 11) { // TODO: fix for utf-8\r\n    console.error(\"Message too long for RSA\");\r\n    return null;\r\n  }\r\n  var ba = [];\r\n  var i = s.length - 1;\r\n  while(i >= 0 && n > 0) {\r\n    var c = s.charCodeAt(i--);\r\n    if(c < 128) { // encode using utf-8\r\n      ba[--n] = c;\r\n    }\r\n    else if((c > 127) && (c < 2048)) {\r\n      ba[--n] = (c & 63) | 128;\r\n      ba[--n] = (c >> 6) | 192;\r\n    }\r\n    else {\r\n      ba[--n] = (c & 63) | 128;\r\n      ba[--n] = ((c >> 6) & 63) | 128;\r\n      ba[--n] = (c >> 12) | 224;\r\n    }\r\n  }\r\n  ba[--n] = 0;\r\n  var rng = new SecureRandom();\r\n  var x = [];\r\n  while(n > 2) { // random non-zero pad\r\n    x[0] = 0;\r\n    while(x[0] == 0) rng.nextBytes(x);\r\n    ba[--n] = x[0];\r\n  }\r\n  ba[--n] = 2;\r\n  ba[--n] = 0;\r\n  return new BigInteger(ba);\r\n}\r\n\r\n// \"empty\" RSA key constructor\r\nexport class RSAKey {\r\n  constructor() {\r\n    this.n = null;\r\n    this.e = 0;\r\n    this.d = null;\r\n    this.p = null;\r\n    this.q = null;\r\n    this.dmp1 = null;\r\n    this.dmq1 = null;\r\n    this.coeff = null;\r\n  }\r\n}\r\n\r\n// Set the public key fields N and e from hex strings\r\nfunction RSASetPublic(N,E) {\r\n  if(N != null && E != null && N.length > 0 && E.length > 0) {\r\n    this.n = parseBigInt(N,16);\r\n    this.e = parseInt(E,16);\r\n  }\r\n  else\r\n    console.error(\"Invalid RSA public key\");\r\n}\r\n\r\n// Perform raw public operation on \"x\": return x^e (mod n)\r\nfunction RSADoPublic(x) {\r\n  return x.modPowInt(this.e, this.n);\r\n}\r\n\r\n// Return the PKCS#1 RSA encryption of \"text\" as an even-length hex string\r\nfunction RSAEncrypt(text) {\r\n  var m = pkcs1pad2(text,(this.n.bitLength()+7)>>3);\r\n  if(m == null) return null;\r\n  var c = this.doPublic(m);\r\n  if(c == null) return null;\r\n  var h = c.toString(16);\r\n  if((h.length & 1) == 0) return h; else return \"0\" + h;\r\n}\r\n\r\n// Return the PKCS#1 RSA encryption of \"text\" as a Base64-encoded string\r\n//function RSAEncryptB64(text) {\r\n//  var h = this.encrypt(text);\r\n//  if(h) return hex2b64(h); else return null;\r\n//}\r\n\r\n// protected\r\nRSAKey.prototype.doPublic = RSADoPublic;\r\n\r\n// public\r\nRSAKey.prototype.setPublic = RSASetPublic;\r\nRSAKey.prototype.encrypt = RSAEncrypt;\r\n//RSAKey.prototype.encrypt_b64 = RSAEncryptB64;\r\n","// Version 1.1: support utf-8 decoding in pkcs1unpad2\r\n\r\n// Undo PKCS#1 (type 2, random) padding and, if valid, return the plaintext\r\n\r\nimport {SecureRandom} from \"./rng\";\r\nimport {BigInteger} from \"./jsbn\";\r\nimport {parseBigInt} from \"./rsa\";\r\nimport {RSAKey} from \"./rsa\";\r\nexport {RSAKey} from \"./rsa\";\r\n\r\nfunction pkcs1unpad2(d,n) {\r\n  var b = d.toByteArray();\r\n  var i = 0;\r\n  while(i < b.length && b[i] == 0) ++i;\r\n  if(b.length-i != n-1 || b[i] != 2)\r\n    return null;\r\n  ++i;\r\n  while(b[i] != 0)\r\n    if(++i >= b.length) return null;\r\n  var ret = \"\";\r\n  while(++i < b.length) {\r\n    var c = b[i] & 255;\r\n    if(c < 128) { // utf-8 decode\r\n      ret += String.fromCharCode(c);\r\n    }\r\n    else if((c > 191) && (c < 224)) {\r\n      ret += String.fromCharCode(((c & 31) << 6) | (b[i+1] & 63));\r\n      ++i;\r\n    }\r\n    else {\r\n      ret += String.fromCharCode(((c & 15) << 12) | ((b[i+1] & 63) << 6) | (b[i+2] & 63));\r\n      i += 2;\r\n    }\r\n  }\r\n  return ret;\r\n}\r\n\r\n// Set the private key fields N, e, and d from hex strings\r\nfunction RSASetPrivate(N,E,D) {\r\n  if(N != null && E != null && N.length > 0 && E.length > 0) {\r\n    this.n = parseBigInt(N,16);\r\n    this.e = parseInt(E,16);\r\n    this.d = parseBigInt(D,16);\r\n  }\r\n  else\r\n    console.error(\"Invalid RSA private key\");\r\n}\r\n\r\n// Set the private key fields N, e, d and CRT params from hex strings\r\nfunction RSASetPrivateEx(N,E,D,P,Q,DP,DQ,C) {\r\n  if(N != null && E != null && N.length > 0 && E.length > 0) {\r\n    this.n = parseBigInt(N,16);\r\n    this.e = parseInt(E,16);\r\n    this.d = parseBigInt(D,16);\r\n    this.p = parseBigInt(P,16);\r\n    this.q = parseBigInt(Q,16);\r\n    this.dmp1 = parseBigInt(DP,16);\r\n    this.dmq1 = parseBigInt(DQ,16);\r\n    this.coeff = parseBigInt(C,16);\r\n  }\r\n  else\r\n    console.error(\"Invalid RSA private key\");\r\n}\r\n\r\n// Generate a new random private key B bits long, using public expt E\r\nfunction RSAGenerate(B,E) {\r\n  var rng = new SecureRandom();\r\n  var qs = B>>1;\r\n  this.e = parseInt(E,16);\r\n  var ee = new BigInteger(E,16);\r\n  for(;;) {\r\n    for(;;) {\r\n      this.p = new BigInteger(B-qs,1,rng);\r\n      if(this.p.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE) == 0 && this.p.isProbablePrime(10)) break;\r\n    }\r\n    for(;;) {\r\n      this.q = new BigInteger(qs,1,rng);\r\n      if(this.q.subtract(BigInteger.ONE).gcd(ee).compareTo(BigInteger.ONE) == 0 && this.q.isProbablePrime(10)) break;\r\n    }\r\n    if(this.p.compareTo(this.q) <= 0) {\r\n      var t = this.p;\r\n      this.p = this.q;\r\n      this.q = t;\r\n    }\r\n    var p1 = this.p.subtract(BigInteger.ONE);\r\n    var q1 = this.q.subtract(BigInteger.ONE);\r\n    var phi = p1.multiply(q1);\r\n    if(phi.gcd(ee).compareTo(BigInteger.ONE) == 0) {\r\n      this.n = this.p.multiply(this.q);\r\n      this.d = ee.modInverse(phi);\r\n      this.dmp1 = this.d.mod(p1);\r\n      this.dmq1 = this.d.mod(q1);\r\n      this.coeff = this.q.modInverse(this.p);\r\n      break;\r\n    }\r\n  }\r\n}\r\n\r\n// Perform raw private operation on \"x\": return x^d (mod n)\r\nfunction RSADoPrivate(x) {\r\n  if(this.p == null || this.q == null)\r\n    return x.modPow(this.d, this.n);\r\n\r\n  // TODO: re-calculate any missing CRT params\r\n  var xp = x.mod(this.p).modPow(this.dmp1, this.p);\r\n  var xq = x.mod(this.q).modPow(this.dmq1, this.q);\r\n\r\n  while(xp.compareTo(xq) < 0)\r\n    xp = xp.add(this.p);\r\n  return xp.subtract(xq).multiply(this.coeff).mod(this.p).multiply(this.q).add(xq);\r\n}\r\n\r\n// Return the PKCS#1 RSA decryption of \"ctext\".\r\n// \"ctext\" is an even-length hex string and the output is a plain string.\r\nfunction RSADecrypt(ctext) {\r\n  var c = parseBigInt(ctext, 16);\r\n  var m = this.doPrivate(c);\r\n  if(m == null) return null;\r\n  return pkcs1unpad2(m, (this.n.bitLength()+7)>>3);\r\n}\r\n\r\n// Return the PKCS#1 RSA decryption of \"ctext\".\r\n// \"ctext\" is a Base64-encoded string and the output is a plain string.\r\n//function RSAB64Decrypt(ctext) {\r\n//  var h = b64tohex(ctext);\r\n//  if(h) return this.decrypt(h); else return null;\r\n//}\r\n\r\n// protected\r\nRSAKey.prototype.doPrivate = RSADoPrivate;\r\n\r\n// public\r\nRSAKey.prototype.setPrivate = RSASetPrivate;\r\nRSAKey.prototype.setPrivateEx = RSASetPrivateEx;\r\nRSAKey.prototype.generate = RSAGenerate;\r\nRSAKey.prototype.decrypt = RSADecrypt;\r\n//RSAKey.prototype.b64_decrypt = RSAB64Decrypt;","// Base64 JavaScript decoder\r\n// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\r\n\r\n// Permission to use, copy, modify, and/or distribute this software for any\r\n// purpose with or without fee is hereby granted, provided that the above\r\n// copyright notice and this permission notice appear in all copies.\r\n// \r\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\r\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\r\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\r\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\r\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\r\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\r\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\r\n\r\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\r\n\r\nexport const Base64 = {};\r\nlet decoder;\r\n\r\nBase64.decode = function (a) {\r\n    var i;\r\n    if (decoder === undefined) {\r\n        var b64 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",\r\n            ignore = \"= \\f\\n\\r\\t\\u00A0\\u2028\\u2029\";\r\n        decoder = [];\r\n        for (i = 0; i < 64; ++i)\r\n            decoder[b64.charAt(i)] = i;\r\n        for (i = 0; i < ignore.length; ++i)\r\n            decoder[ignore.charAt(i)] = -1;\r\n    }\r\n    var out = [];\r\n    var bits = 0, char_count = 0;\r\n    for (i = 0; i < a.length; ++i) {\r\n        var c = a.charAt(i);\r\n        if (c == '=')\r\n            break;\r\n        c = decoder[c];\r\n        if (c == -1)\r\n            continue;\r\n        if (c === undefined)\r\n            throw 'Illegal character at offset ' + i;\r\n        bits |= c;\r\n        if (++char_count >= 4) {\r\n            out[out.length] = (bits >> 16);\r\n            out[out.length] = (bits >> 8) & 0xFF;\r\n            out[out.length] = bits & 0xFF;\r\n            bits = 0;\r\n            char_count = 0;\r\n        } else {\r\n            bits <<= 6;\r\n        }\r\n    }\r\n    switch (char_count) {\r\n      case 1:\r\n        throw \"Base64 encoding incomplete: at least 2 bits missing\";\r\n      case 2:\r\n        out[out.length] = (bits >> 10);\r\n        break;\r\n      case 3:\r\n        out[out.length] = (bits >> 16);\r\n        out[out.length] = (bits >> 8) & 0xFF;\r\n        break;\r\n    }\r\n    return out;\r\n};\r\n\r\nBase64.re = /-----BEGIN [^-]+-----([A-Za-z0-9+\\/=\\s]+)-----END [^-]+-----|begin-base64[^\\n]+\\n([A-Za-z0-9+\\/=\\s]+)====/;\r\nBase64.unarmor = function (a) {\r\n    var m = Base64.re.exec(a);\r\n    if (m) {\r\n        if (m[1])\r\n            a = m[1];\r\n        else if (m[2])\r\n            a = m[2];\r\n        else\r\n            throw \"RegExp out of sync\";\r\n    }\r\n    return Base64.decode(a);\r\n};\r\n","// Hex JavaScript decoder\r\n// Copyright (c) 2008-2013 Lapo Luchini <lapo@lapo.it>\r\n\r\n// Permission to use, copy, modify, and/or distribute this software for any\r\n// purpose with or without fee is hereby granted, provided that the above\r\n// copyright notice and this permission notice appear in all copies.\r\n// \r\n// THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES\r\n// WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF\r\n// MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR\r\n// ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES\r\n// WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN\r\n// ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF\r\n// OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.\r\n\r\n/*jshint browser: true, strict: true, immed: true, latedef: true, undef: true, regexdash: false */\r\nexport const Hex = {};\r\nlet decoder;\r\n\r\nHex.decode = function(a) {\r\n    var i;\r\n    if (decoder === undefined) {\r\n        var hex = \"0123456789ABCDEF\",\r\n            ignore = \" \\f\\n\\r\\t\\u00A0\\u2028\\u2029\";\r\n        decoder = [];\r\n        for (i = 0; i < 16; ++i)\r\n            decoder[hex.charAt(i)] = i;\r\n        hex = hex.toLowerCase();\r\n        for (i = 10; i < 16; ++i)\r\n            decoder[hex.charAt(i)] = i;\r\n        for (i = 0; i < ignore.length; ++i)\r\n            decoder[ignore.charAt(i)] = -1;\r\n    }\r\n    var out = [],\r\n        bits = 0,\r\n        char_count = 0;\r\n    for (i = 0; i < a.length; ++i) {\r\n        var c = a.charAt(i);\r\n        if (c == '=')\r\n            break;\r\n        c = decoder[c];\r\n        if (c == -1)\r\n            continue;\r\n        if (c === undefined)\r\n            throw 'Illegal character at offset ' + i;\r\n        bits |= c;\r\n        if (++char_count >= 2) {\r\n            out[out.length] = bits;\r\n            bits = 0;\r\n            char_count = 0;\r\n        } else {\r\n            bits <<= 4;\r\n        }\r\n    }\r\n    if (char_count)\r\n        throw \"Hex encoding incomplete: 4 bits missing\";\r\n    return out;\r\n};","import {BigInteger} from \"../jsbn/jsbn2\";\r\n/*! asn1-1.0.2.js (c) 2013 Kenji Urushima | kjur.github.com/jsrsasign/license\r\n */\r\n\r\nexport const JSX = /*window.JSX || */{};\r\nJSX.env = JSX.env || {};\r\n\r\nvar L = JSX, OP = Object.prototype, FUNCTION_TOSTRING = '[object Function]',ADD = [\"toString\", \"valueOf\"];\r\n\r\nJSX.env.parseUA = function(agent) {\r\n\r\n    var numberify = function(s) {\r\n        var c = 0;\r\n        return parseFloat(s.replace(/\\./g, function() {\r\n            return (c++ == 1) ? '' : '.';\r\n        }));\r\n    },\r\n\r\n    nav = navigator,\r\n    o = {\r\n        ie: 0,\r\n        opera: 0,\r\n        gecko: 0,\r\n        webkit: 0,\r\n        chrome: 0,\r\n        mobile: null,\r\n        air: 0,\r\n        ipad: 0,\r\n        iphone: 0,\r\n        ipod: 0,\r\n        ios: null,\r\n        android: 0,\r\n        webos: 0,\r\n        caja: nav && nav.cajaVersion,\r\n        secure: false,\r\n        os: null\r\n\r\n    },\r\n\r\n    ua = agent || (navigator && navigator.userAgent),\r\n    loc = window && window.location,\r\n    href = loc && loc.href,\r\n    m;\r\n\r\n    o.secure = href && (href.toLowerCase().indexOf(\"https\") === 0);\r\n\r\n    if (ua) {\r\n\r\n        if ((/windows|win32/i).test(ua)) {\r\n            o.os = 'windows';\r\n        } else if ((/macintosh/i).test(ua)) {\r\n            o.os = 'macintosh';\r\n        } else if ((/rhino/i).test(ua)) {\r\n            o.os = 'rhino';\r\n        }\r\n        if ((/KHTML/).test(ua)) {\r\n            o.webkit = 1;\r\n        }\r\n        m = ua.match(/AppleWebKit\\/([^\\s]*)/);\r\n        if (m && m[1]) {\r\n            o.webkit = numberify(m[1]);\r\n            if (/ Mobile\\//.test(ua)) {\r\n                o.mobile = 'Apple'; // iPhone or iPod Touch\r\n                m = ua.match(/OS ([^\\s]*)/);\r\n                if (m && m[1]) {\r\n                    m = numberify(m[1].replace('_', '.'));\r\n                }\r\n                o.ios = m;\r\n                o.ipad = o.ipod = o.iphone = 0;\r\n                m = ua.match(/iPad|iPod|iPhone/);\r\n                if (m && m[0]) {\r\n                    o[m[0].toLowerCase()] = o.ios;\r\n                }\r\n            } else {\r\n                m = ua.match(/NokiaN[^\\/]*|Android \\d\\.\\d|webOS\\/\\d\\.\\d/);\r\n                if (m) {\r\n                    o.mobile = m[0];\r\n                }\r\n                if (/webOS/.test(ua)) {\r\n                    o.mobile = 'WebOS';\r\n                    m = ua.match(/webOS\\/([^\\s]*);/);\r\n                    if (m && m[1]) {\r\n                        o.webos = numberify(m[1]);\r\n                    }\r\n                }\r\n                if (/ Android/.test(ua)) {\r\n                    o.mobile = 'Android';\r\n                    m = ua.match(/Android ([^\\s]*);/);\r\n                    if (m && m[1]) {\r\n                        o.android = numberify(m[1]);\r\n                    }\r\n                }\r\n            }\r\n            m = ua.match(/Chrome\\/([^\\s]*)/);\r\n            if (m && m[1]) {\r\n                o.chrome = numberify(m[1]); // Chrome\r\n            } else {\r\n                m = ua.match(/AdobeAIR\\/([^\\s]*)/);\r\n                if (m) {\r\n                    o.air = m[0]; // Adobe AIR 1.0 or better\r\n                }\r\n            }\r\n        }\r\n        if (!o.webkit) {\r\n            m = ua.match(/Opera[\\s\\/]([^\\s]*)/);\r\n            if (m && m[1]) {\r\n                o.opera = numberify(m[1]);\r\n                m = ua.match(/Version\\/([^\\s]*)/);\r\n                if (m && m[1]) {\r\n                    o.opera = numberify(m[1]); // opera 10+\r\n                }\r\n                m = ua.match(/Opera Mini[^;]*/);\r\n                if (m) {\r\n                    o.mobile = m[0]; // ex: Opera Mini/2.0.4509/1316\r\n                }\r\n            } else { // not opera or webkit\r\n                m = ua.match(/MSIE\\s([^;]*)/);\r\n                if (m && m[1]) {\r\n                    o.ie = numberify(m[1]);\r\n                } else { // not opera, webkit, or ie\r\n                    m = ua.match(/Gecko\\/([^\\s]*)/);\r\n                    if (m) {\r\n                        o.gecko = 1; // Gecko detected, look for revision\r\n                        m = ua.match(/rv:([^\\s\\)]*)/);\r\n                        if (m && m[1]) {\r\n                            o.gecko = numberify(m[1]);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return o;\r\n};\r\n\r\nJSX.env.ua = JSX.env.parseUA();\r\n\r\nJSX.isFunction = function(o) {\r\n    return (typeof o === 'function') || OP.toString.apply(o) === FUNCTION_TOSTRING;\r\n};\r\n\r\nJSX._IEEnumFix = (JSX.env.ua.ie) ? function(r, s) {\r\n    var i, fname, f;\r\n    for (i=0;i<ADD.length;i=i+1) {\r\n\r\n        fname = ADD[i];\r\n        f = s[fname];\r\n\r\n        if (L.isFunction(f) && f!=OP[fname]) {\r\n            r[fname]=f;\r\n        }\r\n    }\r\n} : function(){};\r\n\r\nJSX.extend = function(subc, superc, overrides) {\r\n    if (!superc||!subc) {\r\n        throw new Error(\"extend failed, please check that \" +\r\n                        \"all dependencies are included.\");\r\n    }\r\n    var F = function() {}, i;\r\n    F.prototype=superc.prototype;\r\n    subc.prototype=new F();\r\n    subc.prototype.constructor=subc;\r\n    subc.superclass=superc.prototype;\r\n    if (superc.prototype.constructor == OP.constructor) {\r\n        superc.prototype.constructor=superc;\r\n    }\r\n\r\n    if (overrides) {\r\n        for (i in overrides) {\r\n            if (L.hasOwnProperty(overrides, i)) {\r\n                subc.prototype[i]=overrides[i];\r\n            }\r\n        }\r\n\r\n        L._IEEnumFix(subc.prototype, overrides);\r\n    }\r\n};\r\n\r\n/*\r\n * asn1.js - ASN.1 DER encoder classes\r\n *\r\n * Copyright (c) 2013 Kenji Urushima (kenji.urushima@gmail.com)\r\n *\r\n * This software is licensed under the terms of the MIT License.\r\n * http://kjur.github.com/jsrsasign/license\r\n *\r\n * The above copyright and license notice shall be \r\n * included in all copies or substantial portions of the Software.\r\n */\r\n\r\n/**\r\n * @fileOverview\r\n * @name asn1-1.0.js\r\n * @author Kenji Urushima kenji.urushima@gmail.com\r\n * @version 1.0.2 (2013-May-30)\r\n * @since 2.1\r\n * @license <a href=\"http://kjur.github.io/jsrsasign/license/\">MIT License</a>\r\n */\r\n\r\n/** \r\n * kjur's class library name space\r\n * <p>\r\n * This name space provides following name spaces:\r\n * <ul>\r\n * <li>{@link KJUR.asn1} - ASN.1 primitive hexadecimal encoder</li>\r\n * <li>{@link KJUR.asn1.x509} - ASN.1 structure for X.509 certificate and CRL</li>\r\n * <li>{@link KJUR.crypto} - Java Cryptographic Extension(JCE) style MessageDigest/Signature \r\n * class and utilities</li>\r\n * </ul>\r\n * </p> \r\n * NOTE: Please ignore method summary and document of this namespace. This caused by a bug of jsdoc2.\r\n  * @name KJUR\r\n * @namespace kjur's class library name space\r\n */\r\n// if (typeof KJUR == \"undefined\" || !KJUR)\r\nexport const KJUR = {};\r\n\r\n/**\r\n * kjur's ASN.1 class library name space\r\n * <p>\r\n * This is ITU-T X.690 ASN.1 DER encoder class library and\r\n * class structure and methods is very similar to \r\n * org.bouncycastle.asn1 package of \r\n * well known BouncyCaslte Cryptography Library.\r\n *\r\n * <h4>PROVIDING ASN.1 PRIMITIVES</h4>\r\n * Here are ASN.1 DER primitive classes.\r\n * <ul>\r\n * <li>{@link KJUR.asn1.DERBoolean}</li>\r\n * <li>{@link KJUR.asn1.DERInteger}</li>\r\n * <li>{@link KJUR.asn1.DERBitString}</li>\r\n * <li>{@link KJUR.asn1.DEROctetString}</li>\r\n * <li>{@link KJUR.asn1.DERNull}</li>\r\n * <li>{@link KJUR.asn1.DERObjectIdentifier}</li>\r\n * <li>{@link KJUR.asn1.DERUTF8String}</li>\r\n * <li>{@link KJUR.asn1.DERNumericString}</li>\r\n * <li>{@link KJUR.asn1.DERPrintableString}</li>\r\n * <li>{@link KJUR.asn1.DERTeletexString}</li>\r\n * <li>{@link KJUR.asn1.DERIA5String}</li>\r\n * <li>{@link KJUR.asn1.DERUTCTime}</li>\r\n * <li>{@link KJUR.asn1.DERGeneralizedTime}</li>\r\n * <li>{@link KJUR.asn1.DERSequence}</li>\r\n * <li>{@link KJUR.asn1.DERSet}</li>\r\n * </ul>\r\n *\r\n * <h4>OTHER ASN.1 CLASSES</h4>\r\n * <ul>\r\n * <li>{@link KJUR.asn1.ASN1Object}</li>\r\n * <li>{@link KJUR.asn1.DERAbstractString}</li>\r\n * <li>{@link KJUR.asn1.DERAbstractTime}</li>\r\n * <li>{@link KJUR.asn1.DERAbstractStructured}</li>\r\n * <li>{@link KJUR.asn1.DERTaggedObject}</li>\r\n * </ul>\r\n * </p>\r\n * NOTE: Please ignore method summary and document of this namespace. This caused by a bug of jsdoc2.\r\n * @name KJUR.asn1\r\n * @namespace\r\n */\r\nif (typeof KJUR.asn1 == \"undefined\" || !KJUR.asn1) KJUR.asn1 = {};\r\n\r\n/**\r\n * ASN1 utilities class\r\n * @name KJUR.asn1.ASN1Util\r\n * @classs ASN1 utilities class\r\n * @since asn1 1.0.2\r\n */\r\nKJUR.asn1.ASN1Util = new function() {\r\n    this.integerToByteHex = function(i) {\r\n\tvar h = i.toString(16);\r\n\tif ((h.length % 2) == 1) h = '0' + h;\r\n\treturn h;\r\n    };\r\n    this.bigIntToMinTwosComplementsHex = function(bigIntegerValue) {\r\n\tvar h = bigIntegerValue.toString(16);\r\n\tif (h.substr(0, 1) != '-') {\r\n\t    if (h.length % 2 == 1) {\r\n\t\th = '0' + h;\r\n\t    } else {\r\n\t\tif (! h.match(/^[0-7]/)) {\r\n\t\t    h = '00' + h;\r\n\t\t}\r\n\t    }\r\n\t} else {\r\n\t    var hPos = h.substr(1);\r\n\t    var xorLen = hPos.length;\r\n\t    if (xorLen % 2 == 1) {\r\n\t\txorLen += 1;\r\n\t    } else {\r\n\t\tif (! h.match(/^[0-7]/)) {\r\n\t\t    xorLen += 2;\r\n\t\t}\r\n\t    }\r\n\t    var hMask = '';\r\n\t    for (var i = 0; i < xorLen; i++) {\r\n\t\thMask += 'f';\r\n\t    }\r\n\t    var biMask = new BigInteger(hMask, 16);\r\n\t    var biNeg = biMask.xor(bigIntegerValue).add(BigInteger.ONE);\r\n\t    h = biNeg.toString(16).replace(/^-/, '');\r\n\t}\r\n\treturn h;\r\n    };\r\n    /**\r\n     * get PEM string from hexadecimal data and header string\r\n     * @name getPEMStringFromHex\r\n     * @memberOf KJUR.asn1.ASN1Util\r\n     * @function\r\n     * @param {String} dataHex hexadecimal string of PEM body\r\n     * @param {String} pemHeader PEM header string (ex. 'RSA PRIVATE KEY')\r\n     * @return {String} PEM formatted string of input data\r\n     * @description\r\n     * @example\r\n     * var pem  = KJUR.asn1.ASN1Util.getPEMStringFromHex('616161', 'RSA PRIVATE KEY');\r\n     * // value of pem will be:\r\n     * -----BEGIN PRIVATE KEY-----\r\n     * YWFh\r\n     * -----END PRIVATE KEY-----\r\n     */\r\n    this.getPEMStringFromHex = function(dataHex, pemHeader) {\r\n\tvar dataWA = CryptoJS.enc.Hex.parse(dataHex);\r\n\tvar dataB64 = CryptoJS.enc.Base64.stringify(dataWA);\r\n\tvar pemBody = dataB64.replace(/(.{64})/g, \"$1\\r\\n\");\r\n        pemBody = pemBody.replace(/\\r\\n$/, '');\r\n\treturn \"-----BEGIN \" + pemHeader + \"-----\\r\\n\" + \r\n               pemBody + \r\n               \"\\r\\n-----END \" + pemHeader + \"-----\\r\\n\";\r\n    };\r\n};\r\n\r\n// ********************************************************************\r\n//  Abstract ASN.1 Classes\r\n// ********************************************************************\r\n\r\n// ********************************************************************\r\n\r\n/**\r\n * base class for ASN.1 DER encoder object\r\n * @name KJUR.asn1.ASN1Object\r\n * @class base class for ASN.1 DER encoder object\r\n * @property {Boolean} isModified flag whether internal data was changed\r\n * @property {String} hTLV hexadecimal string of ASN.1 TLV\r\n * @property {String} hT hexadecimal string of ASN.1 TLV tag(T)\r\n * @property {String} hL hexadecimal string of ASN.1 TLV length(L)\r\n * @property {String} hV hexadecimal string of ASN.1 TLV value(V)\r\n * @description\r\n */\r\nKJUR.asn1.ASN1Object = function() {\r\n    var isModified = true;\r\n    var hTLV = null;\r\n    var hT = '00'\r\n    var hL = '00';\r\n    var hV = '';\r\n\r\n    /**\r\n     * get hexadecimal ASN.1 TLV length(L) bytes from TLV value(V)\r\n     * @name getLengthHexFromValue\r\n     * @memberOf KJUR.asn1.ASN1Object\r\n     * @function\r\n     * @return {String} hexadecimal string of ASN.1 TLV length(L)\r\n     */\r\n    this.getLengthHexFromValue = function() {\r\n\tif (typeof this.hV == \"undefined\" || this.hV == null) {\r\n\t    throw \"this.hV is null or undefined.\";\r\n\t}\r\n\tif (this.hV.length % 2 == 1) {\r\n\t    throw \"value hex must be even length: n=\" + hV.length + \",v=\" + this.hV;\r\n\t}\r\n\tvar n = this.hV.length / 2;\r\n\tvar hN = n.toString(16);\r\n\tif (hN.length % 2 == 1) {\r\n\t    hN = \"0\" + hN;\r\n\t}\r\n\tif (n < 128) {\r\n\t    return hN;\r\n\t} else {\r\n\t    var hNlen = hN.length / 2;\r\n\t    if (hNlen > 15) {\r\n\t\tthrow \"ASN.1 length too long to represent by 8x: n = \" + n.toString(16);\r\n\t    }\r\n\t    var head = 128 + hNlen;\r\n\t    return head.toString(16) + hN;\r\n\t}\r\n    };\r\n\r\n    /**\r\n     * get hexadecimal string of ASN.1 TLV bytes\r\n     * @name getEncodedHex\r\n     * @memberOf KJUR.asn1.ASN1Object\r\n     * @function\r\n     * @return {String} hexadecimal string of ASN.1 TLV\r\n     */\r\n    this.getEncodedHex = function() {\r\n\tif (this.hTLV == null || this.isModified) {\r\n\t    this.hV = this.getFreshValueHex();\r\n\t    this.hL = this.getLengthHexFromValue();\r\n\t    this.hTLV = this.hT + this.hL + this.hV;\r\n\t    this.isModified = false;\r\n\t    //console.error(\"first time: \" + this.hTLV);\r\n\t}\r\n\treturn this.hTLV;\r\n    };\r\n\r\n    /**\r\n     * get hexadecimal string of ASN.1 TLV value(V) bytes\r\n     * @name getValueHex\r\n     * @memberOf KJUR.asn1.ASN1Object\r\n     * @function\r\n     * @return {String} hexadecimal string of ASN.1 TLV value(V) bytes\r\n     */\r\n    this.getValueHex = function() {\r\n\tthis.getEncodedHex();\r\n\treturn this.hV;\r\n    }\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn '';\r\n    };\r\n};\r\n\r\n// == BEGIN DERAbstractString ================================================\r\n/**\r\n * base class for ASN.1 DER string classes\r\n * @name KJUR.asn1.DERAbstractString\r\n * @class base class for ASN.1 DER string classes\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @property {String} s internal string of value\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>str - specify initial ASN.1 value(V) by a string</li>\r\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERAbstractString = function(params) {\r\n    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\r\n    var s = null;\r\n    var hV = null;\r\n\r\n    /**\r\n     * get string value of this string object\r\n     * @name getString\r\n     * @memberOf KJUR.asn1.DERAbstractString\r\n     * @function\r\n     * @return {String} string value of this string object\r\n     */\r\n    this.getString = function() {\r\n\treturn this.s;\r\n    };\r\n\r\n    /**\r\n     * set value by a string\r\n     * @name setString\r\n     * @memberOf KJUR.asn1.DERAbstractString\r\n     * @function\r\n     * @param {String} newS value by a string to set\r\n     */\r\n    this.setString = function(newS) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.s = newS;\r\n\tthis.hV = stohex(this.s);\r\n    };\r\n\r\n    /**\r\n     * set value by a hexadecimal string\r\n     * @name setStringHex\r\n     * @memberOf KJUR.asn1.DERAbstractString\r\n     * @function\r\n     * @param {String} newHexString value by a hexadecimal string to set\r\n     */\r\n    this.setStringHex = function(newHexString) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.s = null;\r\n\tthis.hV = newHexString;\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['str'] != \"undefined\") {\r\n\t    this.setString(params['str']);\r\n\t} else if (typeof params['hex'] != \"undefined\") {\r\n\t    this.setStringHex(params['hex']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERAbstractString, KJUR.asn1.ASN1Object);\r\n// == END   DERAbstractString ================================================\r\n\r\n// == BEGIN DERAbstractTime ==================================================\r\n/**\r\n * base class for ASN.1 DER Generalized/UTCTime class\r\n * @name KJUR.asn1.DERAbstractTime\r\n * @class base class for ASN.1 DER Generalized/UTCTime class\r\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * @see KJUR.asn1.ASN1Object - superclass\r\n */\r\nKJUR.asn1.DERAbstractTime = function(params) {\r\n    KJUR.asn1.DERAbstractTime.superclass.constructor.call(this);\r\n    var s = null;\r\n    var date = null;\r\n\r\n    // --- PRIVATE METHODS --------------------\r\n    this.localDateToUTC = function(d) {\r\n\tutc = d.getTime() + (d.getTimezoneOffset() * 60000);\r\n\tvar utcDate = new Date(utc);\r\n\treturn utcDate;\r\n    };\r\n\r\n    this.formatDate = function(dateObject, type) {\r\n\tvar pad = this.zeroPadding;\r\n\tvar d = this.localDateToUTC(dateObject);\r\n\tvar year = String(d.getFullYear());\r\n\tif (type == 'utc') year = year.substr(2, 2);\r\n\tvar month = pad(String(d.getMonth() + 1), 2);\r\n\tvar day = pad(String(d.getDate()), 2);\r\n\tvar hour = pad(String(d.getHours()), 2);\r\n\tvar min = pad(String(d.getMinutes()), 2);\r\n\tvar sec = pad(String(d.getSeconds()), 2);\r\n\treturn year + month + day + hour + min + sec + 'Z';\r\n    };\r\n\r\n    this.zeroPadding = function(s, len) {\r\n\tif (s.length >= len) return s;\r\n\treturn new Array(len - s.length + 1).join('0') + s;\r\n    };\r\n\r\n    // --- PUBLIC METHODS --------------------\r\n    /**\r\n     * get string value of this string object\r\n     * @name getString\r\n     * @memberOf KJUR.asn1.DERAbstractTime\r\n     * @function\r\n     * @return {String} string value of this time object\r\n     */\r\n    this.getString = function() {\r\n\treturn this.s;\r\n    };\r\n\r\n    /**\r\n     * set value by a string\r\n     * @name setString\r\n     * @memberOf KJUR.asn1.DERAbstractTime\r\n     * @function\r\n     * @param {String} newS value by a string to set such like \"130430235959Z\"\r\n     */\r\n    this.setString = function(newS) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.s = newS;\r\n\tthis.hV = stohex(this.s);\r\n    };\r\n\r\n    /**\r\n     * set value by a Date object\r\n     * @name setByDateValue\r\n     * @memberOf KJUR.asn1.DERAbstractTime\r\n     * @function\r\n     * @param {Integer} year year of date (ex. 2013)\r\n     * @param {Integer} month month of date between 1 and 12 (ex. 12)\r\n     * @param {Integer} day day of month\r\n     * @param {Integer} hour hours of date\r\n     * @param {Integer} min minutes of date\r\n     * @param {Integer} sec seconds of date\r\n     */\r\n    this.setByDateValue = function(year, month, day, hour, min, sec) {\r\n\tvar dateObject = new Date(Date.UTC(year, month - 1, day, hour, min, sec, 0));\r\n\tthis.setByDate(dateObject);\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n};\r\nJSX.extend(KJUR.asn1.DERAbstractTime, KJUR.asn1.ASN1Object);\r\n// == END   DERAbstractTime ==================================================\r\n\r\n// == BEGIN DERAbstractStructured ============================================\r\n/**\r\n * base class for ASN.1 DER structured class\r\n * @name KJUR.asn1.DERAbstractStructured\r\n * @class base class for ASN.1 DER structured class\r\n * @property {Array} asn1Array internal array of ASN1Object\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * @see KJUR.asn1.ASN1Object - superclass\r\n */\r\nKJUR.asn1.DERAbstractStructured = function(params) {\r\n    KJUR.asn1.DERAbstractString.superclass.constructor.call(this);\r\n    var asn1Array = null;\r\n\r\n    /**\r\n     * set value by array of ASN1Object\r\n     * @name setByASN1ObjectArray\r\n     * @memberOf KJUR.asn1.DERAbstractStructured\r\n     * @function\r\n     * @param {array} asn1ObjectArray array of ASN1Object to set\r\n     */\r\n    this.setByASN1ObjectArray = function(asn1ObjectArray) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.asn1Array = asn1ObjectArray;\r\n    };\r\n\r\n    /**\r\n     * append an ASN1Object to internal array\r\n     * @name appendASN1Object\r\n     * @memberOf KJUR.asn1.DERAbstractStructured\r\n     * @function\r\n     * @param {ASN1Object} asn1Object to add\r\n     */\r\n    this.appendASN1Object = function(asn1Object) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.asn1Array.push(asn1Object);\r\n    };\r\n\r\n    this.asn1Array = new Array();\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['array'] != \"undefined\") {\r\n\t    this.asn1Array = params['array'];\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERAbstractStructured, KJUR.asn1.ASN1Object);\r\n\r\n\r\n// ********************************************************************\r\n//  ASN.1 Object Classes\r\n// ********************************************************************\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER Boolean\r\n * @name KJUR.asn1.DERBoolean\r\n * @class class for ASN.1 DER Boolean\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * @see KJUR.asn1.ASN1Object - superclass\r\n */\r\nKJUR.asn1.DERBoolean = function() {\r\n    KJUR.asn1.DERBoolean.superclass.constructor.call(this);\r\n    this.hT = \"01\";\r\n    this.hTLV = \"0101ff\";\r\n};\r\nJSX.extend(KJUR.asn1.DERBoolean, KJUR.asn1.ASN1Object);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER Integer\r\n * @name KJUR.asn1.DERInteger\r\n * @class class for ASN.1 DER Integer\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>int - specify initial ASN.1 value(V) by integer value</li>\r\n * <li>bigint - specify initial ASN.1 value(V) by BigInteger object</li>\r\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERInteger = function(params) {\r\n    KJUR.asn1.DERInteger.superclass.constructor.call(this);\r\n    this.hT = \"02\";\r\n\r\n    /**\r\n     * set value by Tom Wu's BigInteger object\r\n     * @name setByBigInteger\r\n     * @memberOf KJUR.asn1.DERInteger\r\n     * @function\r\n     * @param {BigInteger} bigIntegerValue to set\r\n     */\r\n    this.setByBigInteger = function(bigIntegerValue) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.hV = KJUR.asn1.ASN1Util.bigIntToMinTwosComplementsHex(bigIntegerValue);\r\n    };\r\n\r\n    /**\r\n     * set value by integer value\r\n     * @name setByInteger\r\n     * @memberOf KJUR.asn1.DERInteger\r\n     * @function\r\n     * @param {Integer} integer value to set\r\n     */\r\n    this.setByInteger = function(intValue) {\r\n\tvar bi = new BigInteger(String(intValue), 10);\r\n\tthis.setByBigInteger(bi);\r\n    };\r\n\r\n    /**\r\n     * set value by integer value\r\n     * @name setValueHex\r\n     * @memberOf KJUR.asn1.DERInteger\r\n     * @function\r\n     * @param {String} hexadecimal string of integer value\r\n     * @description\r\n     * <br/>\r\n     * NOTE: Value shall be represented by minimum octet length of\r\n     * two's complement representation.\r\n     */\r\n    this.setValueHex = function(newHexString) {\r\n\tthis.hV = newHexString;\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['bigint'] != \"undefined\") {\r\n\t    this.setByBigInteger(params['bigint']);\r\n\t} else if (typeof params['int'] != \"undefined\") {\r\n\t    this.setByInteger(params['int']);\r\n\t} else if (typeof params['hex'] != \"undefined\") {\r\n\t    this.setValueHex(params['hex']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERInteger, KJUR.asn1.ASN1Object);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER encoded BitString primitive\r\n * @name KJUR.asn1.DERBitString\r\n * @class class for ASN.1 DER encoded BitString primitive\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description \r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>bin - specify binary string (ex. '10111')</li>\r\n * <li>array - specify array of boolean (ex. [true,false,true,true])</li>\r\n * <li>hex - specify hexadecimal string of ASN.1 value(V) including unused bits</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERBitString = function(params) {\r\n    KJUR.asn1.DERBitString.superclass.constructor.call(this);\r\n    this.hT = \"03\";\r\n\r\n    /**\r\n     * set ASN.1 value(V) by a hexadecimal string including unused bits\r\n     * @name setHexValueIncludingUnusedBits\r\n     * @memberOf KJUR.asn1.DERBitString\r\n     * @function\r\n     * @param {String} newHexStringIncludingUnusedBits\r\n     */\r\n    this.setHexValueIncludingUnusedBits = function(newHexStringIncludingUnusedBits) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.hV = newHexStringIncludingUnusedBits;\r\n    };\r\n\r\n    /**\r\n     * set ASN.1 value(V) by unused bit and hexadecimal string of value\r\n     * @name setUnusedBitsAndHexValue\r\n     * @memberOf KJUR.asn1.DERBitString\r\n     * @function\r\n     * @param {Integer} unusedBits\r\n     * @param {String} hValue\r\n     */\r\n    this.setUnusedBitsAndHexValue = function(unusedBits, hValue) {\r\n\tif (unusedBits < 0 || 7 < unusedBits) {\r\n\t    throw \"unused bits shall be from 0 to 7: u = \" + unusedBits;\r\n\t}\r\n\tvar hUnusedBits = \"0\" + unusedBits;\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.hV = hUnusedBits + hValue;\r\n    };\r\n\r\n    /**\r\n     * set ASN.1 DER BitString by binary string\r\n     * @name setByBinaryString\r\n     * @memberOf KJUR.asn1.DERBitString\r\n     * @function\r\n     * @param {String} binaryString binary value string (i.e. '10111')\r\n     * @description\r\n     * Its unused bits will be calculated automatically by length of \r\n     * 'binaryValue'. <br/>\r\n     * NOTE: Trailing zeros '0' will be ignored.\r\n     */\r\n    this.setByBinaryString = function(binaryString) {\r\n\tbinaryString = binaryString.replace(/0+$/, '');\r\n\tvar unusedBits = 8 - binaryString.length % 8;\r\n\tif (unusedBits == 8) unusedBits = 0;\r\n\tfor (var i = 0; i <= unusedBits; i++) {\r\n\t    binaryString += '0';\r\n\t}\r\n\tvar h = '';\r\n\tfor (var i = 0; i < binaryString.length - 1; i += 8) {\r\n\t    var b = binaryString.substr(i, 8);\r\n\t    var x = parseInt(b, 2).toString(16);\r\n\t    if (x.length == 1) x = '0' + x;\r\n\t    h += x;  \r\n\t}\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.hV = '0' + unusedBits + h;\r\n    };\r\n\r\n    /**\r\n     * set ASN.1 TLV value(V) by an array of boolean\r\n     * @name setByBooleanArray\r\n     * @memberOf KJUR.asn1.DERBitString\r\n     * @function\r\n     * @param {array} booleanArray array of boolean (ex. [true, false, true])\r\n     * @description\r\n     * NOTE: Trailing falses will be ignored.\r\n     */\r\n    this.setByBooleanArray = function(booleanArray) {\r\n\tvar s = '';\r\n\tfor (var i = 0; i < booleanArray.length; i++) {\r\n\t    if (booleanArray[i] == true) {\r\n\t\ts += '1';\r\n\t    } else {\r\n\t\ts += '0';\r\n\t    }\r\n\t}\r\n\tthis.setByBinaryString(s);\r\n    };\r\n\r\n    /**\r\n     * generate an array of false with specified length\r\n     * @name newFalseArray\r\n     * @memberOf KJUR.asn1.DERBitString\r\n     * @function\r\n     * @param {Integer} nLength length of array to generate\r\n     * @return {array} array of boolean faluse\r\n     * @description\r\n     * This static method may be useful to initialize boolean array.\r\n     */\r\n    this.newFalseArray = function(nLength) {\r\n\tvar a = new Array(nLength);\r\n\tfor (var i = 0; i < nLength; i++) {\r\n\t    a[i] = false;\r\n\t}\r\n\treturn a;\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['hex'] != \"undefined\") {\r\n\t    this.setHexValueIncludingUnusedBits(params['hex']);\r\n\t} else if (typeof params['bin'] != \"undefined\") {\r\n\t    this.setByBinaryString(params['bin']);\r\n\t} else if (typeof params['array'] != \"undefined\") {\r\n\t    this.setByBooleanArray(params['array']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERBitString, KJUR.asn1.ASN1Object);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER OctetString\r\n * @name KJUR.asn1.DEROctetString\r\n * @class class for ASN.1 DER OctetString\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DEROctetString = function(params) {\r\n    KJUR.asn1.DEROctetString.superclass.constructor.call(this, params);\r\n    this.hT = \"04\";\r\n};\r\nJSX.extend(KJUR.asn1.DEROctetString, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER Null\r\n * @name KJUR.asn1.DERNull\r\n * @class class for ASN.1 DER Null\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * @see KJUR.asn1.ASN1Object - superclass\r\n */\r\nKJUR.asn1.DERNull = function() {\r\n    KJUR.asn1.DERNull.superclass.constructor.call(this);\r\n    this.hT = \"05\";\r\n    this.hTLV = \"0500\";\r\n};\r\nJSX.extend(KJUR.asn1.DERNull, KJUR.asn1.ASN1Object);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER ObjectIdentifier\r\n * @name KJUR.asn1.DERObjectIdentifier\r\n * @class class for ASN.1 DER ObjectIdentifier\r\n * @param {Array} params associative array of parameters (ex. {'oid': '2.5.4.5'})\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>oid - specify initial ASN.1 value(V) by a oid string (ex. 2.5.4.13)</li>\r\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERObjectIdentifier = function(params) {\r\n    var itox = function(i) {\r\n\tvar h = i.toString(16);\r\n\tif (h.length == 1) h = '0' + h;\r\n\treturn h;\r\n    };\r\n    var roidtox = function(roid) {\r\n\tvar h = '';\r\n\tvar bi = new BigInteger(roid, 10);\r\n\tvar b = bi.toString(2);\r\n\tvar padLen = 7 - b.length % 7;\r\n\tif (padLen == 7) padLen = 0;\r\n\tvar bPad = '';\r\n\tfor (var i = 0; i < padLen; i++) bPad += '0';\r\n\tb = bPad + b;\r\n\tfor (var i = 0; i < b.length - 1; i += 7) {\r\n\t    var b8 = b.substr(i, 7);\r\n\t    if (i != b.length - 7) b8 = '1' + b8;\r\n\t    h += itox(parseInt(b8, 2));\r\n\t}\r\n\treturn h;\r\n    }\r\n\r\n    KJUR.asn1.DERObjectIdentifier.superclass.constructor.call(this);\r\n    this.hT = \"06\";\r\n\r\n    /**\r\n     * set value by a hexadecimal string\r\n     * @name setValueHex\r\n     * @memberOf KJUR.asn1.DERObjectIdentifier\r\n     * @function\r\n     * @param {String} newHexString hexadecimal value of OID bytes\r\n     */\r\n    this.setValueHex = function(newHexString) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.s = null;\r\n\tthis.hV = newHexString;\r\n    };\r\n\r\n    /**\r\n     * set value by a OID string\r\n     * @name setValueOidString\r\n     * @memberOf KJUR.asn1.DERObjectIdentifier\r\n     * @function\r\n     * @param {String} oidString OID string (ex. 2.5.4.13)\r\n     */\r\n    this.setValueOidString = function(oidString) {\r\n\tif (! oidString.match(/^[0-9.]+$/)) {\r\n\t    throw \"malformed oid string: \" + oidString;\r\n\t}\r\n\tvar h = '';\r\n\tvar a = oidString.split('.');\r\n\tvar i0 = parseInt(a[0]) * 40 + parseInt(a[1]);\r\n\th += itox(i0);\r\n\ta.splice(0, 2);\r\n\tfor (var i = 0; i < a.length; i++) {\r\n\t    h += roidtox(a[i]);\r\n\t}\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.s = null;\r\n\tthis.hV = h;\r\n    };\r\n\r\n    /**\r\n     * set value by a OID name\r\n     * @name setValueName\r\n     * @memberOf KJUR.asn1.DERObjectIdentifier\r\n     * @function\r\n     * @param {String} oidName OID name (ex. 'serverAuth')\r\n     * @since 1.0.1\r\n     * @description\r\n     * OID name shall be defined in 'KJUR.asn1.x509.OID.name2oidList'.\r\n     * Otherwise raise error.\r\n     */\r\n    this.setValueName = function(oidName) {\r\n\tif (typeof KJUR.asn1.x509.OID.name2oidList[oidName] != \"undefined\") {\r\n\t    var oid = KJUR.asn1.x509.OID.name2oidList[oidName];\r\n\t    this.setValueOidString(oid);\r\n\t} else {\r\n\t    throw \"DERObjectIdentifier oidName undefined: \" + oidName;\r\n\t}\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['oid'] != \"undefined\") {\r\n\t    this.setValueOidString(params['oid']);\r\n\t} else if (typeof params['hex'] != \"undefined\") {\r\n\t    this.setValueHex(params['hex']);\r\n\t} else if (typeof params['name'] != \"undefined\") {\r\n\t    this.setValueName(params['name']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERObjectIdentifier, KJUR.asn1.ASN1Object);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER UTF8String\r\n * @name KJUR.asn1.DERUTF8String\r\n * @class class for ASN.1 DER UTF8String\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DERUTF8String = function(params) {\r\n    KJUR.asn1.DERUTF8String.superclass.constructor.call(this, params);\r\n    this.hT = \"0c\";\r\n};\r\nJSX.extend(KJUR.asn1.DERUTF8String, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER NumericString\r\n * @name KJUR.asn1.DERNumericString\r\n * @class class for ASN.1 DER NumericString\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DERNumericString = function(params) {\r\n    KJUR.asn1.DERNumericString.superclass.constructor.call(this, params);\r\n    this.hT = \"12\";\r\n};\r\nJSX.extend(KJUR.asn1.DERNumericString, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER PrintableString\r\n * @name KJUR.asn1.DERPrintableString\r\n * @class class for ASN.1 DER PrintableString\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DERPrintableString = function(params) {\r\n    KJUR.asn1.DERPrintableString.superclass.constructor.call(this, params);\r\n    this.hT = \"13\";\r\n};\r\nJSX.extend(KJUR.asn1.DERPrintableString, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER TeletexString\r\n * @name KJUR.asn1.DERTeletexString\r\n * @class class for ASN.1 DER TeletexString\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DERTeletexString = function(params) {\r\n    KJUR.asn1.DERTeletexString.superclass.constructor.call(this, params);\r\n    this.hT = \"14\";\r\n};\r\nJSX.extend(KJUR.asn1.DERTeletexString, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER IA5String\r\n * @name KJUR.asn1.DERIA5String\r\n * @class class for ASN.1 DER IA5String\r\n * @param {Array} params associative array of parameters (ex. {'str': 'aaa'})\r\n * @extends KJUR.asn1.DERAbstractString\r\n * @description\r\n * @see KJUR.asn1.DERAbstractString - superclass\r\n */\r\nKJUR.asn1.DERIA5String = function(params) {\r\n    KJUR.asn1.DERIA5String.superclass.constructor.call(this, params);\r\n    this.hT = \"16\";\r\n};\r\nJSX.extend(KJUR.asn1.DERIA5String, KJUR.asn1.DERAbstractString);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER UTCTime\r\n * @name KJUR.asn1.DERUTCTime\r\n * @class class for ASN.1 DER UTCTime\r\n * @param {Array} params associative array of parameters (ex. {'str': '130430235959Z'})\r\n * @extends KJUR.asn1.DERAbstractTime\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'130430235959Z')</li>\r\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\r\n * <li>date - specify Date object.</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n * <h4>EXAMPLES</h4>\r\n * @example\r\n * var d1 = new KJUR.asn1.DERUTCTime();\r\n * d1.setString('130430125959Z');\r\n *\r\n * var d2 = new KJUR.asn1.DERUTCTime({'str': '130430125959Z'});\r\n *\r\n * var d3 = new KJUR.asn1.DERUTCTime({'date': new Date(Date.UTC(2015, 0, 31, 0, 0, 0, 0))});\r\n */\r\nKJUR.asn1.DERUTCTime = function(params) {\r\n    KJUR.asn1.DERUTCTime.superclass.constructor.call(this, params);\r\n    this.hT = \"17\";\r\n\r\n    /**\r\n     * set value by a Date object\r\n     * @name setByDate\r\n     * @memberOf KJUR.asn1.DERUTCTime\r\n     * @function\r\n     * @param {Date} dateObject Date object to set ASN.1 value(V)\r\n     */\r\n    this.setByDate = function(dateObject) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.date = dateObject;\r\n\tthis.s = this.formatDate(this.date, 'utc');\r\n\tthis.hV = stohex(this.s);\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['str'] != \"undefined\") {\r\n\t    this.setString(params['str']);\r\n\t} else if (typeof params['hex'] != \"undefined\") {\r\n\t    this.setStringHex(params['hex']);\r\n\t} else if (typeof params['date'] != \"undefined\") {\r\n\t    this.setByDate(params['date']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERUTCTime, KJUR.asn1.DERAbstractTime);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER GeneralizedTime\r\n * @name KJUR.asn1.DERGeneralizedTime\r\n * @class class for ASN.1 DER GeneralizedTime\r\n * @param {Array} params associative array of parameters (ex. {'str': '20130430235959Z'})\r\n * @extends KJUR.asn1.DERAbstractTime\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>str - specify initial ASN.1 value(V) by a string (ex.'20130430235959Z')</li>\r\n * <li>hex - specify initial ASN.1 value(V) by a hexadecimal string</li>\r\n * <li>date - specify Date object.</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERGeneralizedTime = function(params) {\r\n    KJUR.asn1.DERGeneralizedTime.superclass.constructor.call(this, params);\r\n    this.hT = \"18\";\r\n\r\n    /**\r\n     * set value by a Date object\r\n     * @name setByDate\r\n     * @memberOf KJUR.asn1.DERGeneralizedTime\r\n     * @function\r\n     * @param {Date} dateObject Date object to set ASN.1 value(V)\r\n     * @example\r\n     * When you specify UTC time, use 'Date.UTC' method like this:<br/>\r\n     * var o = new DERUTCTime();\r\n     * var date = new Date(Date.UTC(2015, 0, 31, 23, 59, 59, 0)); #2015JAN31 23:59:59\r\n     * o.setByDate(date);\r\n     */\r\n    this.setByDate = function(dateObject) {\r\n\tthis.hTLV = null;\r\n\tthis.isModified = true;\r\n\tthis.date = dateObject;\r\n\tthis.s = this.formatDate(this.date, 'gen');\r\n\tthis.hV = stohex(this.s);\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['str'] != \"undefined\") {\r\n\t    this.setString(params['str']);\r\n\t} else if (typeof params['hex'] != \"undefined\") {\r\n\t    this.setStringHex(params['hex']);\r\n\t} else if (typeof params['date'] != \"undefined\") {\r\n\t    this.setByDate(params['date']);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERGeneralizedTime, KJUR.asn1.DERAbstractTime);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER Sequence\r\n * @name KJUR.asn1.DERSequence\r\n * @class class for ASN.1 DER Sequence\r\n * @extends KJUR.asn1.DERAbstractStructured\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>array - specify array of ASN1Object to set elements of content</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERSequence = function(params) {\r\n    KJUR.asn1.DERSequence.superclass.constructor.call(this, params);\r\n    this.hT = \"30\";\r\n    this.getFreshValueHex = function() {\r\n\tvar h = '';\r\n\tfor (var i = 0; i < this.asn1Array.length; i++) {\r\n\t    var asn1Obj = this.asn1Array[i];\r\n\t    h += asn1Obj.getEncodedHex();\r\n\t}\r\n\tthis.hV = h;\r\n\treturn this.hV;\r\n    };\r\n};\r\nJSX.extend(KJUR.asn1.DERSequence, KJUR.asn1.DERAbstractStructured);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER Set\r\n * @name KJUR.asn1.DERSet\r\n * @class class for ASN.1 DER Set\r\n * @extends KJUR.asn1.DERAbstractStructured\r\n * @description\r\n * <br/>\r\n * As for argument 'params' for constructor, you can specify one of\r\n * following properties:\r\n * <ul>\r\n * <li>array - specify array of ASN1Object to set elements of content</li>\r\n * </ul>\r\n * NOTE: 'params' can be omitted.\r\n */\r\nKJUR.asn1.DERSet = function(params) {\r\n    KJUR.asn1.DERSet.superclass.constructor.call(this, params);\r\n    this.hT = \"31\";\r\n    this.getFreshValueHex = function() {\r\n\tvar a = new Array();\r\n\tfor (var i = 0; i < this.asn1Array.length; i++) {\r\n\t    var asn1Obj = this.asn1Array[i];\r\n\t    a.push(asn1Obj.getEncodedHex());\r\n\t}\r\n\ta.sort();\r\n\tthis.hV = a.join('');\r\n\treturn this.hV;\r\n    };\r\n};\r\nJSX.extend(KJUR.asn1.DERSet, KJUR.asn1.DERAbstractStructured);\r\n\r\n// ********************************************************************\r\n/**\r\n * class for ASN.1 DER TaggedObject\r\n * @name KJUR.asn1.DERTaggedObject\r\n * @class class for ASN.1 DER TaggedObject\r\n * @extends KJUR.asn1.ASN1Object\r\n * @description\r\n * <br/>\r\n * Parameter 'tagNoNex' is ASN.1 tag(T) value for this object.\r\n * For example, if you find '[1]' tag in a ASN.1 dump, \r\n * 'tagNoHex' will be 'a1'.\r\n * <br/>\r\n * As for optional argument 'params' for constructor, you can specify *ANY* of\r\n * following properties:\r\n * <ul>\r\n * <li>explicit - specify true if this is explicit tag otherwise false \r\n *     (default is 'true').</li>\r\n * <li>tag - specify tag (default is 'a0' which means [0])</li>\r\n * <li>obj - specify ASN1Object which is tagged</li>\r\n * </ul>\r\n * @example\r\n * d1 = new KJUR.asn1.DERUTF8String({'str':'a'});\r\n * d2 = new KJUR.asn1.DERTaggedObject({'obj': d1});\r\n * hex = d2.getEncodedHex();\r\n */\r\nKJUR.asn1.DERTaggedObject = function(params) {\r\n    KJUR.asn1.DERTaggedObject.superclass.constructor.call(this);\r\n    this.hT = \"a0\";\r\n    this.hV = '';\r\n    this.isExplicit = true;\r\n    this.asn1Object = null;\r\n\r\n    /**\r\n     * set value by an ASN1Object\r\n     * @name setString\r\n     * @memberOf KJUR.asn1.DERTaggedObject\r\n     * @function\r\n     * @param {Boolean} isExplicitFlag flag for explicit/implicit tag\r\n     * @param {Integer} tagNoHex hexadecimal string of ASN.1 tag\r\n     * @param {ASN1Object} asn1Object ASN.1 to encapsulate\r\n     */\r\n    this.setASN1Object = function(isExplicitFlag, tagNoHex, asn1Object) {\r\n\tthis.hT = tagNoHex;\r\n\tthis.isExplicit = isExplicitFlag;\r\n\tthis.asn1Object = asn1Object;\r\n\tif (this.isExplicit) {\r\n\t    this.hV = this.asn1Object.getEncodedHex();\r\n\t    this.hTLV = null;\r\n\t    this.isModified = true;\r\n\t} else {\r\n\t    this.hV = null;\r\n\t    this.hTLV = asn1Object.getEncodedHex();\r\n\t    this.hTLV = this.hTLV.replace(/^../, tagNoHex);\r\n\t    this.isModified = false;\r\n\t}\r\n    };\r\n\r\n    this.getFreshValueHex = function() {\r\n\treturn this.hV;\r\n    };\r\n\r\n    if (typeof params != \"undefined\") {\r\n\tif (typeof params['tag'] != \"undefined\") {\r\n\t    this.hT = params['tag'];\r\n\t}\r\n\tif (typeof params['explicit'] != \"undefined\") {\r\n\t    this.isExplicit = params['explicit'];\r\n\t}\r\n\tif (typeof params['obj'] != \"undefined\") {\r\n\t    this.asn1Object = params['obj'];\r\n\t    this.setASN1Object(this.isExplicit, this.hT, this.asn1Object);\r\n\t}\r\n    }\r\n};\r\nJSX.extend(KJUR.asn1.DERTaggedObject, KJUR.asn1.ASN1Object);","import {int2char} from \"./jsbn\";\r\n\r\nvar b64map=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\nvar b64pad=\"=\";\r\n\r\nexport function hex2b64(h) {\r\n  var i;\r\n  var c;\r\n  var ret = \"\";\r\n  for(i = 0; i+3 <= h.length; i+=3) {\r\n    c = parseInt(h.substring(i,i+3),16);\r\n    ret += b64map.charAt(c >> 6) + b64map.charAt(c & 63);\r\n  }\r\n  if(i+1 == h.length) {\r\n    c = parseInt(h.substring(i,i+1),16);\r\n    ret += b64map.charAt(c << 2);\r\n  }\r\n  else if(i+2 == h.length) {\r\n    c = parseInt(h.substring(i,i+2),16);\r\n    ret += b64map.charAt(c >> 2) + b64map.charAt((c & 3) << 4);\r\n  }\r\n  while((ret.length & 3) > 0) ret += b64pad;\r\n  return ret;\r\n}\r\n\r\n// convert a base64 string to hex\r\nexport function b64tohex(s) {\r\n  var ret = \"\";\r\n  var i;\r\n  var k = 0; // b64 state, 0-3\r\n  var slop;\r\n  for(i = 0; i < s.length; ++i) {\r\n    if(s.charAt(i) == b64pad) break;\r\n    let v = b64map.indexOf(s.charAt(i));\r\n    if(v < 0) continue;\r\n    if(k == 0) {\r\n      ret += int2char(v >> 2);\r\n      slop = v & 3;\r\n      k = 1;\r\n    }\r\n    else if(k == 1) {\r\n      ret += int2char((slop << 2) | (v >> 4));\r\n      slop = v & 0xf;\r\n      k = 2;\r\n    }\r\n    else if(k == 2) {\r\n      ret += int2char(slop);\r\n      ret += int2char(v >> 2);\r\n      slop = v & 3;\r\n      k = 3;\r\n    }\r\n    else {\r\n      ret += int2char((slop << 2) | (v >> 4));\r\n      ret += int2char(v & 0xf);\r\n      k = 0;\r\n    }\r\n  }\r\n  if(k == 1)\r\n    ret += int2char(slop << 2);\r\n  return ret;\r\n}\r\n\r\n// convert a base64 string to a byte/number array\r\nexport function b64toBA(s) {\r\n  //piggyback on b64tohex for now, optimize later\r\n  var h = b64tohex(s);\r\n  var i;\r\n  var a = [];\r\n  for(i = 0; 2*i < h.length; ++i) {\r\n    a[i] = parseInt(h.substring(2*i,2*i+2),16);\r\n  }\r\n  return a;\r\n}\r\n","import {ASN1} from \"../lib/asn1js/asn1\";\r\nimport {RSAKey} from \"../lib/jsbn/rsa2\";\r\nimport {Base64} from \"../lib/asn1js/base64\";\r\nimport {Hex} from \"../lib/asn1js/hex\";\r\nimport {parseBigInt} from \"../lib/jsbn/rsa\";\r\nimport {KJUR} from \"../lib/jsrsasign/asn1-1.0\";\r\nimport {hex2b64} from \"../lib/jsbn/base64\";\r\nimport {b64tohex} from \"../lib/jsbn/base64\";\r\n/**\r\n * Retrieve the hexadecimal value (as a string) of the current ASN.1 element\r\n * @returns {string}\r\n * @public\r\n */\r\nASN1.prototype.getHexStringValue = function () {\r\n  var hexString = this.toHexString();\r\n  var offset = this.header * 2;\r\n  var length = this.length * 2;\r\n  return hexString.substr(offset, length);\r\n};\r\n\r\n/**\r\n * Method to parse a pem encoded string containing both a public or private key.\r\n * The method will translate the pem encoded string in a der encoded string and\r\n * will parse private key and public key parameters. This method accepts public key\r\n * in the rsaencryption pkcs #1 format (oid: 1.2.840.113549.1.1.1).\r\n *\r\n * @todo Check how many rsa formats use the same format of pkcs #1.\r\n *\r\n * The format is defined as:\r\n * PublicKeyInfo ::= SEQUENCE {\r\n *   algorithm       AlgorithmIdentifier,\r\n *   PublicKey       BIT STRING\r\n * }\r\n * Where AlgorithmIdentifier is:\r\n * AlgorithmIdentifier ::= SEQUENCE {\r\n *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm\r\n *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)\r\n * }\r\n * and PublicKey is a SEQUENCE encapsulated in a BIT STRING\r\n * RSAPublicKey ::= SEQUENCE {\r\n *   modulus           INTEGER,  -- n\r\n *   publicExponent    INTEGER   -- e\r\n * }\r\n * it's possible to examine the structure of the keys obtained from openssl using\r\n * an asn.1 dumper as the one used here to parse the components: http://lapo.it/asn1js/\r\n * @argument {string} pem the pem encoded string, can include the BEGIN/END header/footer\r\n * @private\r\n */\r\nRSAKey.prototype.parseKey = function (pem) {\r\n  try {\r\n    var modulus = 0;\r\n    var public_exponent = 0;\r\n    var reHex = /^\\s*(?:[0-9A-Fa-f][0-9A-Fa-f]\\s*)+$/;\r\n    var der = reHex.test(pem) ? Hex.decode(pem) : Base64.unarmor(pem);\r\n    var asn1 = ASN1.decode(der);\r\n\r\n    //Fixes a bug with OpenSSL 1.0+ private keys\r\n    if(asn1.sub.length === 3){\r\n        asn1 = asn1.sub[2].sub[0];\r\n    }\r\n    if (asn1.sub.length === 9) {\r\n\r\n      // Parse the private key.\r\n      modulus = asn1.sub[1].getHexStringValue(); //bigint\r\n      this.n = parseBigInt(modulus, 16);\r\n\r\n      public_exponent = asn1.sub[2].getHexStringValue(); //int\r\n      this.e = parseInt(public_exponent, 16);\r\n\r\n      var private_exponent = asn1.sub[3].getHexStringValue(); //bigint\r\n      this.d = parseBigInt(private_exponent, 16);\r\n\r\n      var prime1 = asn1.sub[4].getHexStringValue(); //bigint\r\n      this.p = parseBigInt(prime1, 16);\r\n\r\n      var prime2 = asn1.sub[5].getHexStringValue(); //bigint\r\n      this.q = parseBigInt(prime2, 16);\r\n\r\n      var exponent1 = asn1.sub[6].getHexStringValue(); //bigint\r\n      this.dmp1 = parseBigInt(exponent1, 16);\r\n\r\n      var exponent2 = asn1.sub[7].getHexStringValue(); //bigint\r\n      this.dmq1 = parseBigInt(exponent2, 16);\r\n\r\n      var coefficient = asn1.sub[8].getHexStringValue(); //bigint\r\n      this.coeff = parseBigInt(coefficient, 16);\r\n\r\n    }\r\n    else if (asn1.sub.length === 2) {\r\n\r\n      // Parse the public key.\r\n      var bit_string = asn1.sub[1];\r\n      var sequence = bit_string.sub[0];\r\n\r\n      modulus = sequence.sub[0].getHexStringValue();\r\n      this.n = parseBigInt(modulus, 16);\r\n      public_exponent = sequence.sub[1].getHexStringValue();\r\n      this.e = parseInt(public_exponent, 16);\r\n\r\n    }\r\n    else {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n  catch (ex) {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Translate rsa parameters in a hex encoded string representing the rsa key.\r\n *\r\n * The translation follow the ASN.1 notation :\r\n * RSAPrivateKey ::= SEQUENCE {\r\n *   version           Version,\r\n *   modulus           INTEGER,  -- n\r\n *   publicExponent    INTEGER,  -- e\r\n *   privateExponent   INTEGER,  -- d\r\n *   prime1            INTEGER,  -- p\r\n *   prime2            INTEGER,  -- q\r\n *   exponent1         INTEGER,  -- d mod (p1)\r\n *   exponent2         INTEGER,  -- d mod (q-1)\r\n *   coefficient       INTEGER,  -- (inverse of q) mod p\r\n * }\r\n * @returns {string}  DER Encoded String representing the rsa private key\r\n * @private\r\n */\r\nRSAKey.prototype.getPrivateBaseKey = function () {\r\n  var options = {\r\n    'array': [\r\n      new KJUR.asn1.DERInteger({'int': 0}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.n}),\r\n      new KJUR.asn1.DERInteger({'int': this.e}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.d}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.p}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.q}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.dmp1}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.dmq1}),\r\n      new KJUR.asn1.DERInteger({'bigint': this.coeff})\r\n    ]\r\n  };\r\n  var seq = new KJUR.asn1.DERSequence(options);\r\n  return seq.getEncodedHex();\r\n};\r\n\r\n/**\r\n * base64 (pem) encoded version of the DER encoded representation\r\n * @returns {string} pem encoded representation without header and footer\r\n * @public\r\n */\r\nRSAKey.prototype.getPrivateBaseKeyB64 = function () {\r\n  return hex2b64(this.getPrivateBaseKey());\r\n};\r\n\r\n/**\r\n * Translate rsa parameters in a hex encoded string representing the rsa public key.\r\n * The representation follow the ASN.1 notation :\r\n * PublicKeyInfo ::= SEQUENCE {\r\n *   algorithm       AlgorithmIdentifier,\r\n *   PublicKey       BIT STRING\r\n * }\r\n * Where AlgorithmIdentifier is:\r\n * AlgorithmIdentifier ::= SEQUENCE {\r\n *   algorithm       OBJECT IDENTIFIER,     the OID of the enc algorithm\r\n *   parameters      ANY DEFINED BY algorithm OPTIONAL (NULL for PKCS #1)\r\n * }\r\n * and PublicKey is a SEQUENCE encapsulated in a BIT STRING\r\n * RSAPublicKey ::= SEQUENCE {\r\n *   modulus           INTEGER,  -- n\r\n *   publicExponent    INTEGER   -- e\r\n * }\r\n * @returns {string} DER Encoded String representing the rsa public key\r\n * @private\r\n */\r\nRSAKey.prototype.getPublicBaseKey = function () {\r\n  var options = {\r\n    'array': [\r\n      new KJUR.asn1.DERObjectIdentifier({'oid': '1.2.840.113549.1.1.1'}), //RSA Encryption pkcs #1 oid\r\n      new KJUR.asn1.DERNull()\r\n    ]\r\n  };\r\n  var first_sequence = new KJUR.asn1.DERSequence(options);\r\n\r\n  options = {\r\n    'array': [\r\n      new KJUR.asn1.DERInteger({'bigint': this.n}),\r\n      new KJUR.asn1.DERInteger({'int': this.e})\r\n    ]\r\n  };\r\n  var second_sequence = new KJUR.asn1.DERSequence(options);\r\n\r\n  options = {\r\n    'hex': '00' + second_sequence.getEncodedHex()\r\n  };\r\n  var bit_string = new KJUR.asn1.DERBitString(options);\r\n\r\n  options = {\r\n    'array': [\r\n      first_sequence,\r\n      bit_string\r\n    ]\r\n  };\r\n  var seq = new KJUR.asn1.DERSequence(options);\r\n  return seq.getEncodedHex();\r\n};\r\n\r\n/**\r\n * base64 (pem) encoded version of the DER encoded representation\r\n * @returns {string} pem encoded representation without header and footer\r\n * @public\r\n */\r\nRSAKey.prototype.getPublicBaseKeyB64 = function () {\r\n  return hex2b64(this.getPublicBaseKey());\r\n};\r\n\r\n/**\r\n * wrap the string in block of width chars. The default value for rsa keys is 64\r\n * characters.\r\n * @param {string} str the pem encoded string without header and footer\r\n * @param {Number} [width=64] - the length the string has to be wrapped at\r\n * @returns {string}\r\n * @private\r\n */\r\nRSAKey.prototype.wordwrap = function (str, width) {\r\n  width = width || 64;\r\n  if (!str) {\r\n    return str;\r\n  }\r\n  var regex = '(.{1,' + width + '})( +|$\\n?)|(.{1,' + width + '})';\r\n  return str.match(RegExp(regex, 'g')).join('\\n');\r\n};\r\n\r\n/**\r\n * Retrieve the pem encoded private key\r\n * @returns {string} the pem encoded private key with header/footer\r\n * @public\r\n */\r\nRSAKey.prototype.getPrivateKey = function () {\r\n  var key = \"-----BEGIN RSA PRIVATE KEY-----\\n\";\r\n  key += this.wordwrap(this.getPrivateBaseKeyB64()) + \"\\n\";\r\n  key += \"-----END RSA PRIVATE KEY-----\";\r\n  return key;\r\n};\r\n\r\n/**\r\n * Retrieve the pem encoded public key\r\n * @returns {string} the pem encoded public key with header/footer\r\n * @public\r\n */\r\nRSAKey.prototype.getPublicKey = function () {\r\n  var key = \"-----BEGIN PUBLIC KEY-----\\n\";\r\n  key += this.wordwrap(this.getPublicBaseKeyB64()) + \"\\n\";\r\n  key += \"-----END PUBLIC KEY-----\";\r\n  return key;\r\n};\r\n\r\n/**\r\n * Check if the object contains the necessary parameters to populate the rsa modulus\r\n * and public exponent parameters.\r\n * @param {Object} [obj={}] - An object that may contain the two public key\r\n * parameters\r\n * @returns {boolean} true if the object contains both the modulus and the public exponent\r\n * properties (n and e)\r\n * @todo check for types of n and e. N should be a parseable bigInt object, E should\r\n * be a parseable integer number\r\n * @private\r\n */\r\nRSAKey.prototype.hasPublicKeyProperty = function (obj) {\r\n  obj = obj || {};\r\n  return (\r\n    obj.hasOwnProperty('n') &&\r\n    obj.hasOwnProperty('e')\r\n  );\r\n};\r\n\r\n/**\r\n * Check if the object contains ALL the parameters of an RSA key.\r\n * @param {Object} [obj={}] - An object that may contain nine rsa key\r\n * parameters\r\n * @returns {boolean} true if the object contains all the parameters needed\r\n * @todo check for types of the parameters all the parameters but the public exponent\r\n * should be parseable bigint objects, the public exponent should be a parseable integer number\r\n * @private\r\n */\r\nRSAKey.prototype.hasPrivateKeyProperty = function (obj) {\r\n  obj = obj || {};\r\n  return (\r\n    obj.hasOwnProperty('n') &&\r\n    obj.hasOwnProperty('e') &&\r\n    obj.hasOwnProperty('d') &&\r\n    obj.hasOwnProperty('p') &&\r\n    obj.hasOwnProperty('q') &&\r\n    obj.hasOwnProperty('dmp1') &&\r\n    obj.hasOwnProperty('dmq1') &&\r\n    obj.hasOwnProperty('coeff')\r\n  );\r\n};\r\n\r\n/**\r\n * Parse the properties of obj in the current rsa object. Obj should AT LEAST\r\n * include the modulus and public exponent (n, e) parameters.\r\n * @param {Object} obj - the object containing rsa parameters\r\n * @private\r\n */\r\nRSAKey.prototype.parsePropertiesFrom = function (obj) {\r\n  this.n = obj.n;\r\n  this.e = obj.e;\r\n\r\n  if (obj.hasOwnProperty('d')) {\r\n    this.d = obj.d;\r\n    this.p = obj.p;\r\n    this.q = obj.q;\r\n    this.dmp1 = obj.dmp1;\r\n    this.dmq1 = obj.dmq1;\r\n    this.coeff = obj.coeff;\r\n  }\r\n};\r\n\r\n/**\r\n * Create a new JSEncryptRSAKey that extends Tom Wu's RSA key object.\r\n * This object is just a decorator for parsing the key parameter\r\n * @param {string|Object} key - The key in string format, or an object containing\r\n * the parameters needed to build a RSAKey object.\r\n * @constructor\r\n */\r\nclass JSEncryptRSAKey extends RSAKey {\r\n  constructor(key) {\r\n    // Call the super constructor.\r\n    super();\r\n    // If a key key was provided.\r\n    if (key) {\r\n      // If this is a string...\r\n      if (typeof key === 'string') {\r\n        this.parseKey(key);\r\n      }\r\n      else if (\r\n          this.hasPrivateKeyProperty(key) ||\r\n          this.hasPublicKeyProperty(key)\r\n      ) {\r\n        // Set the values for the key.\r\n        this.parsePropertiesFrom(key);\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n/**\r\n *\r\n * @param {Object} [options = {}] - An object to customize JSEncrypt behaviour\r\n * possible parameters are:\r\n * - default_key_size        {number}  default: 1024 the key size in bit\r\n * - default_public_exponent {string}  default: '010001' the hexadecimal representation of the public exponent\r\n * - log                     {boolean} default: false whether log warn/error or not\r\n * @constructor\r\n */\r\nexport class JSEncrypt{\r\n  constructor (options) {\r\n    options = options || {};\r\n    this.default_key_size = parseInt(options.default_key_size) || 1024;\r\n    this.default_public_exponent = options.default_public_exponent || '010001'; //65537 default openssl public exponent for rsa key type\r\n    this.log = options.log || false;\r\n    // The private and public key.\r\n    this.key = null;\r\n  }\r\n}\r\n\r\n/**\r\n * Method to set the rsa key parameter (one method is enough to set both the public\r\n * and the private key, since the private key contains the public key paramenters)\r\n * Log a warning if logs are enabled\r\n * @param {Object|string} key the pem encoded string or an object (with or without header/footer)\r\n * @public\r\n */\r\nJSEncrypt.prototype.setKey = function (key) {\r\n  if (this.log && this.key) {\r\n    console.warn('A key was already set, overriding existing.');\r\n  }\r\n  this.key = new JSEncryptRSAKey(key);\r\n};\r\n\r\n/**\r\n * Proxy method for setKey, for api compatibility\r\n * @see setKey\r\n * @public\r\n */\r\nJSEncrypt.prototype.setPrivateKey = function (privkey) {\r\n  // Create the key.\r\n  this.setKey(privkey);\r\n};\r\n\r\n/**\r\n * Proxy method for setKey, for api compatibility\r\n * @see setKey\r\n * @public\r\n */\r\nJSEncrypt.prototype.setPublicKey = function (pubkey) {\r\n  // Sets the public key.\r\n  this.setKey(pubkey);\r\n};\r\n\r\n/**\r\n * Proxy method for RSAKey object's decrypt, decrypt the string using the private\r\n * components of the rsa key object. Note that if the object was not set will be created\r\n * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor\r\n * @param {string} string base64 encoded crypted string to decrypt\r\n * @return {string} the decrypted string\r\n * @public\r\n */\r\nJSEncrypt.prototype.decrypt = function (string) {\r\n  // Return the decrypted string.\r\n  try {\r\n    return this.getKey().decrypt(b64tohex(string));\r\n  }\r\n  catch (ex) {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Proxy method for RSAKey object's encrypt, encrypt the string using the public\r\n * components of the rsa key object. Note that if the object was not set will be created\r\n * on the fly (by the getKey method) using the parameters passed in the JSEncrypt constructor\r\n * @param {string} string the string to encrypt\r\n * @return {string} the encrypted string encoded in base64\r\n * @public\r\n */\r\nJSEncrypt.prototype.encrypt = function (string) {\r\n  // Return the encrypted string.\r\n  try {\r\n    return hex2b64(this.getKey().encrypt(string));\r\n  }\r\n  catch (ex) {\r\n    return false;\r\n  }\r\n};\r\n\r\n/**\r\n * Getter for the current JSEncryptRSAKey object. If it doesn't exists a new object\r\n * will be created and returned\r\n * @param {callback} [cb] the callback to be called if we want the key to be generated\r\n * in an async fashion\r\n * @returns {JSEncryptRSAKey} the JSEncryptRSAKey object\r\n * @public\r\n */\r\nJSEncrypt.prototype.getKey = function (cb) {\r\n  // Only create new if it does not exist.\r\n  if (!this.key) {\r\n    // Get a new private key.\r\n    this.key = new JSEncryptRSAKey();\r\n    if (cb && {}.toString.call(cb) === '[object Function]') {\r\n      this.key.generateAsync(this.default_key_size, this.default_public_exponent, cb);\r\n      return;\r\n    }\r\n    // Generate the key.\r\n    this.key.generate(this.default_key_size, this.default_public_exponent);\r\n  }\r\n  return this.key;\r\n};\r\n\r\n/**\r\n * Returns the pem encoded representation of the private key\r\n * If the key doesn't exists a new key will be created\r\n * @returns {string} pem encoded representation of the private key WITH header and footer\r\n * @public\r\n */\r\nJSEncrypt.prototype.getPrivateKey = function () {\r\n  // Return the private representation of this key.\r\n  return this.getKey().getPrivateKey();\r\n};\r\n\r\n/**\r\n * Returns the pem encoded representation of the private key\r\n * If the key doesn't exists a new key will be created\r\n * @returns {string} pem encoded representation of the private key WITHOUT header and footer\r\n * @public\r\n */\r\nJSEncrypt.prototype.getPrivateKeyB64 = function () {\r\n  // Return the private representation of this key.\r\n  return this.getKey().getPrivateBaseKeyB64();\r\n};\r\n\r\n\r\n/**\r\n * Returns the pem encoded representation of the public key\r\n * If the key doesn't exists a new key will be created\r\n * @returns {string} pem encoded representation of the public key WITH header and footer\r\n * @public\r\n */\r\nJSEncrypt.prototype.getPublicKey = function () {\r\n  // Return the private representation of this key.\r\n  return this.getKey().getPublicKey();\r\n};\r\n\r\n/**\r\n * Returns the pem encoded representation of the public key\r\n * If the key doesn't exists a new key will be created\r\n * @returns {string} pem encoded representation of the public key WITHOUT header and footer\r\n * @public\r\n */\r\nJSEncrypt.prototype.getPublicKeyB64 = function () {\r\n  // Return the private representation of this key.\r\n  return this.getKey().getPublicBaseKeyB64();\r\n};\r\n\r\n","import {getTagged} from 'bp_logger';\r\nimport {BaseTransport} from \"../core/base_transport\";\r\nimport {CPU_CORES} from \"../core/util/browser\";\r\nimport {JSEncrypt} from 'jsencrypt';\r\n\r\nconst LOG_TAG = \"transport:ws\";\r\nconst Log = getTagged(LOG_TAG);\r\nconst WORKER_COUNT = CPU_CORES;\r\n\r\nexport default class WebsocketTransport extends BaseTransport {\r\n    constructor(endpoint, stream_type, options={\r\n        socket:`${location.protocol.replace('http', 'ws')}//${location.host}/ws/`,\r\n        workers: 1\r\n    }) {\r\n        super(endpoint, stream_type);\r\n        this.proxies = [];\r\n        this.currentProxy = 0;\r\n        this.workers = 1;\r\n        this.socket_url = options.socket;\r\n        this.ready = this.connect();\r\n    }\r\n\r\n    static canTransfer(stream_type) {\r\n        return WebsocketTransport.streamTypes().includes(stream_type);\r\n    }\r\n\r\n    static streamTypes() {\r\n        return ['hls', 'rtsp'];\r\n    }\r\n\r\n    connect() {\r\n        return this.disconnect().then(()=>{\r\n            let promises = [];\r\n            // TODO: get mirror list\r\n            for (let i=0; i<this.workers; ++i) {\r\n                let proxy = new WebSocketProxy(this.socket_url, this.endpoint, this.stream_type);\r\n\r\n                proxy.set_disconnect_handler((e)=> {\r\n                    this.eventSource.dispatchEvent('disconnected', {code: e.code, reason: e.reason});\r\n                    // TODO: only reconnect on demand\r\n                    if ([1000, 1006, 1013, 1011].includes(e.code)) {\r\n                        setTimeout(()=> {\r\n                            if (this.ready && this.ready.reject) {\r\n                                this.ready.reject();\r\n                            }\r\n                            this.ready = this.connect();\r\n                        }, 3000);\r\n                    }\r\n                });\r\n\r\n                proxy.set_data_handler((data)=> {\r\n                    this.dataQueue.push(new Uint8Array(data));\r\n                    this.eventSource.dispatchEvent('data');\r\n                });\r\n\r\n                promises.push(proxy.connect().then(()=> {\r\n                    this.eventSource.dispatchEvent('connected');\r\n                }).catch((e)=> {\r\n                    this.eventSource.dispatchEvent('error');\r\n                    throw new Error(e);\r\n                }));\r\n                this.proxies.push(proxy);\r\n            }\r\n            return Promise.all(promises);\r\n        });\r\n    }\r\n\r\n    disconnect() {\r\n        let promises = [];\r\n        for (let i=0; i<this.proxies.length; ++i) {\r\n            this.proxies[i].close();\r\n        }\r\n        this.proxies= [];\r\n        if (this.proxies.length) {\r\n            return Promise.all(promises);\r\n        } else {\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n\r\n    socket() {\r\n        return this.proxies[(this.currentProxy++)%this.proxies.length];\r\n    }\r\n\r\n    send(_data, fn) {\r\n        let res = this.socket().send(_data);\r\n        if (fn) {\r\n            fn(res.seq);\r\n        }\r\n        return res.promise;\r\n    }\r\n}\r\n\r\nclass WSPProtocol {\r\n    static get PROTO() {return  'WSP';}\r\n\r\n    static get V1_1() {return '1.1';}\r\n\r\n    static get CMD_INIT() {return 'INIT';}\r\n    static get CMD_JOIN() {return  'JOIN';}\r\n    static get CMD_WRAP() {return  'WRAP';}\r\n\r\n\r\n    constructor(ver){\r\n        this.ver = ver;\r\n    }\r\n\r\n    build(cmd, data, payload=''){\r\n        let data_str='';\r\n        if (!data.seq) {\r\n            data.seq = ++WSPProtocol.seq;\r\n        }\r\n        for (let k in data) {\r\n            data_str += `${k}: ${data[k]}\\r\\n`;\r\n        }\r\n        return `${WSPProtocol.PROTO}/${this.ver} ${cmd}\\r\\n${data_str}\\r\\n${payload}`;\r\n    }\r\n\r\n    static parse(data) {\r\n        let payIdx = data.indexOf('\\r\\n\\r\\n');\r\n        let lines = data.substr(0, payIdx).split('\\r\\n');\r\n        let hdr = lines.shift().match(new RegExp(`${WSPProtocol.PROTO}/${WSPProtocol.V1_1}\\\\s+(\\\\d+)\\\\s+(.+)`));\r\n        if (hdr) {\r\n            let res = {\r\n                code: Number(hdr[1]),\r\n                msg:  hdr[2],\r\n                data: {},\r\n                payload: ''\r\n            };\r\n            while (lines.length) {\r\n                let line = lines.shift();\r\n                if (line) {\r\n                    let [k,v] = line.split(':');\r\n                    res.data[k.trim()] = v.trim();\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            res.payload = data.substr(payIdx+4);\r\n            return res;\r\n        }\r\n        return null;\r\n    }\r\n}\r\nWSPProtocol.seq = 0;\r\n\r\nclass WebSocketProxy {\r\n    static get CHN_CONTROL() {return 'control';}\r\n    static get CHN_DATA() {return  'data';}\r\n\r\n    constructor(wsurl, endpoint, stream_type) {\r\n        this.url = wsurl;\r\n        this.stream_type = stream_type;\r\n        this.endpoint = endpoint;\r\n        this.data_handler = ()=>{};\r\n        this.disconnect_handler = ()=>{};\r\n        this.builder = new WSPProtocol(WSPProtocol.V1_1);\r\n        this.awaitingPromises = {};\r\n        this.seq = 0;\r\n        this.encryptor = new JSEncrypt();\r\n    }\r\n\r\n    set_data_handler(handler) {\r\n        this.data_handler = handler;\r\n    }\r\n\r\n    set_disconnect_handler(handler) {\r\n        this.disconnect_handler = handler;\r\n    }\r\n\r\n    close() {\r\n        Log.log('closing connection');\r\n        return new Promise((resolve)=>{\r\n            this.ctrlChannel.onclose = ()=>{\r\n                if (this.dataChannel) {\r\n                    this.dataChannel.onclose = ()=>{\r\n                        Log.log('closed');\r\n                        resolve();\r\n                    };\r\n                    this.dataChannel.close();\r\n                } else {\r\n                    Log.log('closed');\r\n                    resolve();\r\n                }\r\n            };\r\n            this.ctrlChannel.close();\r\n        });\r\n    }\r\n\r\n    onDisconnect(){\r\n        this.ctrlChannel.onclose=null;\r\n        this.ctrlChannel.close();\r\n        if (this.dataChannel) {\r\n            this.dataChannel.onclose = null;\r\n            this.dataChannel.close();\r\n        }\r\n        this.disconnect_handler(this);\r\n    }\r\n\r\n    initDataChannel(channel_id) {\r\n        return new Promise((resolve, reject)=>{\r\n            this.dataChannel = new WebSocket(this.url, WebSocketProxy.CHN_DATA);\r\n            this.dataChannel.binaryType = 'arraybuffer';\r\n            this.dataChannel.onopen = ()=>{\r\n                let msg = this.builder.build(WSPProtocol.CMD_JOIN, {\r\n                    channel: channel_id\r\n                });\r\n                Log.debug(msg);\r\n                this.dataChannel.send(msg);\r\n            };\r\n            this.dataChannel.onmessage = (ev)=>{\r\n                Log.debug(`[data]\\r\\n${ev.data}`);\r\n                let res = WSPProtocol.parse(ev.data);\r\n                if (!res) {\r\n                    return reject();\r\n                }\r\n\r\n                this.dataChannel.onmessage=(e)=>{\r\n                    Log.debug('got data');\r\n                    if (this.data_handler) {\r\n                        this.data_handler(e.data);\r\n                    }\r\n                };\r\n                resolve();\r\n            };\r\n            this.dataChannel.onerror = (e)=>{\r\n                Log.error(`[data] ${e.type}`);\r\n                this.dataChannel.close();\r\n            };\r\n            this.dataChannel.onclose = (e)=>{\r\n                Log.error(`[data] ${e.type}. code: ${e.code}, reason: ${e.reason || 'unknown reason'}`);\r\n                this.onDisconnect(e);\r\n            };\r\n        });\r\n    }\r\n\r\n    connect() {\r\n        this.encryptionKey = null;\r\n        return new Promise((resolve, reject)=>{\r\n            this.ctrlChannel = new WebSocket(this.url, WebSocketProxy.CHN_CONTROL);\r\n\r\n            this.connected = false;\r\n\r\n            this.ctrlChannel.onopen = ()=>{\r\n                let headers = {\r\n                    proto: this.stream_type\r\n                };\r\n                if (this.endpoint.socket) {\r\n                    headers.socket = this.endpoint.socket;\r\n                } else {\r\n                    Object.assign(headers, {\r\n                        host:  this.endpoint.host,\r\n                        port:  this.endpoint.port\r\n                    })\r\n                }\r\n                let msg = this.builder.build(WSPProtocol.CMD_INIT, headers);\r\n                Log.debug(msg);\r\n                this.ctrlChannel.send(msg);\r\n            };\r\n\r\n            this.ctrlChannel.onmessage = (ev)=>{\r\n                Log.debug(`[ctrl]\\r\\n${ev.data}`);\r\n\r\n                let res = WSPProtocol.parse(ev.data);\r\n                if (!res) {\r\n                    return reject();\r\n                }\r\n\r\n                if (res.code >= 300) {\r\n                    Log.error(`[ctrl]\\r\\n${res.code}: ${res.msg}`);\r\n                    return reject();\r\n                }\r\n                this.ctrlChannel.onmessage = (e)=> {\r\n                    let res = WSPProtocol.parse(e.data);\r\n                    Log.debug(`[ctrl]\\r\\n${e.data}`);\r\n                    if (res.data.seq in this.awaitingPromises) {\r\n                        if (res.code < 300) {\r\n                            this.awaitingPromises[res.data.seq].resolve(res);\r\n                        } else {\r\n                            this.awaitingPromises[res.data.seq].reject(res);\r\n                        }\r\n                        delete this.awaitingPromises[res.data.seq];\r\n                    }\r\n                };\r\n                this.encryptionKey = res.data.pubkey || null;\r\n                if (this.encryptionKey) {\r\n                    this.encryptor.setPublicKey(this.encryptionKey);\r\n                    // TODO: check errors\r\n                }\r\n                this.initDataChannel(res.data.channel).then(resolve).catch(reject);\r\n            };\r\n\r\n            this.ctrlChannel.onerror = (e)=>{\r\n                Log.error(`[ctrl] ${e.type}`);\r\n                this.ctrlChannel.close();\r\n            };\r\n            this.ctrlChannel.onclose = (e)=>{\r\n                Log.error(`[ctrl] ${e.type}. code: ${e.code} ${e.reason || 'unknown reason'}`);\r\n                this.onDisconnect(e);\r\n            };\r\n        });\r\n    }\r\n\r\n    encrypt(msg) {\r\n        if (this.encryptionKey) {\r\n            let crypted = this.encryptor.encrypt(msg);\r\n            if (crypted === false) {\r\n                throw new Error(\"Encryption failed. Stopping\")\r\n            }\r\n            return crypted;\r\n        }\r\n        return msg;\r\n    }\r\n\r\n    send(payload) {\r\n        if (this.ctrlChannel.readyState != WebSocket.OPEN) {\r\n            this.close();\r\n            // .then(this.connect.bind(this));\r\n            // return;\r\n            throw new Error('disconnected');\r\n        }\r\n        // Log.debug(payload);\r\n        let data = {\r\n            contentLength: payload.length,\r\n            seq: ++WSPProtocol.seq\r\n        };\r\n        return {\r\n            seq:data.seq,\r\n            promise: new Promise((resolve, reject)=>{\r\n                this.awaitingPromises[data.seq] = {resolve, reject};\r\n                let msg = this.builder.build(WSPProtocol.CMD_WRAP, data, payload);\r\n                Log.debug(msg);\r\n                this.ctrlChannel.send(this.encrypt(msg));\r\n            })};\r\n    }\r\n}","import {Url} from './core/util/url';\r\nimport {Remuxer} from './core/remuxer/remuxer';\r\nimport DEFAULT_CLIENT from './client/rtsp/client';\r\nimport DEFAULT_TRANSPORT from './transport/websocket';\r\nimport {getTagged} from 'bp_logger';\r\n\r\nconst Log = getTagged('wsp');\r\n\r\nexport class StreamType {\r\n    static get HLS() {return 'hls';}\r\n    static get RTSP() {return 'rtsp';}\r\n\r\n    static isSupported(type) {\r\n        return [StreamType.HLS, StreamType.RTSP].includes(type);\r\n    }\r\n\r\n    static fromUrl(url) {\r\n        let parsed = Url.parse(url);\r\n        switch (parsed.protocol) {\r\n            case 'rtsp':\r\n                return StreamType.RTSP;\r\n            case 'http':\r\n            case 'https':\r\n                if (url.indexOf('.m3u8')>=0) {\r\n                    return StreamType.HLS;\r\n                } else {\r\n                    return null;\r\n                }\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n\r\n    static fromMime(mime) {\r\n        switch (mime) {\r\n            case 'application/x-rtsp':\r\n                return StreamType.RTSP;\r\n            case 'application/vnd.apple.mpegurl':\r\n            case 'application/x-mpegurl':\r\n                return StreamType.HLS;\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n}\r\n\r\nexport class WSPlayer {\r\n\r\n    constructor(node, opts) {\r\n        if (typeof node == typeof '') {\r\n            this.player = document.getElementById(node);\r\n        } else {\r\n            this.player = node;\r\n        }\r\n\r\n        let modules = opts.modules || {\r\n            client: DEFAULT_CLIENT,\r\n            transport: {\r\n                constructor: DEFAULT_TRANSPORT\r\n            }\r\n        };\r\n\r\n        this.modules = {};\r\n        for (let module of modules) {\r\n            let transport = module.transport || DEFAULT_TRANSPORT;\r\n            let client = module.client || DEFAULT_CLIENT;\r\n            if (transport.constructor.canTransfer(client.streamType())) {\r\n                this.modules[client.streamType()] = {\r\n                    client: client,\r\n                    transport: transport\r\n                }\r\n            } else {\r\n                Log.warn(`Client stream type ${client.streamType()} is incompatible with transport types [${transport.streamTypes().join(', ')}]. Skip`)\r\n            }\r\n        }\r\n        \r\n        this.type = StreamType.RTSP;\r\n        this.url = null;\r\n        if (opts.url && opts.type) {\r\n            this.url = opts.url;\r\n            this.type = opts.type;\r\n        } else {\r\n            if (!this._checkSource(this.player)) {\r\n                for (let i=0; i<this.player.children.length; ++i) {\r\n                    if (this._checkSource(this.player.children[i])) {\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            if (!this.url) {\r\n                 throw new Error('No playable endpoint found');\r\n            }\r\n        }\r\n\r\n        this.setSource(this.url, this.type);\r\n\r\n        this.player.addEventListener('play', ()=>{\r\n            if (!this.isPlaying()) {\r\n                this.client.start();\r\n            }\r\n        }, false);\r\n\r\n        this.player.addEventListener('pause', ()=>{\r\n            this.client.stop();\r\n        }, false);\r\n    }\r\n\r\n    // TODO: check native support\r\n\r\n    isPlaying() {\r\n        return !(this.player.paused || this.client.paused);\r\n    }\r\n\r\n    static canPlayWithModules(mimeType, modules) {\r\n\r\n        let filteredModules = {};\r\n        for (let module of modules) {\r\n            let transport = module.transport || DEFAULT_TRANSPORT;\r\n            let client = module.client || DEFAULT_CLIENT;\r\n            if (transport.canTransfer(client.streamType())) {\r\n                filteredModules[client.streamType()] = true;\r\n            }\r\n        }\r\n\r\n        for (let type in filteredModules) {\r\n            if (type == StreamType.fromMime(mimeType)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /// TODO: deprecate it?\r\n    static canPlay(resource) {\r\n        return StreamType.fromMime(resource.type) || StreamType.fromUrl(resource.src);\r\n    }\r\n\r\n    _checkSource(src) {\r\n        if (!src.dataset['ignore'] && src.src && !this.player.canPlayType(src.type) && (StreamType.fromMime(src.type) || StreamType.fromUrl(src.src))) {\r\n            this.url = src.src;\r\n            this.type = src.type ? StreamType.fromMime(src.type) : StreamType.fromUrl(src.src);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    setSource(url, type) {\r\n        if (this.transport) {\r\n            this.transport.destroy();\r\n        }\r\n        this.endpoint = Url.parse(url);\r\n        this.url = url;\r\n        let transport = this.modules[type].transport;\r\n        this.transport = new transport.constructor(this.endpoint, this.type, transport.options);\r\n\r\n\r\n        let lastType = this.type;\r\n        this.type = (StreamType.isSupported(type)?type:false) || StreamType.fromMime(type);\r\n        if (!this.type) {\r\n            throw new Error(\"Bad stream type\");\r\n        }\r\n\r\n        if (lastType!=this.type || !this.client) {\r\n            if (this.client) {\r\n                this.client.destroy();\r\n            }\r\n            let client = this.modules[type].client;\r\n            this.client = new client(this.transport);\r\n            if (!this.remuxer) {\r\n                this.remuxer = new Remuxer(this.player);\r\n            }\r\n            this.remuxer.attachClient(this.client);\r\n        }\r\n        this.client.attachTransport(this.transport);\r\n        this.client.setSource(this.endpoint);\r\n\r\n        if (this.player.autoplay) {\r\n            this.client.start();\r\n        }\r\n    }\r\n\r\n    start() {\r\n        this.client.start();\r\n    }\r\n\r\n    stop() {\r\n        this.client.stop();\r\n    }\r\n\r\n}","import {getTagged} from 'bp_logger';\r\nimport {BaseTransport} from \"../core/base_transport\";\r\nimport {CPU_CORES} from \"../core/util/browser\";\r\nimport {JSEncrypt} from 'jsencrypt';\r\n\r\nconst LOG_TAG = \"transport:ws\";\r\nconst Log = getTagged(LOG_TAG);\r\nconst WORKER_COUNT = CPU_CORES;\r\n\r\nexport default class WebsocketTransport extends BaseTransport {\r\n    constructor(endpoint, stream_type, options={\r\n        socket:`${location.protocol.replace('http', 'ws')}//${location.host}/ws/`,\r\n        workers: 1\r\n    }) {\r\n        super(endpoint, stream_type);\r\n        this.proxies = [];\r\n        this.currentProxy = 0;\r\n        this.workers = 1;\r\n        this.socket_url = options.socket;\r\n        this.ready = this.connect();\r\n    }\r\n\r\n    static canTransfer(stream_type) {\r\n        return WebsocketTransport.streamTypes().includes(stream_type);\r\n    }\r\n\r\n    static streamTypes() {\r\n        return ['hls', 'rtsp'];\r\n    }\r\n\r\n    connect() {\r\n        return this.disconnect().then(()=>{\r\n            let promises = [];\r\n            // TODO: get mirror list\r\n            for (let i=0; i<this.workers; ++i) {\r\n                let proxy = new WebSocketProxy(this.socket_url, this.endpoint, this.stream_type);\r\n\r\n                proxy.set_disconnect_handler((e)=> {\r\n                    this.eventSource.dispatchEvent('disconnected', {code: e.code, reason: e.reason});\r\n                    // TODO: only reconnect on demand\r\n                    if ([1000, 1006, 1013, 1011].includes(e.code)) {\r\n                        setTimeout(()=> {\r\n                            if (this.ready && this.ready.reject) {\r\n                                this.ready.reject();\r\n                            }\r\n                            this.ready = this.connect();\r\n                        }, 3000);\r\n                    }\r\n                });\r\n\r\n                proxy.set_data_handler((data)=> {\r\n                    this.dataQueue.push(new Uint8Array(data));\r\n                    this.eventSource.dispatchEvent('data');\r\n                });\r\n\r\n                promises.push(proxy.connect().then(()=> {\r\n                    this.eventSource.dispatchEvent('connected');\r\n                }).catch((e)=> {\r\n                    this.eventSource.dispatchEvent('error');\r\n                    throw new Error(e);\r\n                }));\r\n                this.proxies.push(proxy);\r\n            }\r\n            return Promise.all(promises);\r\n        });\r\n    }\r\n\r\n    disconnect() {\r\n        let promises = [];\r\n        for (let i=0; i<this.proxies.length; ++i) {\r\n            this.proxies[i].close();\r\n        }\r\n        this.proxies= [];\r\n        if (this.proxies.length) {\r\n            return Promise.all(promises);\r\n        } else {\r\n            return Promise.resolve();\r\n        }\r\n    }\r\n\r\n    socket() {\r\n        return this.proxies[(this.currentProxy++)%this.proxies.length];\r\n    }\r\n\r\n    send(_data, fn) {\r\n        let res = this.socket().send(_data);\r\n        if (fn) {\r\n            fn(res.seq);\r\n        }\r\n        return res.promise;\r\n    }\r\n}\r\n\r\nclass WSPProtocol {\r\n    static get PROTO() {return  'WSP';}\r\n\r\n    static get V1_1() {return '1.1';}\r\n\r\n    static get CMD_INIT() {return 'INIT';}\r\n    static get CMD_JOIN() {return  'JOIN';}\r\n    static get CMD_WRAP() {return  'WRAP';}\r\n\r\n\r\n    constructor(ver){\r\n        this.ver = ver;\r\n    }\r\n\r\n    build(cmd, data, payload=''){\r\n        let data_str='';\r\n        if (!data.seq) {\r\n            data.seq = ++WSPProtocol.seq;\r\n        }\r\n        for (let k in data) {\r\n            data_str += `${k}: ${data[k]}\\r\\n`;\r\n        }\r\n        return `${WSPProtocol.PROTO}/${this.ver} ${cmd}\\r\\n${data_str}\\r\\n${payload}`;\r\n    }\r\n\r\n    static parse(data) {\r\n        let payIdx = data.indexOf('\\r\\n\\r\\n');\r\n        let lines = data.substr(0, payIdx).split('\\r\\n');\r\n        let hdr = lines.shift().match(new RegExp(`${WSPProtocol.PROTO}/${WSPProtocol.V1_1}\\\\s+(\\\\d+)\\\\s+(.+)`));\r\n        if (hdr) {\r\n            let res = {\r\n                code: Number(hdr[1]),\r\n                msg:  hdr[2],\r\n                data: {},\r\n                payload: ''\r\n            };\r\n            while (lines.length) {\r\n                let line = lines.shift();\r\n                if (line) {\r\n                    let [k,v] = line.split(':');\r\n                    res.data[k.trim()] = v.trim();\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n            res.payload = data.substr(payIdx+4);\r\n            return res;\r\n        }\r\n        return null;\r\n    }\r\n}\r\nWSPProtocol.seq = 0;\r\n\r\nclass WebSocketProxy {\r\n    static get CHN_CONTROL() {return 'control';}\r\n    static get CHN_DATA() {return  'data';}\r\n\r\n    constructor(wsurl, endpoint, stream_type) {\r\n        this.url = wsurl;\r\n        this.stream_type = stream_type;\r\n        this.endpoint = endpoint;\r\n        this.data_handler = ()=>{};\r\n        this.disconnect_handler = ()=>{};\r\n        this.builder = new WSPProtocol(WSPProtocol.V1_1);\r\n        this.awaitingPromises = {};\r\n        this.seq = 0;\r\n        this.encryptor = new JSEncrypt();\r\n    }\r\n\r\n    set_data_handler(handler) {\r\n        this.data_handler = handler;\r\n    }\r\n\r\n    set_disconnect_handler(handler) {\r\n        this.disconnect_handler = handler;\r\n    }\r\n\r\n    close() {\r\n        Log.log('closing connection');\r\n        return new Promise((resolve)=>{\r\n            this.ctrlChannel.onclose = ()=>{\r\n                if (this.dataChannel) {\r\n                    this.dataChannel.onclose = ()=>{\r\n                        Log.log('closed');\r\n                        resolve();\r\n                    };\r\n                    this.dataChannel.close();\r\n                } else {\r\n                    Log.log('closed');\r\n                    resolve();\r\n                }\r\n            };\r\n            this.ctrlChannel.close();\r\n        });\r\n    }\r\n\r\n    onDisconnect(){\r\n        this.ctrlChannel.onclose=null;\r\n        this.ctrlChannel.close();\r\n        if (this.dataChannel) {\r\n            this.dataChannel.onclose = null;\r\n            this.dataChannel.close();\r\n        }\r\n        this.disconnect_handler(this);\r\n    }\r\n\r\n    initDataChannel(channel_id) {\r\n        return new Promise((resolve, reject)=>{\r\n            this.dataChannel = new WebSocket(this.url, WebSocketProxy.CHN_DATA);\r\n            this.dataChannel.binaryType = 'arraybuffer';\r\n            this.dataChannel.onopen = ()=>{\r\n                let msg = this.builder.build(WSPProtocol.CMD_JOIN, {\r\n                    channel: channel_id\r\n                });\r\n                Log.debug(msg);\r\n                this.dataChannel.send(msg);\r\n            };\r\n            this.dataChannel.onmessage = (ev)=>{\r\n                Log.debug(`[data]\\r\\n${ev.data}`);\r\n                let res = WSPProtocol.parse(ev.data);\r\n                if (!res) {\r\n                    return reject();\r\n                }\r\n\r\n                this.dataChannel.onmessage=(e)=>{\r\n                    Log.debug('got data');\r\n                    if (this.data_handler) {\r\n                        this.data_handler(e.data);\r\n                    }\r\n                };\r\n                resolve();\r\n            };\r\n            this.dataChannel.onerror = (e)=>{\r\n                Log.error(`[data] ${e.type}`);\r\n                this.dataChannel.close();\r\n            };\r\n            this.dataChannel.onclose = (e)=>{\r\n                Log.error(`[data] ${e.type}. code: ${e.code}, reason: ${e.reason || 'unknown reason'}`);\r\n                this.onDisconnect(e);\r\n            };\r\n        });\r\n    }\r\n\r\n    connect() {\r\n        this.encryptionKey = null;\r\n        return new Promise((resolve, reject)=>{\r\n            this.ctrlChannel = new WebSocket(this.url, WebSocketProxy.CHN_CONTROL);\r\n\r\n            this.connected = false;\r\n\r\n            this.ctrlChannel.onopen = ()=>{\r\n                let headers = {\r\n                    proto: this.stream_type\r\n                };\r\n                if (this.endpoint.socket) {\r\n                    headers.socket = this.endpoint.socket;\r\n                } else {\r\n                    Object.assign(headers, {\r\n                        host:  this.endpoint.host,\r\n                        port:  this.endpoint.port\r\n                    })\r\n                }\r\n                let msg = this.builder.build(WSPProtocol.CMD_INIT, headers);\r\n                Log.debug(msg);\r\n                this.ctrlChannel.send(msg);\r\n            };\r\n\r\n            this.ctrlChannel.onmessage = (ev)=>{\r\n                Log.debug(`[ctrl]\\r\\n${ev.data}`);\r\n\r\n                let res = WSPProtocol.parse(ev.data);\r\n                if (!res) {\r\n                    return reject();\r\n                }\r\n\r\n                if (res.code >= 300) {\r\n                    Log.error(`[ctrl]\\r\\n${res.code}: ${res.msg}`);\r\n                    return reject();\r\n                }\r\n                this.ctrlChannel.onmessage = (e)=> {\r\n                    let res = WSPProtocol.parse(e.data);\r\n                    Log.debug(`[ctrl]\\r\\n${e.data}`);\r\n                    if (res.data.seq in this.awaitingPromises) {\r\n                        if (res.code < 300) {\r\n                            this.awaitingPromises[res.data.seq].resolve(res);\r\n                        } else {\r\n                            this.awaitingPromises[res.data.seq].reject(res);\r\n                        }\r\n                        delete this.awaitingPromises[res.data.seq];\r\n                    }\r\n                };\r\n                this.encryptionKey = res.data.pubkey || null;\r\n                if (this.encryptionKey) {\r\n                    this.encryptor.setPublicKey(this.encryptionKey);\r\n                    // TODO: check errors\r\n                }\r\n                this.initDataChannel(res.data.channel).then(resolve).catch(reject);\r\n            };\r\n\r\n            this.ctrlChannel.onerror = (e)=>{\r\n                Log.error(`[ctrl] ${e.type}`);\r\n                this.ctrlChannel.close();\r\n            };\r\n            this.ctrlChannel.onclose = (e)=>{\r\n                Log.error(`[ctrl] ${e.type}. code: ${e.code} ${e.reason || 'unknown reason'}`);\r\n                this.onDisconnect(e);\r\n            };\r\n        });\r\n    }\r\n\r\n    encrypt(msg) {\r\n        if (this.encryptionKey) {\r\n            let crypted = this.encryptor.encrypt(msg);\r\n            if (crypted === false) {\r\n                throw new Error(\"Encryption failed. Stopping\")\r\n            }\r\n            return crypted;\r\n        }\r\n        return msg;\r\n    }\r\n\r\n    send(payload) {\r\n        if (this.ctrlChannel.readyState != WebSocket.OPEN) {\r\n            this.close();\r\n            // .then(this.connect.bind(this));\r\n            // return;\r\n            throw new Error('disconnected');\r\n        }\r\n        // Log.debug(payload);\r\n        let data = {\r\n            contentLength: payload.length,\r\n            seq: ++WSPProtocol.seq\r\n        };\r\n        return {\r\n            seq:data.seq,\r\n            promise: new Promise((resolve, reject)=>{\r\n                this.awaitingPromises[data.seq] = {resolve, reject};\r\n                let msg = this.builder.build(WSPProtocol.CMD_WRAP, data, payload);\r\n                Log.debug(msg);\r\n                this.ctrlChannel.send(this.encrypt(msg));\r\n            })};\r\n    }\r\n}","import {StateMachine} from 'bp_statemachine';\r\nimport {SDPParser} from '../../core/parsers/sdp';\r\nimport {RTSPStream} from './stream';\r\n// import {RTP} from './rtp/rtp';\r\nimport RTPFactory from './rtp/factory';\r\nimport {MessageBuilder} from './message';\r\nimport {RTPPayloadParser} from './rtp/payload/parser';\r\nimport {BaseClient} from '../../core/base_client';\r\nimport {getTagged} from 'bp_logger';\r\nimport {PayloadType} from '../../core/defs';\r\nimport {base64ToArrayBuffer, hexToByteArray} from '../../core/util/binary';\r\nimport {AACParser} from '../../core/parsers/aac';\r\n\r\nconst LOG_TAG = \"client:rtsp\";\r\nconst Log = getTagged(LOG_TAG);\r\n\r\nexport class RTPError {\r\n    constructor(message, file, line) {\r\n        //super(message, file, line);\r\n    }\r\n}\r\n\r\nexport default class RTSPClient extends BaseClient {\r\n    constructor(transport, options={flush: 200}) {\r\n        super(transport, options);\r\n        this.clientSM = new RTSPClientSM(this, transport);\r\n        this.clientSM.ontracks = (tracks) => {\r\n            this.eventSource.dispatchEvent('tracks', tracks);\r\n            this.startStreamFlush();\r\n        };\r\n        this.sampleQueues={};\r\n    }\r\n    \r\n    static streamType() {\r\n        return 'rtsp';\r\n    }\r\n\r\n    setSource(url) {\r\n        super.setSource(url);\r\n        this.clientSM.setSource(url);\r\n    }\r\n\r\n    destroy() {\r\n        this.clientSM.destroy();\r\n        return super.destroy();\r\n    }\r\n\r\n    start() {\r\n        super.start();\r\n        this.transport.ready.then(()=> {\r\n            this.clientSM.start();\r\n        });\r\n    }\r\n\r\n    onData(data) {\r\n        this.clientSM.onData(data);\r\n    }\r\n\r\n    onConnected() {\r\n        this.clientSM.onConnected();\r\n        super.onConnected();\r\n    }\r\n\r\n    onDisconnected() {\r\n        super.onDisconnected();\r\n        this.clientSM.onDisconnected();\r\n    }\r\n}\r\n\r\nexport class RTSPClientSM extends StateMachine {\r\n    static get USER_AGENT() {return 'SFRtsp 0.3';}\r\n    static get STATE_INITIAL() {return  1 << 0;}\r\n    static get STATE_OPTIONS() {return 1 << 1;}\r\n    static get STATE_DESCRIBE () {return  1 << 2;}\r\n    static get STATE_SETUP() {return  1 << 3;}\r\n    static get STATE_STREAMS() {return 1 << 4;}\r\n    static get STATE_TEARDOWN() {return  1 << 5;}\r\n    // static STATE_PAUSED = 1 << 6;\r\n\r\n    constructor(parent, transport) {\r\n        super();\r\n\r\n        this.parent = parent;\r\n        this.transport = transport;\r\n        this.payParser = new RTPPayloadParser();\r\n        this.rtp_channels = new Set();\r\n        this.ontracks = null;\r\n\r\n        this.reset();\r\n\r\n        this.addState(RTSPClientSM.STATE_INITIAL,{\r\n        }).addState(RTSPClientSM.STATE_OPTIONS, {\r\n            activate: this.sendOptions,\r\n            finishTransition: this.onOptions\r\n        }).addState(RTSPClientSM.STATE_DESCRIBE, {\r\n            activate: this.sendDescribe,\r\n            finishTransition: this.onDescribe\r\n        }).addState(RTSPClientSM.STATE_SETUP, {\r\n            activate: this.sendSetup,\r\n            finishTransition: this.onSetup\r\n        }).addState(RTSPClientSM.STATE_STREAMS, {\r\n\r\n        }).addState(RTSPClientSM.STATE_TEARDOWN, {\r\n            activate: ()=>{\r\n                this.started = false;\r\n            },\r\n            finishTransition: ()=>{\r\n                return this.transitionTo(RTSPClientSM.STATE_INITIAL)\r\n            }\r\n        }).addTransition(RTSPClientSM.STATE_INITIAL, RTSPClientSM.STATE_OPTIONS)\r\n            .addTransition(RTSPClientSM.STATE_INITIAL, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_OPTIONS, RTSPClientSM.STATE_DESCRIBE)\r\n            .addTransition(RTSPClientSM.STATE_DESCRIBE, RTSPClientSM.STATE_SETUP)\r\n            .addTransition(RTSPClientSM.STATE_SETUP, RTSPClientSM.STATE_STREAMS)\r\n            .addTransition(RTSPClientSM.STATE_TEARDOWN, RTSPClientSM.STATE_INITIAL)\r\n            // .addTransition(RTSPClientSM.STATE_STREAMS, RTSPClientSM.STATE_PAUSED)\r\n            // .addTransition(RTSPClientSM.STATE_PAUSED, RTSPClientSM.STATE_STREAMS)\r\n            .addTransition(RTSPClientSM.STATE_STREAMS, RTSPClientSM.STATE_TEARDOWN)\r\n            // .addTransition(RTSPClientSM.STATE_PAUSED, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_SETUP, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_DESCRIBE, RTSPClientSM.STATE_TEARDOWN)\r\n            .addTransition(RTSPClientSM.STATE_OPTIONS, RTSPClientSM.STATE_TEARDOWN);\r\n\r\n        this.transitionTo(RTSPClientSM.STATE_INITIAL);\r\n\r\n        this.shouldReconnect = false;\r\n\r\n        // TODO: remove listeners\r\n        // this.connection.eventSource.addEventListener('connected', ()=>{\r\n        //     if (this.shouldReconnect) {\r\n        //         this.reconnect();\r\n        //     }\r\n        // });\r\n        // this.connection.eventSource.addEventListener('disconnected', ()=>{\r\n        //     if (this.started) {\r\n        //         this.shouldReconnect = true;\r\n        //     }\r\n        // });\r\n        // this.connection.eventSource.addEventListener('data', (data)=>{\r\n        //     let channel = new DataView(data).getUint8(1);\r\n        //     if (this.rtp_channels.has(channel)) {\r\n        //         this.onRTP({packet: new Uint8Array(data, 4), type: channel});\r\n        //     }\r\n        //\r\n        // });\r\n    }\r\n\r\n    destroy() {\r\n        this.parent = null;\r\n    }\r\n\r\n    setSource(url) {\r\n        this.endpoint = url;\r\n        this.url = url.urlpath;\r\n    }\r\n\r\n    onConnected() {\r\n        if (this.rtpFactory) {\r\n            this.rtpFactory = null;\r\n        }\r\n        if (this.shouldReconnect) {\r\n            this.start();\r\n        }\r\n    }\r\n\r\n    onDisconnected() {\r\n        this.reset();\r\n        this.shouldReconnect = true;\r\n        return this.transitionTo(RTSPClientSM.STATE_TEARDOWN);\r\n    }\r\n\r\n    start() {\r\n        if (this.state != RTSPClientSM.STATE_STREAMS) {\r\n            this.transitionTo(RTSPClientSM.STATE_OPTIONS);\r\n        } else {\r\n            // TODO: seekable\r\n        }\r\n    }\r\n\r\n    onData(data) {\r\n        let channel = data[1];\r\n        if (this.rtp_channels.has(channel)) {\r\n            this.onRTP({packet: data.subarray(4), type: channel});\r\n        }\r\n    }\r\n\r\n    useRTPChannel(channel) {\r\n        this.rtp_channels.add(channel);\r\n    }\r\n\r\n    forgetRTPChannel(channel) {\r\n        this.rtp_channels.delete(channel);\r\n    }\r\n\r\n    stop() {\r\n        this.shouldReconnect = false;\r\n        // this.mse = null;\r\n    }\r\n\r\n    reset() {\r\n        this.methods = [];\r\n        this.tracks = [];\r\n        for (let stream in this.streams) {\r\n            this.streams[stream].reset();\r\n        }\r\n        this.streams={};\r\n        this.contentBase = \"\";\r\n        this.state = RTSPClientSM.STATE_INITIAL;\r\n        this.sdp = null;\r\n        this.interleaveChannelIndex = 0;\r\n        this.session = null;\r\n        this.timeOffset = {};\r\n    }\r\n\r\n    reconnect() {\r\n        //this.parent.eventSource.dispatchEvent('clear');\r\n        this.reset();\r\n        if (this.currentState.name != RTSPClientSM.STATE_INITIAL) {\r\n            this.transitionTo(RTSPClientSM.STATE_TEARDOWN).then(()=> {\r\n                this.transitionTo(RTSPClientSM.STATE_OPTIONS);\r\n            });\r\n        } else {\r\n            this.transitionTo(RTSPClientSM.STATE_OPTIONS);\r\n        }\r\n    }\r\n\r\n    supports(method) {\r\n        return this.methods.includes(method)\r\n    }\r\n\r\n    parse(_data) {\r\n        Log.debug(_data.payload);\r\n        let d=_data.payload.split('\\r\\n\\r\\n');\r\n        let parsed =  MessageBuilder.parse(d[0]);\r\n        let len = Number(parsed.headers['content-length']);\r\n        if (len) {\r\n            let d=_data.payload.split('\\r\\n\\r\\n');\r\n            parsed.body = d[1];\r\n        } else {\r\n            parsed.body=\"\";\r\n        }\r\n        return parsed\r\n    }\r\n\r\n    sendRequest(_cmd, _host, _params={}, _payload=null) {\r\n        this.cSeq++;\r\n        Object.assign(_params, {\r\n            CSeq: this.cSeq,\r\n            'User-Agent': RTSPClientSM.USER_AGENT\r\n        });\r\n        if (_host != '*' && this.parent.endpoint.auth) {\r\n            // TODO: DIGEST authentication\r\n            _params['Authorization'] = `Basic ${btoa(this.parent.endpoint.auth)}`;\r\n        }\r\n        return this.send(MessageBuilder.build(_cmd, _host, _params, _payload));\r\n    }\r\n\r\n    send(_data) {\r\n        return this.transport.ready.then(()=> {\r\n            Log.debug(_data);\r\n            return this.transport.send(_data).then(this.parse.bind(this)).then((parsed)=> {\r\n                // TODO: parse status codes\r\n                if (parsed.code>=300) {\r\n                    Log.error(parsed.statusLine);\r\n                    throw new Error(`RTSP error: ${parsed.code} ${parsed.message}`);\r\n                }\r\n                return parsed;\r\n            });\r\n        }).catch(this.onDisconnected.bind(this));\r\n    }\r\n\r\n    sendOptions() {\r\n        this.reset();\r\n        this.started = true;\r\n        this.cSeq = 0;\r\n        return this.sendRequest('OPTIONS', '*', {});\r\n    }\r\n\r\n    onOptions(data) {\r\n        this.methods = data.headers['public'].split(',').map((e)=>e.trim());\r\n        this.transitionTo(RTSPClientSM.STATE_DESCRIBE);\r\n    }\r\n\r\n    sendDescribe() {\r\n        return this.sendRequest('DESCRIBE', this.url, {\r\n            'Accept': 'application/sdp'\r\n        }).then((data)=>{\r\n            this.sdp = new SDPParser();\r\n            return this.sdp.parse(data.body).catch(()=>{\r\n                throw new Error(\"Failed to parse SDP\");\r\n            }).then(()=>{return data;});\r\n        });\r\n    }\r\n\r\n    onDescribe(data) {\r\n        this.contentBase = data.headers['content-base'] || `${this.endpoint.protocol}://${this.endpoint.location}${this.url}/`;\r\n        this.tracks = this.sdp.getMediaBlockList();\r\n        this.rtpFactory = new RTPFactory(this.sdp);\r\n\r\n        Log.log('SDP contained ' + this.tracks.length + ' track(s). Calling SETUP for each.');\r\n\r\n        if (data.headers['session']) {\r\n            this.session = data.headers['session'];\r\n        }\r\n\r\n        if (!this.tracks.length) {\r\n            throw new Error(\"No tracks in SDP\");\r\n        }\r\n\r\n        this.transitionTo(RTSPClientSM.STATE_SETUP);\r\n    }\r\n\r\n    sendSetup() {\r\n        let streams=[];\r\n\r\n        // TODO: select first video and first audio tracks\r\n        for (let track_type of this.tracks) {\r\n            Log.log(\"setup track: \"+track_type);\r\n            // if (track_type=='audio') continue;\r\n            // if (track_type=='video') continue;\r\n            let track = this.sdp.getMediaBlock(track_type);\r\n            if (!PayloadType.string_map[track.rtpmap[track.fmt[0]].name]) continue;\r\n\r\n            this.streams[track_type] = new RTSPStream(this, track);\r\n            let playPromise = this.streams[track_type].start();\r\n            this.parent.sampleQueues[PayloadType.string_map[track.rtpmap[track.fmt[0]].name]]=[];\r\n            streams.push(playPromise.then(({track, data})=>{\r\n                let timeOffset = 0;\r\n                try {\r\n                    let rtp_info = data.headers[\"rtp-info\"].split(';');\r\n                    this.timeOffset[track.fmt[0]] = Number(rtp_info[rtp_info.length - 1].split(\"=\")[1]) ;\r\n                } catch (e) {\r\n                    this.timeOffset[track.fmt[0]] = new Date().getTime();\r\n                }\r\n\r\n                let params = {\r\n                    timescale: 0,\r\n                    scaleFactor: 0\r\n                };\r\n                if (track.fmtp['sprop-parameter-sets']) {\r\n                    let sps_pps = track.fmtp['sprop-parameter-sets'].split(',');\r\n                    params = {\r\n                        sps:base64ToArrayBuffer(sps_pps[0]),\r\n                        pps:base64ToArrayBuffer(sps_pps[1])\r\n                    };\r\n                } else if (track.fmtp['config']) {\r\n                    let config = track.fmtp['config'];\r\n                    this.has_config = track.fmtp['cpresent']!='0';\r\n                    let generic = track.rtpmap[track.fmt[0]].name == 'MPEG4-GENERIC';\r\n                    if (generic) {\r\n                        params={config:\r\n                            AACParser.parseAudioSpecificConfig(hexToByteArray(config))\r\n                        };\r\n                        this.payParser.aacparser.setConfig(params.config);\r\n                    } else if (config) {\r\n                        // todo: parse audio specific config for mpeg4-generic\r\n                        params={config:\r\n                            AACParser.parseStreamMuxConfig(hexToByteArray(config))\r\n                        };\r\n                        this.payParser.aacparser.setConfig(params.config);\r\n                    }\r\n                }\r\n                params.duration = this.sdp.sessionBlock.range?this.sdp.sessionBlock.range[1]-this.sdp.sessionBlock.range[0]:1;\r\n                this.parent.seekable = (params.duration > 1);\r\n                let res = {\r\n                    track: track,\r\n                    offset: timeOffset,\r\n                    type: PayloadType.string_map[track.rtpmap[track.fmt[0]].name],\r\n                    params: params,\r\n                    duration: params.duration\r\n                };\r\n                return res;\r\n            }));\r\n        }\r\n        return Promise.all(streams).then((tracks)=>{\r\n\r\n            if (this.ontracks) {\r\n                this.ontracks(tracks);\r\n            }\r\n        });\r\n    }\r\n\r\n    onSetup() {\r\n        this.transitionTo(RTSPClientSM.STATE_STREAMS);\r\n    }\r\n\r\n    onRTP(_data) {\r\n        if (!this.rtpFactory) return;\r\n\r\n        let rtp = this.rtpFactory.build(_data.packet, this.sdp);\r\n        rtp.timestamp -= this.timeOffset[rtp.pt];\r\n        // Log.debug(rtp);\r\n        if (rtp.media) {\r\n            let pay = this.payParser.parse(rtp);\r\n            if (pay) {\r\n                this.parent.sampleQueues[rtp.type].push([pay]);\r\n            }\r\n        }\r\n\r\n        // this.remuxer.feedRTP();\r\n    }\r\n}","export const isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\r\n\r\nexport const CPU_CORES = 1;//navigator.hardwareConcurrency || 3;","import {LogLevel, getTagged, setDefaultLogLevel} from 'bp_logger';\r\nimport * as streamedian from 'streamedian/player.js';\r\nimport WebsocketTransport from 'streamedian/transport/websocket.js';\r\nimport RTSPClient from 'streamedian/client/rtsp/client.js';\r\nimport {isSafari} from \"streamedian/core/util/browser.js\";\r\n\r\nsetDefaultLogLevel(LogLevel.Debug);\r\ngetTagged(\"transport:ws\").setLevel(LogLevel.Error);\r\ngetTagged(\"client:rtsp\").setLevel(LogLevel.Error);\r\n\r\nlet wsTransport = {\r\n    constructor: WebsocketTransport,\r\n    options: {\r\n        socket: \"wss://specforge.com/ws/\"\r\n    }\r\n};\r\n\r\nlet p = new streamedian.WSPlayer('test_video', {\r\n    // url: `${STREAM_UNIX}${STREAM_URL}`,\r\n    // type: wsp.StreamType.RTSP,\r\n    modules: [\r\n        {\r\n            client: RTSPClient,\r\n            transport: wsTransport\r\n        }\r\n    ]\r\n});"],"names":["DataView","LOG_TAG","Log","logger","RTSPClient","decoder","DEFAULT_CLIENT","DEFAULT_TRANSPORT","WORKER_COUNT","WebsocketTransport","WebSocketProxy","WSPProtocol","RTSPClientSM","isSafari","CPU_CORES","streamedian.WSPlayer"],"mappings":"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"}